"use strict";(self.webpackChunkangular_msal_example=self.webpackChunkangular_msal_example||[]).push([[792],{566:()=>{let xe=null,ko=1;function Ne(n){const e=xe;return xe=n,e}function Jv(n){if((!vs(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ko)){if(!n.producerMustRecompute(n)&&!Lh(n))return n.dirty=!1,void(n.lastCleanEpoch=ko);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ko}}function Lh(n){Oo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Jv(t),r!==t.version))return!0}return!1}function Ec(n,e){if(function oC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Oo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Ec(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Oo(o),o.producerIndexOfThis[r]=e}}function vs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Oo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let iC=null;function _e(n){return"function"==typeof n}function Hh(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Bh=Hh(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function jh(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Rt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(_e(r))try{r()}catch(i){e=i instanceof Bh?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{uC(i)}catch(s){e=e??[],s instanceof Bh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Bh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)uC(e);else{if(e instanceof Rt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&jh(t,e)}remove(e){const{_finalizers:t}=this;t&&jh(t,e),e instanceof Rt&&e._removeParent(this)}}Rt.EMPTY=(()=>{const n=new Rt;return n.closed=!0,n})();const cC=Rt.EMPTY;function lC(n){return n instanceof Rt||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function uC(n){_e(n)?n():n.unsubscribe()}const Wr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ic={setTimeout(n,e,...t){const{delegate:r}=Ic;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ic;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dC(n){Ic.setTimeout(()=>{const{onUnhandledError:e}=Wr;if(!e)throw n;e(n)})}function Vh(){}const LM=$h("C",void 0,void 0);function $h(n,e,t){return{kind:n,value:e,error:t}}let Yr=null;function Tc(n){if(Wr.useDeprecatedSynchronousErrorHandling){const e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Yr;if(Yr=null,t)throw r}}else n()}class Gh extends Rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lC(e)&&e.add(this)):this.destination=$M}static create(e,t,r){return new qh(e,t,r)}next(e){this.isStopped?Kh(function UM(n){return $h("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Kh(function FM(n){return $h("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kh(LM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const BM=Function.prototype.bind;function zh(n,e){return BM.call(n,e)}class jM{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wc(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wc(r)}else wc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wc(t)}}}class qh extends Gh{constructor(e,t,r){let o;if(super(),_e(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Wr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&zh(e.next,i),error:e.error&&zh(e.error,i),complete:e.complete&&zh(e.complete,i)}):o=e}this.destination=new jM(o)}}function wc(n){Wr.useDeprecatedSynchronousErrorHandling?function HM(n){Wr.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=n)}(n):dC(n)}function Kh(n,e){const{onStoppedNotification:t}=Wr;t&&Ic.setTimeout(()=>t(n,e))}const $M={closed:!0,next:Vh,error:function VM(n){throw n},complete:Vh},Wh="function"==typeof Symbol&&Symbol.observable||"@@observable";function Qr(n){return n}function hC(n){return 0===n.length?Qr:1===n.length?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}let ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){const i=function qM(n){return n&&n instanceof Gh||function zM(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}(n)&&lC(n)}(t)?t:new qh(t,r,o);return Tc(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=fC(r))((o,i)=>{const s=new qh({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Wh](){return this}pipe(...t){return hC(t)(this)}toPromise(t){return new(t=fC(t))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function fC(n){var e;return null!==(e=n??Wr.Promise)&&void 0!==e?e:Promise}const KM=Hh(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ft=(()=>{class n extends ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new pC(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new KM}next(t){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Tc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:o,observers:i}=this;return r||o?cC:(this.currentObservers=null,i.push(t),new Rt(()=>{this.currentObservers=null,jh(i,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){const t=new ze;return t.source=this,t}}return n.create=(e,t)=>new pC(e,t),n})();class pC extends Ft{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:cC}}class Ut extends Ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function gC(n){return _e(n?.lift)}function rt(n){return e=>{if(gC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(n,e,t,r,o){return new WM(n,e,t,r,o)}class WM extends Gh{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function re(n,e){return rt((t,r)=>{let o=0;t.subscribe(et(r,i=>{r.next(n.call(e,i,o++))}))})}function de(n){for(let e in n)if(n[e]===de)return e;throw Error("Could not find renamed property on target object.")}function qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Yh(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const YM=de({__forward_ref__:de});function Qh(n){return n.__forward_ref__=Qh,n.toString=function(){return qe(this())},n}function B(n){return Sc(n)?n():n}function Sc(n){return"function"==typeof n&&n.hasOwnProperty(YM)&&n.__forward_ref__===Qh}function Jh(n){return n&&!!n.\u0275providers}const mC="https://g.co/ng/security#xss";class S extends Error{constructor(e,t){super(function Po(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Cs=de({\u0275cmp:de}),Zh=de({\u0275dir:de}),Xh=de({\u0275pipe:de}),yC=de({\u0275mod:de}),Kn=de({\u0275fac:de}),Es=de({__NG_ELEMENT_ID__:de}),vC=de({__NG_ENV_ID__:de});function z(n){return"string"==typeof n?n:null==n?"":String(n)}function ef(n,e){throw new S(-201,!1)}function Mt(n,e){null==n&&function j(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function N(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function In(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ac(n){return CC(n,bc)||CC(n,EC)}function CC(n,e){return n.hasOwnProperty(e)?n[e]:null}function Dc(n){return n&&(n.hasOwnProperty(tf)||n.hasOwnProperty(oN))?n[tf]:null}const bc=de({\u0275prov:de}),tf=de({\u0275inj:de}),EC=de({ngInjectableDef:de}),oN=de({ngInjectorDef:de});var X=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(X||{});let nf;function IC(){return nf}function Nt(n){const e=nf;return nf=n,e}function TC(n,e,t){const r=Ac(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&X.Optional?null:void 0!==e?e:void ef()}const Ce=globalThis;class R{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=N({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Is={},lf="__NG_DI_FLAG__",Rc="ngTempTokenPath",aN=/\n/gm,_C="__source";let xo;function mr(n){const e=xo;return xo=n,e}function uN(n,e=X.Default){if(void 0===xo)throw new S(-203,!1);return null===xo?TC(n,void 0,e):xo.get(n,e&X.Optional?null:void 0,e)}function M(n,e=X.Default){return(IC()||uN)(B(n),e)}function _(n,e=X.Default){return M(n,Mc(e))}function Mc(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uf(n){const e=[];for(let t=0;t<n.length;t++){const r=B(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let o,i=X.Default;for(let s=0;s<r.length;s++){const a=r[s],c=dN(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(M(o,i))}else e.push(M(r))}return e}function Ts(n,e){return n[lf]=e,n.prototype[lf]=e,n}function dN(n){return n[lf]}function Wn(n){return{toString:n}.toString()}var Nc=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Nc||{}),rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(rn||{});const Tn={},ie=[];function AC(n,e,t){let r=n.length;for(;;){const o=n.indexOf(e,t);if(-1===o)return o;if(0===o||n.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function df(n,e,t){let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{const i=o,s=t[++r];bC(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function DC(n){return 3===n||4===n||6===n}function bC(n){return 64===n.charCodeAt(0)}function ws(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?t=o:0===t||RC(n,t,o,null,-1===t||2===t?e[++r]:null)}}return n}function RC(n,e,t,r,o){let i=0,s=n.length;if(-1===e)s=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==o&&(n[i+1]=o));if(r===n[i+1])return void(n[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),null!==r&&n.splice(i++,0,r),null!==o&&n.splice(i++,0,o)}const MC="ng-template";function pN(n,e,t){let r=0,o=!0;for(;r<n.length;){let i=n[r++];if("string"==typeof i&&o){const s=n[r++];if(t&&"class"===i&&-1!==AC(s.toLowerCase(),e,0))return!0}else{if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function NC(n){return 4===n.type&&n.value!==MC}function gN(n,e,t){return e===(4!==n.type||t?n.value:MC)}function mN(n,e,t){let r=4;const o=n.attrs||[],i=function CN(n){for(let e=0;e<n.length;e++)if(DC(n[e]))return e;return n.length}(o);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!gN(n,c,t)||""===c&&1===e.length){if(on(r))return!1;s=!0}}else{const l=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!pN(n.attrs,l,t)){if(on(r))return!1;s=!0}continue}const d=yN(8&r?"class":c,o,NC(n),t);if(-1===d){if(on(r))return!1;s=!0;continue}if(""!==l){let h;h=d>i?"":o[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==AC(f,l,0)||2&r&&l!==h){if(on(r))return!1;s=!0}}}}else{if(!s&&!on(r)&&!on(c))return!1;if(s&&on(c))continue;s=!1,r=c|1&r}}return on(r)||s}function on(n){return!(1&n)}function yN(n,e,t,r){if(null===e)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){const s=e[o];if(s===n)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function EN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function kC(n,e,t=!1){for(let r=0;r<e.length;r++)if(mN(n,e[r],t))return!0;return!1}function OC(n,e){return n?":not("+e.trim()+")":e}function TN(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!on(s)&&(e+=OC(i,o),o=""),r=s,i=i||!on(r);t++}return""!==o&&(e+=OC(i,o)),e}function Lo(n){return Wn(()=>{const e=xC(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Nc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||rn.Emulated,styles:n.styles||ie,_:null,schemas:n.schemas||null,tView:null,id:""};LC(t);const r=n.dependencies;return t.directiveDefs=kc(r,!1),t.pipeDefs=kc(r,!0),t.id=function bN(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const o of t)e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function SN(n){return Z(n)||Ke(n)}function AN(n){return null!==n}function Yn(n){return Wn(()=>({type:n.type,bootstrap:n.bootstrap||ie,declarations:n.declarations||ie,imports:n.imports||ie,exports:n.exports||ie,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function PC(n,e){if(null==n)return Tn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let o=n[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),t[o]=r,e&&(e[o]=i)}return t}function vt(n){return Wn(()=>{const e=xC(n);return LC(e),e})}function Z(n){return n[Cs]||null}function Ke(n){return n[Zh]||null}function ot(n){return n[Xh]||null}function st(n,e){const t=n[yC]||null;if(!t&&!0===e)throw new Error(`Type ${qe(n)} does not have '\u0275mod' property.`);return t}function xC(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Tn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ie,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:PC(n.inputs,e),outputs:PC(n.outputs),debugInfo:null}}function LC(n){n.features?.forEach(e=>e(n))}function kc(n,e){if(!n)return null;const t=e?ot:SN;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(AN)}const ke=0,A=1,U=2,Le=3,sn=4,at=5,an=6,Fo=7,Ee=8,Ct=9,wn=10,W=11,_s=12,FC=13,Uo=14,be=15,Ss=16,Ho=17,_n=18,As=19,UC=20,vr=21,Oc=22,Jr=23,q=25,hf=1,Sn=7,Bo=9,Fe=10;var ff=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ff||{});function ct(n){return Array.isArray(n)&&"object"==typeof n[hf]}function lt(n){return Array.isArray(n)&&!0===n[hf]}function pf(n){return!!(4&n.flags)}function Zr(n){return n.componentOffset>-1}function xc(n){return!(1&~n.flags)}function cn(n){return!!n.template}function gf(n){return!!(512&n[U])}function Xr(n,e){return n.hasOwnProperty(Kn)?n[Kn]:null}class kN{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function eo(){return VC}function VC(n){return n.type.prototype.ngOnChanges&&(n.setInput=PN),ON}function ON(){const n=GC(this),e=n?.current;if(e){const t=n.previous;if(t===Tn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function PN(n,e,t,r){const o=this.declaredInputs[t],i=GC(n)||function xN(n,e){return n[$C]=e}(n,{previous:Tn,current:null}),s=i.current||(i.current={}),a=i.previous,c=a[o];s[o]=new kN(c&&c.currentValue,e,a===Tn),n[r]=e}eo.ngInherit=!0;const $C="__ngSimpleChanges__";function GC(n){return n[$C]||null}const An=function(n,e,t){};let KC=!1;function Ie(n){for(;Array.isArray(n);)n=n[ke];return n}function Et(n,e){return Ie(e[n.index])}function Rs(n,e){return n.data[e]}function Bt(n,e){const t=e[n];return ct(t)?t:t[ke]}function Ef(n){return!(128&~n[U])}function Dn(n,e){return null==e?null:n[e]}function WC(n){n[Ho]=0}function jN(n){1024&n[U]||(n[U]|=1024,Ef(n)&&Ms(n))}function QC(n){return 9216&n[U]||n[Jr]?.dirty}function If(n){QC(n)?Ms(n):64&n[U]&&(function FN(){return KC}()?(n[U]|=1024,Ms(n)):n[wn].changeDetectionScheduler?.notify())}function Ms(n){n[wn].changeDetectionScheduler?.notify();let e=to(n);for(;null!==e&&!(8192&e[U])&&(e[U]|=8192,Ef(e));)e=to(e)}function Lc(n,e){if(!(256&~n[U]))throw new S(911,!1);null===n[vr]&&(n[vr]=[]),n[vr].push(e)}function to(n){const e=n[Le];return lt(e)?e[Le]:e}const $={lFrame:sE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ZC(){return $.bindingsEnabled}function T(){return $.lFrame.lView}function te(){return $.lFrame.tView}function wf(n){return $.lFrame.contextLView=n,n[Ee]}function _f(n){return $.lFrame.contextLView=null,n}function fe(){let n=XC();for(;null!==n&&64===n.type;)n=n.parent;return n}function XC(){return $.lFrame.currentTNode}function bn(n,e){const t=$.lFrame;t.currentTNode=n,t.isParent=e}function Sf(){return $.lFrame.isParent}function Rn(){return $.lFrame.bindingIndex++}function ZN(n,e){const t=$.lFrame;t.bindingIndex=t.bindingRootIndex=n,Df(e)}function Df(n){$.lFrame.currentDirectiveIndex=n}function Rf(n){$.lFrame.currentQueryIndex=n}function ek(n){const e=n[A];return 2===e.type?e.declTNode:1===e.type?n[at]:null}function oE(n,e,t){if(t&X.SkipSelf){let o=e,i=n;for(;!(o=o.parent,null!==o||t&X.Host||(o=ek(i),null===o||(i=i[Uo],10&o.type))););if(null===o)return!1;e=o,n=i}const r=$.lFrame=iE();return r.currentTNode=e,r.lView=n,!0}function Mf(n){const e=iE(),t=n[A];$.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iE(){const n=$.lFrame,e=null===n?null:n.child;return null===e?sE(n):e}function sE(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function aE(){const n=$.lFrame;return $.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const cE=aE;function Nf(){const n=aE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ut(){return $.lFrame.selectedIndex}function no(n){$.lFrame.selectedIndex=n}function Se(){const n=$.lFrame;return Rs(n.tView,n.selectedIndex)}let uE=!0;function Fc(){return uE}function Cr(n){uE=n}function Uc(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Hc(n,e,t){dE(n,e,3,t)}function Bc(n,e,t,r){(3&n[U])===t&&dE(n,e,t,r)}function kf(n,e){let t=n[U];(3&t)===e&&(t&=16383,t+=1,n[U]=t)}function dE(n,e,t,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Ho]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Ho]+=65536),(a<i||-1==i)&&(ak(n,t,e,c),n[Ho]=(4294901760&n[Ho])+c+2),c++}function hE(n,e){An(4,n,e);const t=Ne(null);try{e.call(n)}finally{Ne(t),An(5,n,e)}}function ak(n,e,t,r){const o=t[r]<0,i=t[r+1],a=n[o?-t[r]:t[r]];o?n[U]>>14<n[Ho]>>16&&(3&n[U])===e&&(n[U]+=16384,hE(a,i)):hE(a,i)}const $o=-1;class ks{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Pf(n){return n!==$o}function Os(n){return 32767&n}function Ps(n,e){let t=function hk(n){return n>>16}(n),r=e;for(;t>0;)r=r[Uo],t--;return r}let xf=!0;function jc(n){const e=xf;return xf=n,e}const fE=255,pE=5;let fk=0;const Mn={};function Vc(n,e){const t=gE(n,e);if(-1!==t)return t;const r=e[A];r.firstCreatePass&&(n.injectorIndex=e.length,Lf(r.data,n),Lf(e,null),Lf(r.blueprint,null));const o=$c(n,e),i=n.injectorIndex;if(Pf(o)){const s=Os(o),a=Ps(o,e),c=a[A].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function Lf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function gE(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function $c(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;null!==o;){if(r=TE(o),null===r)return $o;if(t++,o=o[Uo],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return $o}function Ff(n,e,t){!function pk(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Es)&&(r=t[Es]),null==r&&(r=t[Es]=fk++);const o=r&fE;e.data[n+(o>>pE)]|=1<<o}(n,e,t)}function mE(n,e,t){if(t&X.Optional||void 0!==n)return n;ef()}function yE(n,e,t,r){if(t&X.Optional&&void 0===r&&(r=null),!(t&(X.Self|X.Host))){const o=n[Ct],i=Nt(void 0);try{return o?o.get(e,r,t&X.Optional):TC(e,r,t&X.Optional)}finally{Nt(i)}}return mE(r,0,t)}function vE(n,e,t,r=X.Default,o){if(null!==n){if(2048&e[U]&&!(r&X.Self)){const s=function Ck(n,e,t,r,o){let i=n,s=e;for(;null!==i&&null!==s&&2048&s[U]&&!(512&s[U]);){const a=CE(i,s,t,r|X.Self,Mn);if(a!==Mn)return a;let c=i.parent;if(!c){const l=s[UC];if(l){const u=l.get(t,Mn,r);if(u!==Mn)return u}c=TE(s),s=s[Uo]}i=c}return o}(n,e,t,r,Mn);if(s!==Mn)return s}const i=CE(n,e,t,r,Mn);if(i!==Mn)return i}return yE(e,t,r,o)}function CE(n,e,t,r,o){const i=function yk(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Es)?n[Es]:void 0;return"number"==typeof e?e>=0?e&fE:vk:e}(t);if("function"==typeof i){if(!oE(e,n,r))return r&X.Host?mE(o,0,r):yE(e,t,r,o);try{let s;if(s=i(r),null!=s||r&X.Optional)return s;ef()}finally{cE()}}else if("number"==typeof i){let s=null,a=gE(n,e),c=$o,l=r&X.Host?e[be][at]:null;for((-1===a||r&X.SkipSelf)&&(c=-1===a?$c(n,e):e[a+8],c!==$o&&IE(r,!1)?(s=e[A],a=Os(c),e=Ps(c,e)):a=-1);-1!==a;){const u=e[A];if(EE(i,a,u.data)){const d=mk(a,e,t,s,r,l);if(d!==Mn)return d}c=e[a+8],c!==$o&&IE(r,e[A].data[a+8]===l)&&EE(i,a,e)?(s=u,a=Os(c),e=Ps(c,e)):a=-1}}return o}function mk(n,e,t,r,o,i){const s=e[A],a=s.data[n+8],u=function Gc(n,e,t,r,o){const i=n.providerIndexes,s=e.data,a=1048575&i,c=n.directiveStart,u=i>>20,h=o?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const g=s[f];if(f<c&&t===g||f>=c&&g.type===t)return f}if(o){const f=s[c];if(f&&cn(f)&&f.type===t)return c}return null}(a,s,t,null==r?Zr(a)&&xf:r!=s&&!!(3&a.type),o&X.Host&&i===a);return null!==u?ro(e,s,u,a):Mn}function ro(n,e,t,r){let o=n[t];const i=e.data;if(function ck(n){return n instanceof ks}(o)){const s=o;s.resolving&&function JM(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ae(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():z(n)}(i[t]));const a=jc(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Nt(s.injectImpl):null;oE(n,r,X.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&function sk(n,e,t){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=VC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}(t,i[t],e)}finally{null!==l&&Nt(l),jc(a),s.resolving=!1,cE()}}return o}function EE(n,e,t){return!!(t[e+(n>>pE)]&1<<n)}function IE(n,e){return!(n&X.Self||n&X.Host&&e)}class We{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return vE(this._tNode,this._lView,e,Mc(r),t)}}function vk(){return new We(fe(),T())}function Uf(n){return Wn(()=>{const e=n.prototype.constructor,t=e[Kn]||Hf(e),r=Object.prototype;let o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){const i=o[Kn]||Hf(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Hf(n){return Sc(n)?()=>{const e=Hf(B(n));return e&&e()}:Xr(n)}function TE(n){const e=n[A],t=e.type;return 2===t?e.declTNode:1===t?n[at]:null}const Ko="__parameters__";function Yo(n,e,t){return Wn(()=>{const r=function Bf(n){return function(...t){if(n){const r=n(...t);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(Ko)?c[Ko]:Object.defineProperty(c,Ko,{value:[]})[Ko];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}function Jo(n,e){n.forEach(t=>Array.isArray(t)?Jo(t,e):e(t))}function _E(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Yc=Ts(Yo("Optional"),8),Qc=Ts(Yo("SkipSelf"),4),oo=new R("ENVIRONMENT_INITIALIZER"),ME=new R("INJECTOR",-1),zf=new R("INJECTOR_DEF_TYPES");class Zc{get(e,t=Is){if(t===Is){const r=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw r.name="NullInjectorError",r}return t}}function jk(...n){return{\u0275providers:NE(0,n),\u0275fromNgModule:!0}}function NE(n,...e){const t=[],r=new Set;let o;const i=s=>{t.push(s)};return Jo(e,s=>{const a=s;el(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&kE(o,i),t}function kE(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:o}=n[t];qf(o,i=>{e(i,r)})}}function el(n,e,t,r){if(!(n=B(n)))return!1;let o=null,i=Dc(n);const s=!i&&Z(n);if(i||s){if(s&&!s.standalone)return!1;o=n}else{const c=n.ngModule;if(i=Dc(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)el(l,e,t,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{Jo(i.imports,u=>{el(u,e,t,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&kE(l,e)}if(!a){const l=Xr(o)||(()=>new o);e({provide:o,useFactory:l,deps:ie},o),e({provide:zf,useValue:o,multi:!0},o),e({provide:oo,useValue:()=>M(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const l=n;qf(c,u=>{e(u,l)})}}}return o!==n&&void 0!==n.providers}function qf(n,e){for(let t of n)Jh(t)&&(t=t.\u0275providers),Array.isArray(t)?qf(t,e):e(t)}const Vk=de({provide:String,useValue:de});function Kf(n){return null!==n&&"object"==typeof n&&Vk in n}function io(n){return"function"==typeof n}const Wf=new R("Set Injector scope."),tl={},Gk={};let Yf;function nl(){return void 0===Yf&&(Yf=new Zc),Yf}class Vt{}class ei extends Vt{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Jf(e,s=>this.processProvider(s)),this.records.set(ME,ti(void 0,this)),o.has("environment")&&this.records.set(Vt,ti(void 0,this));const i=this.records.get(Wf);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(zf,ie,X.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=mr(this),r=Nt(void 0);try{return e()}finally{mr(t),Nt(r)}}get(e,t=Is,r=X.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vC))return e[vC](this);r=Mc(r);const i=mr(this),s=Nt(void 0);try{if(!(r&X.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function Yk(n){return"function"==typeof n||"object"==typeof n&&n instanceof R}(e)&&Ac(e);c=l&&this.injectableDefInScope(l)?ti(Qf(e),tl):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&X.Self?nl():this.parent).get(e,t=r&X.Optional&&t===Is?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Rc]=a[Rc]||[]).unshift(qe(e)),i)throw a;return function hN(n,e,t,r){const o=n[Rc];throw e[_C]&&o.unshift(e[_C]),n.message=function fN(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let o=qe(e);if(Array.isArray(e))o=e.map(qe).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):qe(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(aN,"\n  ")}`}("\n"+n.message,o,t,r),n.ngTokenPath=o,n[Rc]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Nt(s),mr(i)}}resolveInjectorInitializers(){const e=mr(this),t=Nt(void 0);try{const o=this.get(oo,ie,X.Self);for(const i of o)i()}finally{mr(e),Nt(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=io(e=B(e))?e:B(e&&e.provide);const r=function qk(n){return Kf(n)?ti(void 0,n.useValue):ti(function xE(n,e,t){let r;if(io(n)){const o=B(n);return Xr(o)||Qf(o)}if(Kf(n))r=()=>B(n.useValue);else if(function PE(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...uf(n.deps||[]));else if(function OE(n){return!(!n||!n.useExisting)}(n))r=()=>M(B(n.useExisting));else{const o=B(n&&(n.useClass||n.provide));if(!function Kk(n){return!!n.deps}(n))return Xr(o)||Qf(o);r=()=>new o(...uf(n.deps))}return r}(n),tl)}(e);if(!io(e)&&!0===e.multi){let o=this.records.get(t);o||(o=ti(void 0,tl,!0),o.factory=()=>uf(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===tl&&(t.value=Gk,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Wk(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=B(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Qf(n){const e=Ac(n),t=null!==e?e.factory:Xr(n);if(null!==t)return t;if(n instanceof R)throw new S(204,!1);if(n instanceof Function)return function zk(n){if(n.length>0)throw new S(204,!1);const t=function rN(n){return n&&(n[bc]||n[EC])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function ti(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Jf(n,e){for(const t of n)Array.isArray(t)?Jf(t,e):t&&Jh(t)?Jf(t.\u0275providers,e):e(t)}function Er(n,e){n instanceof ei&&n.assertNotDestroyed();const r=mr(n),o=Nt(void 0);try{return e()}finally{mr(r),Nt(o)}}function HE(n,e=null,t=null,r){const o=BE(n,e,t,r);return o.resolveInjectorInitializers(),o}function BE(n,e=null,t=null,r,o=new Set){const i=[t||ie,jk(n)];return r=r||("object"==typeof n?void 0:qe(n)),new ei(i,e||nl(),r||null,o)}let ep,$t=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Is;static#t=this.NULL=new Zc;static create(t,r){if(Array.isArray(t))return HE({name:""},r,t,"");{const o=t.name??"";return HE({name:o},t.parent,t.providers,o)}}static#n=this.\u0275prov=N({token:n,providedIn:"any",factory:()=>M(ME)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();const ol=new R("AppId",{providedIn:"root",factory:()=>oO}),oO="ng",VE=new R("Platform Initializer"),wr=new R("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$E=new R("CSP nonce",{providedIn:"root",factory:()=>function Tr(){if(void 0!==ep)return ep;if(typeof document<"u")return document;throw new S(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Gt(n){return n instanceof Function?n():n}function cl(n){return!(128&~n.flags)}var Ar=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ar||{});const ip=new Map;let yO=0;const ap="__ngContext__";function dt(n,e){ct(e)?(n[ap]=e[As],function CO(n){ip.set(n[As],n)}(e)):n[ap]=e}let cp;function lp(n,e){return cp(n,e)}function ri(n,e,t,r,o){if(null!=r){let i,s=!1;lt(r)?i=r:ct(r)&&(s=!0,r=r[ke]);const a=Ie(r);0===n&&null!==t?null==o?dI(e,t,a):so(e,t,a,o||null,!0):1===n&&null!==t?so(e,t,a,o||null,!0):2===n?function gl(n,e,t){const r=fl(n,e);r&&function xO(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=i&&function UO(n,e,t,r,o){const i=t[Sn];i!==Ie(t)&&ri(e,n,r,i,o);for(let a=Fe;a<t.length;a++){const c=t[a];ml(c[A],c,n,e,r,i)}}(e,n,i,t,o)}}function dl(n,e,t){return n.createElement(e,t)}function cI(n,e){e[wn].changeDetectionScheduler?.notify(),ml(n,e,e[W],2,null,null)}function lI(n,e){const t=n[Bo],r=t.indexOf(e);t.splice(r,1)}function js(n,e){if(n.length<=Fe)return;const t=Fe+e,r=n[t];if(r){const o=r[Ss];null!==o&&o!==n&&lI(o,r),e>0&&(n[t-1][sn]=r[sn]);const i=qc(n,Fe+e);!function bO(n,e){cI(n,e),e[ke]=null,e[at]=null}(r[A],r);const s=i[_n];null!==s&&s.detachView(i[A]),r[Le]=null,r[sn]=null,r[U]&=-129}return r}function hl(n,e){if(!(256&e[U])){const t=e[W];t.destroyNode&&ml(n,e,t,3,null,null),function MO(n){let e=n[_s];if(!e)return dp(n[A],n);for(;e;){let t=null;if(ct(e))t=e[_s];else{const r=e[Fe];r&&(t=r)}if(!t){for(;e&&!e[sn]&&e!==n;)ct(e)&&dp(e[A],e),e=e[Le];null===e&&(e=n),ct(e)&&dp(e[A],e),t=e&&e[sn]}e=t}}(e)}}function dp(n,e){if(!(256&e[U])){e[U]&=-129,e[U]|=256,e[Jr]&&function nC(n){if(Oo(n),vs(n))for(let e=0;e<n.producerNode.length;e++)Ec(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[Jr]),function PO(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const o=e[t[r]];if(!(o instanceof ks)){const i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];An(4,a,c);try{c.call(a)}finally{An(5,a,c)}}else{An(4,o,i);try{i.call(o)}finally{An(5,o,i)}}}}}(n,e),function OO(n,e){const t=n.cleanup,r=e[Fo];if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else t[i].call(r[t[i+1]]);null!==r&&(e[Fo]=null);const o=e[vr];if(null!==o){e[vr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(n,e),1===e[A].type&&e[W].destroy();const t=e[Ss];if(null!==t&&lt(e[Le])){t!==e[Le]&&lI(t,e);const r=e[_n];null!==r&&r.detachView(n)}!function EO(n){ip.delete(n[As])}(e)}}function hp(n,e,t){return function uI(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[ke];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=n.data[r.directiveStart+o];if(i===rn.None||i===rn.Emulated)return null}return Et(r,t)}}(n,e.parent,t)}function so(n,e,t,r,o){n.insertBefore(e,t,r,o)}function dI(n,e,t){n.appendChild(e,t)}function hI(n,e,t,r,o){null!==r?so(n,e,t,r,o):dI(n,e,t)}function fl(n,e){return n.parentNode(e)}let fp,vl,gI=function pI(n,e,t){return 40&n.type?Et(n,t):null};function pl(n,e,t,r){const o=hp(n,r,e),i=e[W],a=function fI(n,e,t){return gI(n,e,t)}(r.parent||e[at],r,e);if(null!=o)if(Array.isArray(t))for(let c=0;c<t.length;c++)hI(i,o,t[c],a,!1);else hI(i,o,t,a,!1);void 0!==fp&&fp(i,r,e,t,o)}function Vs(n,e){if(null!==e){const t=e.type;if(3&t)return Et(e,n);if(4&t)return pp(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Vs(n,r);{const o=n[e.index];return lt(o)?pp(-1,o):Ie(o)}}if(32&t)return lp(e,n)()||Ie(n[e.index]);{const r=yI(n,e);return null!==r?Array.isArray(r)?r[0]:Vs(to(n[be]),r):Vs(n,e.next)}}return null}function yI(n,e){return null!==e?n[be][at].projection[e.projection]:null}function pp(n,e){const t=Fe+n+1;if(t<e.length){const r=e[t],o=r[A].firstChild;if(null!==o)return Vs(r,o)}return e[Sn]}function gp(n,e,t,r,o,i,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&dt(Ie(a),r),t.flags|=2),32&~t.flags)if(8&c)gp(n,e,t.child,r,o,i,!1),ri(e,n,o,a,i);else if(32&c){const l=lp(t,r);let u;for(;u=l();)ri(e,n,o,u,i);ri(e,n,o,a,i)}else 16&c?CI(n,e,r,t,o,i):ri(e,n,o,a,i);t=s?t.projectionNext:t.next}}function ml(n,e,t,r,o,i){gp(t,r,n.firstChild,e,o,i,!1)}function CI(n,e,t,r,o,i){const s=t[be],c=s[at].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)ri(e,n,o,c[l],i);else{let l=c;const u=s[Le];cl(r)&&(l.flags|=128),gp(n,e,l,u,o,i,!0)}}function EI(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function II(n,e,t){const{mergedAttrs:r,classes:o,styles:i}=t;null!==r&&df(n,e,r),null!==o&&EI(n,e,o),null!==i&&function BO(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function _I(n){return function yp(){if(void 0===vl&&(vl=null,Ce.trustedTypes))try{vl=Ce.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vl}()?.createScriptURL(n)||n}class SI{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mC})`}}function Dr(n){return n instanceof SI?n.changingThisBreaksApplicationSecurity:n}function $s(n,e){const t=function YO(n){return n instanceof SI&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${mC})`)}return t===e}const XO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ii=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ii||{});function kI(n){const e=zs();return e?e.sanitize(ii.URL,n)||"":$s(n,"URL")?Dr(n):function vp(n){return(n=String(n)).match(XO)?n:"unsafe:"+n}(z(n))}function OI(n){const e=zs();if(e)return _I(e.sanitize(ii.RESOURCE_URL,n)||"");if($s(n,"ResourceURL"))return _I(Dr(n));throw new S(904,!1)}function zs(){const n=T();return n&&n[wn].sanitizer}class xI{}let LI=()=>null;function Rp(n,e,t=!1){return LI(n,e,t)}class EP{}class HI{}class TP{resolveComponentFactory(e){throw function IP(n){const e=Error(`No component factory found for ${qe(n)}.`);return e.ngComponent=n,e}(e)}}let Sl=(()=>{class n{static#e=this.NULL=new TP}return n})();function wP(){return ci(fe(),T())}function ci(n,e){return new br(Et(n,e))}let br=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=wP}return n})();class jI{}let Al=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function SP(){const n=T(),t=Bt(fe().index,n);return(ct(t)?t:n)[W]}()}return n})(),AP=(()=>{class n{static#e=this.\u0275prov=N({token:n,providedIn:"root",factory:()=>null})}return n})();const kp={};function Ws(n,e,t,r,o=!1){for(;null!==t;){const i=e[t.index];null!==i&&r.push(Ie(i)),lt(i)&&YI(i,r);const s=t.type;if(8&s)Ws(n,e,t.child,r);else if(32&s){const a=lp(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=yI(e,t);if(Array.isArray(a))r.push(...a);else{const c=to(e[be]);Ws(c[A],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function YI(n,e){for(let t=Fe;t<n.length;t++){const r=n[t],o=r[A].firstChild;null!==o&&Ws(r[A],r,o,e)}n[Sn]!==n[ke]&&e.push(n[Sn])}let QI=[];const BP={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ms(n.lView)},consumerOnSignalRead(){this.lView[Jr]=this}};function JI(n){return XI(n[_s])}function ZI(n){return XI(n[sn])}function XI(n){for(;null!==n&&!lt(n);)n=n[sn];return n}function xp(n){return n.ngOriginalError}class Xn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&xp(e);for(;t&&xp(t);)t=xp(t);return t||null}}const tT=new R("",{providedIn:"root",factory:()=>_(Xn).handleError.bind(void 0)}),rT=new R("",{providedIn:"root",factory:()=>!1}),Y={};function ht(n=1){aT(te(),T(),ut()+n,!1)}function aT(n,e,t,r){if(!r)if(3&~e[U]){const i=n.preOrderHooks;null!==i&&Bc(e,i,0,t)}else{const i=n.preOrderCheckHooks;null!==i&&Hc(e,i,t)}no(t)}function F(n,e=X.Default){const t=T();return null===t?M(n,e):vE(fe(),t,B(n),e)}function Ml(n,e,t,r,o,i,s,a,c,l,u){const d=e.blueprint.slice();return d[ke]=o,d[U]=204|r,(null!==l||n&&2048&n[U])&&(d[U]|=2048),WC(d),d[Le]=d[Uo]=n,d[Ee]=t,d[wn]=s||n&&n[wn],d[W]=a||n&&n[W],d[Ct]=c||n&&n[Ct]||null,d[at]=i,d[As]=function vO(){return yO++}(),d[an]=u,d[UC]=l,d[be]=2==e.type?n[be]:d,d}function li(n,e,t,r,o){let i=n.data[e];if(null===i)i=function Lp(n,e,t,r,o){const i=XC(),s=Sf(),c=n.data[e]=function t0(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function Vo(){return null!==$.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,t,e,r,o);return null===n.firstChild&&(n.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(n,e,t,r,o),function JN(){return $.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=r,i.attrs=o;const s=function Ns(){const n=$.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return bn(i,!0),i}function Ys(n,e,t,r){if(0===t)return-1;const o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function lT(n,e,t,r,o){const i=ut(),s=2&r;try{no(-1),s&&e.length>q&&aT(n,e,q,!1),An(s?2:0,o),t(r,o)}finally{no(i),An(s?3:1,o)}}function Fp(n,e,t){if(pf(e)){const r=Ne(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Ne(r)}}}function Up(n,e,t){ZC()&&(function l0(n,e,t,r){const o=t.directiveStart,i=t.directiveEnd;Zr(t)&&function m0(n,e,t){const r=Et(e,n),o=uT(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Nl(n,Ml(n,o,null,s,r,e,null,n[wn].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Vc(t,e),dt(r,e);const s=t.initialInputs;for(let a=o;a<i;a++){const c=n.data[a],l=ro(e,n,a,t);dt(l,e),null!==s&&y0(0,a-o,l,c,0,s),cn(c)&&(Bt(t.index,e)[Ee]=ro(e,n,a,t))}}(n,e,t,Et(t,e)),!(64&~t.flags)&&gT(n,e,t))}function Hp(n,e,t=Et){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?t(e,n):n[s];n[o++]=a}}}function uT(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Bp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bp(n,e,t,r,o,i,s,a,c,l,u){const d=q+r,h=d+o,f=function YP(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Y);return t}(d,h),g="function"==typeof l?l():l;return f[A]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}let dT=()=>null;function hT(n,e,t,r){for(let o in n)if(n.hasOwnProperty(o)){t=null===t?{}:t;const i=n[o];null===r?fT(t,e,o,i):r.hasOwnProperty(o)&&fT(t,e,r[o],i)}return t}function fT(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function jp(n,e,t,r){if(ZC()){const o=null===r?null:{"":-1},i=function d0(n,e){const t=n.directiveRegistry;let r=null,o=null;if(t)for(let i=0;i<t.length;i++){const s=t[i];if(kC(e,s.selectors,!1))if(r||(r=[]),cn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),Vp(n,e,a.length)}else r.unshift(s),Vp(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(n,t);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&pT(n,e,t,s,o,a),o&&function h0(n,e,t){if(e){const r=n.localNames=[];for(let o=0;o<e.length;o+=2){const i=t[e[o+1]];if(null==i)throw new S(-301,!1);r.push(e[o],i)}}}(t,r,o)}t.mergedAttrs=ws(t.mergedAttrs,t.attrs)}function pT(n,e,t,r,o,i){for(let l=0;l<r.length;l++)Ff(Vc(t,e),n,r[l].type);!function p0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ys(n,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];t.mergedAttrs=ws(t.mergedAttrs,u.hostAttrs),g0(n,t,e,c,u),f0(c,u,o),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function n0(n,e,t){const o=e.directiveEnd,i=n.data,s=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=t?t.get(d):null,g=h?h.outputs:null;c=hT(d.inputs,u,c,h?h.inputs:null),l=hT(d.outputs,u,l,g);const m=null===c||null===s||NC(e)?null:v0(c,u,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,i)}function gT(n,e,t){const r=t.directiveStart,o=t.directiveEnd,i=t.index,s=function XN(){return $.lFrame.currentDirectiveIndex}();try{no(i);for(let a=r;a<o;a++){const c=n.data[a],l=e[a];Df(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&u0(c,l)}}finally{no(-1),Df(s)}}function u0(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Vp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;cn(e)&&(t[""]=n)}}function g0(n,e,t,r,o){n.data[r]=o;const i=o.factory||(o.factory=Xr(o.type)),s=new ks(i,cn(o),F);n.blueprint[r]=s,t[r]=s,function a0(n,e,t,r,o){const i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function c0(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,i)}}(n,e,r,Ys(n,t,o.hostVars,Y),o)}function Nn(n,e,t,r,o,i){const s=Et(n,e);!function $p(n,e,t,r,o,i,s){if(null==i)n.removeAttribute(e,o,t);else{const a=null==s?z(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}(e[W],s,i,n.value,t,r,o)}function y0(n,e,t,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;)mT(r,t,s[a++],s[a++],s[a++])}function mT(n,e,t,r,o){const i=Ne(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(o=s[r].call(e,o)),null!==n.setInput?n.setInput(e,o,t,r):e[r]=o}finally{Ne(i)}}function v0(n,e,t){let r=null,o=0;for(;o<t.length;){const i=t[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const s=n[i];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(i,s[a+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function yT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function vT(n,e){const t=n.contentQueries;if(null!==t){const r=Ne(null);try{for(let o=0;o<t.length;o+=2){const s=t[o+1];if(-1!==s){const a=n.data[s];Rf(t[o]),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function Nl(n,e){return n[_s]?n[FC][sn]=e:n[_s]=e,n[FC]=e,e}function Gp(n,e,t){Rf(0);const r=Ne(null);try{e(n,t)}finally{Ne(r)}}function kl(n,e){const t=n[Ct],r=t?t.get(Xn,null):null;r&&r.handleError(e)}function zp(n,e,t,r,o){for(let i=0;i<t.length;){const s=t[i++],a=t[i++];mT(n.data[s],e[s],r,a,o)}}function er(n,e,t){const r=function bs(n,e){return Ie(e[n])}(e,n);!function aI(n,e,t){n.setValue(e,t)}(n[W],r,t)}function I0(n,e,t,r){const o=e[U];if(!(256&~o))return;e[wn].inlineEffectRunner?.flush(),Mf(e);let s=null,a=null;(function T0(n){return 2!==n.type})(n)&&(a=function FP(n){return n[Jr]??function UP(n){const e=QI.pop()??Object.create(BP);return e.lView=n,e}(n)}(e),s=function eC(n){return n&&(n.nextProducerIndex=0),Ne(n)}(a));try{WC(e),function tE(n){return $.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&lT(n,e,t,2,r);const c=!(3&~o);if(c){const d=n.preOrderCheckHooks;null!==d&&Hc(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Bc(e,d,0,null),kf(e,0)}if(function w0(n){for(let e=JI(n);null!==e;e=ZI(e)){if(!(e[U]&ff.HasTransplantedViews))continue;const t=e[Bo];for(let r=0;r<t.length;r++){jN(t[r])}}}(e),TT(e,0),null!==n.contentQueries&&vT(n,e),c){const d=n.contentCheckHooks;null!==d&&Hc(e,d)}else{const d=n.contentHooks;null!==d&&Bc(e,d,1),kf(e,1)}!function WP(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)no(~o);else{const i=o,s=t[++r],a=t[++r];ZN(s,i),a(2,e[i])}}}finally{no(-1)}}(n,e);const l=n.components;null!==l&&_T(e,l,0);const u=n.viewQuery;if(null!==u&&Gp(2,u,r),c){const d=n.viewCheckHooks;null!==d&&Hc(e,d)}else{const d=n.viewHooks;null!==d&&Bc(e,d,2),kf(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Oc]){for(const d of e[Oc])d();e[Oc]=null}e[U]&=-73}catch(c){throw Ms(e),c}finally{null!==a&&(function tC(n,e){if(Ne(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(vs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ec(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(a,s),function HP(n){n.lView[Jr]!==n&&(n.lView=null,QI.push(n))}(a)),Nf()}}function TT(n,e){for(let t=JI(n);null!==t;t=ZI(t))for(let r=Fe;r<t.length;r++)wT(t[r],e)}function _0(n,e,t){wT(Bt(e,n),t)}function wT(n,e){Ef(n)&&Kp(n,e)}function Kp(n,e){const r=n[A],o=n[U],i=n[Jr];let s=!!(0===e&&16&o);if(s||=!!(64&o&&0===e),s||=!!(1024&o),s||=!(!i?.dirty||!Lh(i)),i&&(i.dirty=!1),n[U]&=-9217,s)I0(r,n,r.template,n[Ee]);else if(8192&o){TT(n,1);const a=r.components;null!==a&&_T(n,a,1)}}function _T(n,e,t){for(let r=0;r<e.length;r++)_0(n,e[r],t)}function Qs(n){for(n[wn].changeDetectionScheduler?.notify();n;){n[U]|=64;const e=to(n);if(gf(n)&&!e)return n;n=e}return null}class Js{get rootNodes(){const e=this._lView,t=e[A];return Ws(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ee]}set context(e){this._lView[Ee]=e}get destroyed(){return!(256&~this._lView[U])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Le];if(lt(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(js(e,r),qc(t,r))}this._attachedToViewContainer=!1}hl(this._lView[A],this._lView)}onDestroy(e){Lc(this._lView,e)}markForCheck(){Qs(this._cdRefInjectingView||this._lView)}detach(){this._lView[U]&=-129}reattach(){If(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,function qp(n,e=!0){const t=n[wn],r=t.rendererFactory;r.begin?.();try{!function E0(n){Kp(n,0);let e=0;for(;QC(n);){if(100===e)throw new S(103,!1);e++,Kp(n,1)}}(n)}catch(i){throw e&&kl(n,i),i}finally{r.end?.(),t.inlineEffectRunner?.flush()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,cI(this._lView[A],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e,If(this._lView)}}let Ol=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=S0}return n})();function S0(n){return function A0(n,e,t){if(Zr(n)&&!t){const r=Bt(n.index,e);return new Js(r,r)}return 47&n.type?new Js(e[be],e):null}(fe(),T(),!(16&~n))}let Pl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=M0;static#t=this.__NG_ENV_ID__=t=>t}return n})();class R0 extends Pl{constructor(e){super(),this._lView=e}onDestroy(e){return Lc(this._lView,e),()=>function Tf(n,e){if(null===n[vr])return;const t=n[vr].indexOf(e);-1!==t&&n[vr].splice(t,1)}(this._lView,e)}}function M0(){return new R0(T())}const ST=new Set;function ao(n){ST.has(n)||(ST.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Wp(n){return e=>{setTimeout(n,void 0,e)}}const Tt=class F0 extends Ft{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=Wp(i),o&&(o=Wp(o)),s&&(s=Wp(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof Rt&&e.add(a),a}};function AT(...n){}class ce{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&t,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function U0(){const n="function"==typeof Ce.requestAnimationFrame;let e=Ce[n?"requestAnimationFrame":"setTimeout"],t=Ce[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function j0(n){const e=()=>{!function B0(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ce,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Qp(n),n.isCheckStableRunning=!0,Yp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Qp(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,o,i,s,a)=>{if(function V0(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(o,i,s,a);try{return DT(n),t.invokeTask(o,i,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),bT(n)}},onInvoke:(t,r,o,i,s,a,c)=>{try{return DT(n),t.invoke(o,i,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),bT(n)}},onHasTask:(t,r,o,i)=>{t.hasTask(o,i),r===o&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Qp(n),Yp(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,o,i)=>(t.handleError(o,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ce.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(ce.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,H0,AT,AT);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const H0={};function Yp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Qp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function DT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bT(n){n._nesting--,Yp(n)}class RT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tt,this.onMicrotaskEmpty=new Tt,this.onStable=new Tt,this.onError=new Tt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}}var co=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(co||{});const MT={destroy(){}};function kT(n,e){!e&&function Zf(n){if(!IC()&&!function lN(){return xo}())throw new S(-203,!1)}();const t=e?.injector??_($t);if(!function _r(n){return"browser"===(n??_($t)).get(wr)}(t))return MT;ao("NgAfterNextRender");const r=t.get(Zs),o=r.handler??=new PT,i=e?.phase??co.MixedReadWrite,s=()=>{o.unregister(c),a()},a=t.get(Pl).onDestroy(s),c=new OT(t,i,()=>{s(),n()});return o.register(c),{destroy:s}}class OT{constructor(e,t,r){this.phase=t,this.callbackFn=r,this.zone=e.get(ce),this.errorHandler=e.get(Xn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class PT{constructor(){this.executingCallbacks=!1,this.buckets={[co.EarlyRead]:new Set,[co.Write]:new Set,[co.MixedReadWrite]:new Set,[co.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(const t of Object.values(this.buckets))for(const r of t)e=!0,r.invoke();this.executingCallbacks=!1;for(const t of this.deferredCallbacks)this.buckets[t.phase].add(t);return this.deferredCallbacks.clear(),e}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Zs=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const o of t)o();return!!this.handler?.execute()||t.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=N({token:n,providedIn:"root",factory:()=>new n})}return n})();function z0(n,e){const t=Bt(e,n),r=t[A];!function q0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const o=t[ke];null!==o&&null===t[an]&&(t[an]=Rp(o,t[Ct])),Jp(r,t,t[Ee])}function Jp(n,e,t){Mf(e);try{const r=n.viewQuery;null!==r&&Gp(1,r,t);const o=n.template;null!==o&&lT(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&vT(n,e),n.staticViewQueries&&Gp(2,n.viewQuery,t);const i=n.components;null!==i&&function K0(n,e){for(let t=0;t<e.length;t++)z0(n,e[t])}(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[U]&=-5,Nf()}}function xl(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Yh(o,a):2==i&&(r=Yh(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}class xT extends Sl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Z(e);return new Xs(t,this.ngModule)}}function LT(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Y0{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Mc(r);const o=this.injector.get(e,kp,r);return o!==kp||t===kp?o:this.parentInjector.get(e,t,r)}}class Xs extends HI{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=LT(e.inputs);if(null!==t)for(const o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return LT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function wN(n){return n.map(TN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=(o=o||this.ngModule)instanceof Vt?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new Y0(e,i):e,a=s.get(jI,null);if(null===a)throw new S(407,!1);const d={rendererFactory:a,sanitizer:s.get(AP,null),inlineEffectRunner:null,afterRenderEventManager:s.get(Zs,null),changeDetectionScheduler:s.get(xI,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?function QP(n,e,t,r){const i=r.get(rT,!1)||t===rn.ShadowDom,s=n.selectRootElement(e,i);return function JP(n){dT(n)}(s),s}(h,r,this.componentDef.encapsulation,s):dl(h,f,function W0(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f));let m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let y=null;null!==g&&(y=Rp(g,s,!0));const I=Bp(0,null,null,1,0,null,null,null,null,null,null),C=Ml(null,I,null,m,null,null,d,h,s,null,y);let b,x;Mf(C);try{const H=this.componentDef;let me,Kr=null;H.findHostDirectiveDefs?(me=[],Kr=new Map,H.findHostDirectiveDefs(H,me,Kr),me.push(H)):me=[H];const kh=function J0(n,e){const t=n[A],r=q;return n[r]=e,li(t,r,2,"#host",null)}(C,g),Q3=function Z0(n,e,t,r,o,i,s){const a=o[A];!function X0(n,e,t,r){for(const o of n)e.mergedAttrs=ws(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(xl(e,e.mergedAttrs,!0),null!==t&&II(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=Rp(e,o[Ct]));const l=i.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Ml(o,uT(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&Vp(a,n,r.length-1),Nl(o,d),o[n.index]=d}(kh,g,H,me,C,d,h);x=Rs(I,q),g&&function tx(n,e,t,r){if(r)df(n,t,["ng-version","17.0.9"]);else{const{attrs:o,classes:i}=function _N(n){const e=[],t=[];let r=1,o=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===o?""!==i&&e.push(i,n[++r]):8===o&&t.push(i);else{if(!on(o))break;o=i}r++}return{attrs:e,classes:t}}(e.selectors[0]);o&&df(n,t,o),i&&i.length>0&&EI(n,t,i.join(" "))}}(h,H,g,r),void 0!==t&&function nx(n,e,t){const r=n.projection=[];for(let o=0;o<e.length;o++){const i=t[o];r.push(null!=i?Array.from(i):null)}}(x,this.ngContentSelectors,t),b=function ex(n,e,t,r,o,i){const s=fe(),a=o[A],c=Et(s,o);pT(a,o,s,t,null,r);for(let u=0;u<t.length;u++)dt(ro(o,a,s.directiveStart+u,s),o);gT(a,o,s),c&&dt(c,o);const l=ro(o,a,s.directiveStart+s.componentOffset,s);if(n[Ee]=o[Ee]=l,null!==i)for(const u of i)u(l,e);return Fp(a,s,n),l}(Q3,H,me,Kr,C,[rx]),Jp(I,C,null)}finally{Nf()}return new Q0(this.componentType,b,ci(x,C),C,x)}}class Q0 extends EP{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Js(o,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const i=this._rootLView;zp(i[A],i,o,e,t),this.previousInputValues.set(e,t),Qs(Bt(this._tNode.index,i))}}get injector(){return new We(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function rx(){const n=fe();Uc(T()[A],n)}function VT(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];Array.isArray(o)&&o[2]&&(t[r]=o[2])}n.inputTransforms=t}function je(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Zp(n,e,t,r){const o=T();return je(o,Rn(),e)&&(te(),Nn(Se(),o,n,e,t,r)),Zp}function Ei(n,e,t){const r=T();return je(r,Rn(),e)&&function zt(n,e,t,r,o,i,s,a){const c=Et(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(zp(n,t,u,r,o),Zr(e)&&function o0(n,e){const t=Bt(e,n);16&t[U]||(t[U]|=64)}(t,e.index)):3&e.type&&(r=function r0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(c,r,o))}(te(),Se(),r,n,e,r[W],t,!1),Ei}function ng(n,e,t,r,o){const s=o?"class":"style";zp(n,t,e.inputs[s],s,r)}function Ti(n,e){return!e||null===e.firstChild||cl(n)}function aa(n,e,t,r=!0){const o=e[A];if(function NO(n,e,t,r){const o=Fe+r,i=t.length;r>0&&(t[o-1][sn]=e),r<i-Fe?(e[sn]=t[o],_E(t,Fe+r,e)):(t.push(e),e[sn]=null),e[Le]=t;const s=e[Ss];null!==s&&t!==s&&function kO(n,e){const t=n[Bo];e[be]!==e[Le][Le][be]&&(n[U]|=ff.HasTransplantedViews),null===t?n[Bo]=[e]:t.push(e)}(s,e);const a=e[_n];null!==a&&a.insertView(n),If(e),e[U]|=128}(o,e,n,t),r){const s=pp(t,n),a=e[W],c=fl(a,n[Sn]);null!==c&&function RO(n,e,t,r,o,i){r[ke]=o,r[at]=e,ml(n,r,t,1,o,i)}(o,n[at],a,e,c,s)}const i=e[an];null!==i&&null!==i.firstChild&&(i.firstChild=null)}let dn=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=pL}return n})();function pL(){return function Sw(n,e){let t;const r=e[n.index];return lt(r)?t=r:(t=yT(r,e,null,n),e[n.index]=t,Nl(e,t)),Aw(t,e,n,r),new ww(t,n,e)}(fe(),T())}const gL=dn,ww=class extends gL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ci(this._hostTNode,this._hostLView)}get injector(){return new We(this._hostTNode,this._hostLView)}get parentInjector(){const e=$c(this._hostTNode,this._hostLView);if(Pf(e)){const t=Ps(e,this._hostLView),r=Os(e);return new We(t[A].data[r+8],t)}return new We(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=_w(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,t,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(t||{},i,null);return this.insertImpl(a,o,Ti(this._hostTNode,null)),a}createComponent(e,t,r,o,i){const s=e&&!function xs(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const g=t||{};a=g.index,r=g.injector,o=g.projectableNodes,i=g.environmentInjector||g.ngModuleRef}const c=s?e:new Xs(Z(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const m=(s?l:this.parentInjector).get(Vt,null);m&&(i=m)}Z(c.componentType??{});const f=c.create(l,o,null,i);return this.insertImpl(f.hostView,a,Ti(this._hostTNode,null)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const o=e._lView;if(function BN(n){return lt(n[Le])}(o)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=o[Le],l=new ww(c,c[at],c[Le]);l.detach(l.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;return aa(s,o,i,r),e.attachToViewContainerRef(),_E(hg(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=_w(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=js(this._lContainer,t);r&&(qc(hg(this._lContainer),t),hl(r[A],r))}detach(e){const t=this._adjustIndex(e,-1),r=js(this._lContainer,t);return r&&null!=qc(hg(this._lContainer),t)?new Js(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _w(n){return n[8]}function hg(n){return n[8]||(n[8]=[])}let Aw=function bw(n,e,t,r){if(n[Sn])return;let o;o=8&t.type?Ie(r):function mL(n,e){const t=n[W],r=t.createComment(""),o=Et(e,n);return so(t,fl(t,o),r,function LO(n,e){return n.nextSibling(e)}(t,o),!1),r}(e,t),n[Sn]=o},fg=()=>!1;function ho(n,e,t,r,o,i,s,a){const c=T(),l=te(),u=n+q,d=l.firstCreatePass?function EL(n,e,t,r,o,i,s,a,c){const l=e.consts,u=li(e,n,4,s||null,Dn(l,a));jp(e,t,u,Dn(l,c)),Uc(e,u);const d=u.tView=Bp(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,r,o,i,s):l.data[u];bn(d,!1);const h=Rw(l,c,d,n);Fc()&&pl(l,c,h,d),dt(h,c);const f=yT(h,c,h,d);return c[u]=f,Nl(c,f),function Dw(n,e,t){return fg(n,e,t)}(f,d,c),xc(d)&&Up(l,c,d),null!=s&&Hp(c,d,a),ho}let Rw=function Mw(n,e,t,r){return Cr(!0),e[W].createComment("")};function Ae(n,e,t,r){const o=T(),i=te(),s=q+n,a=o[W],c=i.firstCreatePass?function lF(n,e,t,r,o,i){const s=e.consts,c=li(e,n,2,r,Dn(s,o));return jp(e,t,c,Dn(s,i)),null!==c.attrs&&xl(c,c.attrs,!1),null!==c.mergedAttrs&&xl(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,e,t,r):i.data[s],l=Xw(i,o,c,a,e,n);o[s]=l;const u=xc(c);return bn(c,!0),II(a,l,c),!!(32&~c.flags)&&Fc()&&pl(i,o,l,c),0===function VN(){return $.lFrame.elementDepthCount}()&&dt(l,o),function $N(){$.lFrame.elementDepthCount++}(),u&&(Up(i,o,c),Fp(i,c,o)),null!==r&&Hp(o,c),Ae}function ee(){let n=fe();Sf()?function Af(){$.lFrame.isParent=!1}():(n=n.parent,bn(n,!1));const e=n;(function zN(n){return $.skipHydrationRootTNode===n})(e)&&function YN(){$.skipHydrationRootTNode=null}(),function GN(){$.lFrame.elementDepthCount--}();const t=te();return t.firstCreatePass&&(Uc(t,n),pf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function uk(n){return!!(8&n.flags)}(e)&&ng(t,e,T(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function dk(n){return!!(16&n.flags)}(e)&&ng(t,e,T(),e.stylesWithoutHost,!1),ee}function Ri(n,e,t,r){return Ae(n,e,t,r),ee(),Ri}let Xw=(n,e,t,r,o,i)=>(Cr(!0),dl(r,o,function lE(){return $.lFrame.currentNamespace}()));function Ag(){return T()}const Ni="en-US";let s_=Ni;function Xl(n){return!!n&&"function"==typeof n.then}function N_(n){return!!n&&"function"==typeof n.subscribe}function ma(n,e,t,r){const o=T(),i=te(),s=fe();return function O_(n,e,t,r,o,i,s){const a=xc(r),l=n.firstCreatePass&&function ET(n){return n.cleanup||(n.cleanup=[])}(n),u=e[Ee],d=function CT(n){return n[Fo]||(n[Fo]=[])}(e);let h=!0;if(3&r.type||s){const m=Et(r,e),y=s?s(m):m,I=d.length,C=s?x=>s(Ie(x[r.index])):r.index;let b=null;if(!s&&a&&(b=function d1(n,e,t,r){const o=n.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===t&&o[i+1]===r){const a=e[Fo],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(n,e,o,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=i,b.__ngLastListenerFn__=i,h=!1;else{i=x_(r,e,u,i,!1);const x=t.listen(y,o,i);d.push(i,x),l&&l.push(o,C,I,I+1)}}else i=x_(r,e,u,i,!1);const f=r.outputs;let g;if(h&&null!==f&&(g=f[o])){const m=g.length;if(m)for(let y=0;y<m;y+=2){const H=e[g[y]][g[y+1]].subscribe(i),me=d.length;d.push(i,H),l&&l.push(o,r.index,me,-(me+1))}}}(i,o,o[W],s,n,e,r),ma}function P_(n,e,t,r){try{return An(6,e,t),!1!==t(r)}catch(o){return kl(n,o),!1}finally{An(7,e,t)}}function x_(n,e,t,r,o){return function i(s){if(s===Function)return r;Qs(n.componentOffset>-1?Bt(n.index,e):e);let c=P_(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)c=P_(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function Rg(n=1){return function tk(n){return($.lFrame.contextLView=function YC(n,e){for(;n>0;)e=e[Uo],n--;return e}(n,$.lFrame.contextLView))[Ee]}(n)}function se(n,e=""){const t=T(),r=te(),o=n+q,i=r.firstCreatePass?li(r,o,1,e,null):r.data[o],s=eS(r,t,i,e,n);t[o]=s,Fc()&&pl(r,t,s,i),bn(i,!1)}let eS=(n,e,t,r,o)=>(Cr(!0),function ul(n,e){return n.createText(e)}(e[W],r));function _t(n,e,t){const r=T(),o=function di(n,e,t,r){return je(n,Rn(),t)?e+z(t)+r:Y}(r,n,e,t);return o!==Y&&er(r,ut(),o),_t}class go{}class dS{}class xg extends go{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xT(this);const o=st(e);this._bootstrapComponents=Gt(o.bootstrap),this._r3Injector=BE(e,t,[{provide:go,useValue:this},{provide:Sl,useValue:this.componentFactoryResolver},...r],qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Lg extends dS{constructor(e){super(),this.moduleType=e}create(e){return new xg(this.moduleType,e,[])}}class hS extends go{constructor(e){super(),this.componentFactoryResolver=new xT(this),this.instance=null;const t=new ei([...e.providers,{provide:go,useValue:this},{provide:Sl,useValue:this.componentFactoryResolver}],e.parent||nl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Fg(n,e,t=null){return new hS({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let x1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=NE(0,t.type),o=r.length>0?Fg([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=N({token:n,providedIn:"environment",factory:()=>new n(M(Vt))})}return n})();function fS(n){ao("NgStandalone"),n.getStandaloneInjector=e=>e.get(x1).getOrCreateStandaloneInjector(n)}function IS(n,e,t){const r=function It(){const n=$.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}()+n,o=T();return o[r]===Y?function kn(n,e,t){return n[e]=t}(o,r,t?e.call(t):e()):function ea(n,e){return n[e]}(o,r)}Symbol;let tr=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=dU}return n})();const lU=tr,uU=class extends lU{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const o=function sa(n,e,t,r){const o=e.tView,a=Ml(n,o,t,4096&n[U]?4096:16,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null);a[Ss]=n[e.index];const l=n[_n];return null!==l&&(a[_n]=l.createEmbeddedView(o)),Jp(o,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:r});return new Js(o)}};function dU(){return function nu(n,e){return 4&n.type?new uU(e,n,ci(n,e)):null}(fe(),T())}let QS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();class jU{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let JS=(()=>{class n{compileModuleSync(t){return new Lg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),i=Gt(st(t).declarations).reduce((s,a)=>{const c=Z(a);return c&&s.push(new Xs(c)),s},[]);return new jU(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const nA=new R(""),su=new R("");let Zg,Qg=(()=>{class n{constructor(t,r,o){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zg||(function pH(n){Zg=n}(o),o.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:o})}whenStable(t,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(M(ce),M(Jg),M(su))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),Jg=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Zg?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Xg=new R("Application Initializer");let em=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=_(Xg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const i=o();if(Xl(i))t.push(i);else if(N_(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tm=new R("appBootstrapListener");function iA(n,e){return Array.isArray(e)?e.reduce(iA,n):{...n,...e}}let mo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(tT),this.afterRenderEffectManager=_(Zs),this.componentTypes=[],this.components=[],this.isStable=_(Pi).hasPendingTasks.pipe(re(t=>!t)),this._injector=_(Vt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const o=t instanceof HI;if(!this._injector.get(em).done)throw!o&&function yr(n){const e=Z(n)||Ke(n)||ot(n);return null!==e&&e.standalone}(t),new S(405,!1);let s;s=o?t:this._injector.get(Sl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function mH(n){return n.isBoundToModule}(s)?void 0:this._injector.get(go),l=s.create($t.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(nA,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),au(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{try{this.afterRenderEffectManager.execute()}catch(t){this.internalErrorHandler(t)}this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;au(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(tm,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>au(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function au(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let vH=(()=>{class n{constructor(){this.zone=_(ce),this.applicationRef=_(mo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CH(){const n=_(ce),e=_(Xn);return t=>n.runOutsideAngular(()=>e.handleError(t))}let IH=(()=>{class n{constructor(){this.subscription=new Rt,this.initialized=!1,this.zone=_(ce),this.pendingTasks=_(Pi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const nr=new R("LocaleId",{providedIn:"root",factory:()=>_(nr,X.Optional|X.SkipSelf)||function TH(){return typeof $localize<"u"&&$localize.locale||Ni}()}),nm=new R("PlatformDestroyListeners");let lA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const o=function $0(n="zone.js",e){return"noop"===n?new RT:"zone.js"===n?new ce(e):n}(r?.ngZone,function cA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function P1(n,e,t){return new xg(n,e,t)}(t.moduleType,this.injector,function aA(n){return[{provide:ce,useFactory:n},{provide:oo,multi:!0,useFactory:()=>{const e=_(vH,{optional:!0});return()=>e.initialize()}},{provide:oo,multi:!0,useFactory:()=>{const e=_(IH);return()=>{e.initialize()}}},{provide:tT,useFactory:CH}]}(()=>o)),s=i.injector.get(Xn,null);return o.runOutsideAngular(()=>{const a=o.onError.subscribe({next:c=>{s.handleError(c)}});i.onDestroy(()=>{au(this._modules,i),a.unsubscribe()})}),function oA(n,e,t){try{const r=t();return Xl(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,o,()=>{const a=i.injector.get(em);return a.runInitializers(),a.donePromise.then(()=>(function a_(n){Mt(n,"Expected localeId to be defined"),"string"==typeof n&&(s_=n.toLowerCase().replace(/_/g,"-"))}(i.injector.get(nr,Ni)||Ni),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,r=[]){const o=iA({},r);return function gH(n,e,t){const r=new Lg(t);return Promise.resolve(r)}(0,0,t).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(t){const r=t.injector.get(mo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new S(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(nm,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(M($t))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Nr=null;const uA=new R("AllowMultipleToken");function dA(n,e,t=[]){const r=`Platform: ${e}`,o=new R(r);return(i=[])=>{let s=rm();if(!s||s.injector.get(uA,!1)){const a=[...t,...i,{provide:o,useValue:!0}];n?n(a):function SH(n){if(Nr&&!Nr.get(uA,!1))throw new S(400,!1);(function rA(){!function kM(n){iC=n}(()=>{throw new S(600,!1)})})(),Nr=n;const e=n.get(lA);(function fA(n){n.get(VE,null)?.forEach(t=>t())})(n)}(function hA(n=[],e){return $t.create({name:e,providers:[{provide:Wf,useValue:"platform"},{provide:nm,useValue:new Set([()=>Nr=null])},...n]})}(a,r))}return function AH(n){const e=rm();if(!e)throw new S(401,!1);return e}()}}function rm(){return Nr?.get(lA)??null}const NH=dA(null,"core",[]);let kH=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(M(mo))};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({})}return n})();function hm(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let fm=null;function Li(){return fm}class aB{}const At=new R("DocumentToken");let pm=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(lB),providedIn:"platform"})}return n})();const cB=new R("Location Initialized");let lB=(()=>{class n extends pm{constructor(){super(),this._doc=_(At),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Li().getBaseHref(this._doc)}onPopState(t){const r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Li().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function gm(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function FA(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rr(n){return n&&"?"!==n[0]?"?"+n:n}let vo=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(HA),providedIn:"root"})}return n})();const UA=new R("appBaseHref");let HA=(()=>{class n extends vo{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gm(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){const s=this.prepareExternalUrl(o+rr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){const s=this.prepareExternalUrl(o+rr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(M(pm),M(UA,8))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uB=(()=>{class n extends vo{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=gm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+rr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(M(pm),M(UA,8))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})(),kr=(()=>{class n{constructor(t){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function fB(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(FA(BA(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rr(r))}normalize(t){return n.stripTrailingSlash(function hB(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,BA(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static#e=this.normalizeQueryParams=rr;static#t=this.joinWithSlash=gm;static#n=this.stripTrailingSlash=FA;static#r=this.\u0275fac=function(r){return new(r||n)(M(vo))};static#o=this.\u0275prov=N({token:n,factory:()=>function dB(){return new kr(M(vo))}(),providedIn:"root"})}return n})();function BA(n){return n.replace(/\/index.html$/,"")}function YA(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,i]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}let XA=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(F(dn),F(tr))};static#t=this.\u0275dir=vt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class tj{constructor(){this.$implicit=null,this.ngIf=null}}function eD(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${qe(e)}'.`)}let rD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({})}return n})();const oD="browser";function iD(n){return"server"===n}let Nj=(()=>{class n{static#e=this.\u0275prov=N({token:n,providedIn:"root",factory:()=>function Mj(n){return n===oD}(_(wr))?new kj(_(At),window):new Pj})}return n})();class kj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Oj(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}}class Pj{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class sD{}class rV extends aB{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class km extends rV{static makeCurrent(){!function sB(n){fm||(fm=n)}(new km)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oV(){return Aa=Aa||document.querySelector("base"),Aa?Aa.getAttribute("href"):null}();return null==t?null:function iV(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Aa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return YA(document.cookie,e)}}let Aa=null,aV=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const Om=new R("EventManagerPlugins");let uD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new S(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(M(Om),M(ce))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();class dD{constructor(e){this._doc=e}}const Pm="ng-app-id";let hD=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iD(i),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Pm}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){const o=this.styleRef;if(o.has(t)){const i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(Pm),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Pm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){const o=this.getStyleElement(t,r),i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(M(At),M(ol),M($E,8),M(wr))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const xm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lm=/%COMP%/g,dV=new R("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function pD(n,e){return e.map(t=>t.replace(Lm,n))}let gD=(()=>{class n{constructor(t,r,o,i,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=iD(a),this.defaultRenderer=new Fm(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===rn.ShadowDom&&(r={...r,encapsulation:rn.Emulated});const o=this.getOrCreateRenderer(t,r);return o instanceof yD?o.applyToHost(t):o instanceof Um&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case rn.Emulated:i=new yD(c,l,r,this.appId,u,s,a,d);break;case rn.ShadowDom:return new gV(c,l,t,r,s,a,this.nonce,d);default:i=new Um(c,l,r,u,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(M(uD),M(hD),M(ol),M(dV),M(At),M(wr),M(ce),M($E))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();class Fm{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new S(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const i=xm[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=xm[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Ar.DashCase|Ar.Important)?e.style.setProperty(t,r,o&Ar.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ar.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Li().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function mD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class gV extends Fm{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=pD(o.id,o.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Um extends Fm{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?pD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class yD extends Um{constructor(e,t,r,o,i,s,a,c){const l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=function hV(n){return"_ngcontent-%COMP%".replace(Lm,n)}(l),this.hostAttr=function fV(n){return"_nghost-%COMP%".replace(Lm,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let mV=(()=>{class n extends dD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||n)(M(At))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const vD=["alt","control","meta","shift"],yV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let CV=(()=>{class n extends dD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Li().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vD.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=yV[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),vD.forEach(s=>{s!==o&&(0,vV[s])(t)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(M(At))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const wV=dA(NH,"browser",[{provide:wr,useValue:oD},{provide:VE,useValue:function EV(){km.makeCurrent()},multi:!0},{provide:At,useFactory:function TV(){return function rO(n){ep=n}(document),document},deps:[]}]),_V=new R(""),ID=[{provide:su,useClass:class sV{addToWindow(e){Ce.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new S(5103,!1);return i},Ce.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ce.getAllAngularRootElements=()=>e.getAllRootElements(),Ce.frameworkStabilizers||(Ce.frameworkStabilizers=[]),Ce.frameworkStabilizers.push(r=>{const o=Ce.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(c){s=s||c,i--,0==i&&r(s)};o.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Li().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:nA,useClass:Qg,deps:[ce,Jg,su]},{provide:Qg,useClass:Qg,deps:[ce,Jg,su]}],TD=[{provide:Wf,useValue:"root"},{provide:Xn,useFactory:function IV(){return new Xn},deps:[]},{provide:Om,useClass:mV,multi:!0,deps:[At,ce,wr]},{provide:Om,useClass:CV,multi:!0,deps:[At]},gD,hD,uD,{provide:jI,useExisting:gD},{provide:sD,useClass:aV,deps:[]},[]];let SV=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ol,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(M(_V,12))};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({providers:[...TD,...ID],imports:[rD,kH]})}return n})(),wD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(M(At))};static#t=this.\u0275prov=N({token:n,factory:function(r){let o=null;return o=r?new r:function DV(){return new wD(M(At))}(),o},providedIn:"root"})}return n})();function Pr(n){return this instanceof Pr?(this.v=n,this):new Pr(n)}function MD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function $m(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}(a,c,(s=n[i](s)).done,s.value)})}}}typeof window<"u"&&window,"function"==typeof SuppressedError&&SuppressedError;const ND=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function kD(n){return _e(n?.then)}function OD(n){return _e(n[Wh])}function PD(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function xD(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const LD=function e$(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function FD(n){return _e(n?.[LD])}function UD(n){return function RD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=t.apply(n,e||[]),i=[];return o={},a("next"),a("throw"),a("return",function s(f){return function(g){return Promise.resolve(g).then(f,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(f,g){r[f]&&(o[f]=function(m){return new Promise(function(y,I){i.push([f,m,y,I])>1||c(f,m)})},g&&(o[f]=g(o[f])))}function c(f,g){try{!function l(f){f.value instanceof Pr?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}(r[f](g))}catch(m){h(i[0][3],m)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,g){f(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:o}=yield Pr(t.read());if(o)return yield Pr(void 0);yield yield Pr(r)}}finally{t.releaseLock()}})}function HD(n){return _e(n?.getReader)}function sr(n){if(n instanceof ze)return n;if(null!=n){if(OD(n))return function t$(n){return new ze(e=>{const t=n[Wh]();if(_e(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ND(n))return function n$(n){return new ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(kD(n))return function r$(n){return new ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,dC)})}(n);if(PD(n))return BD(n);if(FD(n))return function o$(n){return new ze(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(HD(n))return function i$(n){return BD(UD(n))}(n)}throw xD(n)}function BD(n){return new ze(e=>{(function s$(n,e){var t,r,o,i;return function DD(n,e,t,r){return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):function o(i){return i instanceof t?i:new t(function(s){s(i)})}(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=MD(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ar(n,e,t,r=0,o=!1){const i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function jD(n,e=0){return rt((t,r)=>{t.subscribe(et(r,o=>ar(r,n,()=>r.next(o),e),()=>ar(r,n,()=>r.complete(),e),o=>ar(r,n,()=>r.error(o),e)))})}function VD(n,e=0){return rt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $D(n,e){if(!n)throw new Error("Iterable cannot be null");return new ze(t=>{ar(t,e,()=>{const r=n[Symbol.asyncIterator]();ar(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function he(n,e){return e?function h$(n,e){if(null!=n){if(OD(n))return function a$(n,e){return sr(n).pipe(VD(e),jD(e))}(n,e);if(ND(n))return function l$(n,e){return new ze(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(kD(n))return function c$(n,e){return sr(n).pipe(VD(e),jD(e))}(n,e);if(PD(n))return $D(n,e);if(FD(n))return function u$(n,e){return new ze(t=>{let r;return ar(t,e,()=>{r=n[LD](),ar(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void t.error(s)}i?t.complete():t.next(o)},0,!0)}),()=>_e(r?.return)&&r.return()})}(n,e);if(HD(n))return function d$(n,e){return $D(UD(n),e)}(n,e)}throw xD(n)}(n,e):sr(n)}function Gm(n){return n[n.length-1]}function bu(n){return function f$(n){return n&&_e(n.schedule)}(Gm(n))?n.pop():void 0}function L(...n){return he(n,bu(n))}const{isArray:g$}=Array,{getPrototypeOf:m$,prototype:y$,keys:v$}=Object;const{isArray:I$}=Array;function zm(...n){const e=bu(n),t=function p$(n){return _e(Gm(n))?n.pop():void 0}(n),{args:r,keys:o}=function C$(n){if(1===n.length){const e=n[0];if(g$(e))return{args:e,keys:null};if(function E$(n){return n&&"object"==typeof n&&m$(n)===y$}(e)){const t=v$(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return he([],e);const i=new ze(function S$(n,e,t=Qr){return r=>{GD(e,()=>{const{length:o}=n,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)GD(e,()=>{const l=he(n[c],e);let u=!1;l.subscribe(et(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>function _$(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,s):Qr));return t?i.pipe(function w$(n){return re(e=>function T$(n,e){return I$(e)?n(...e):n(e)}(n,e))}(t)):i}function GD(n,e,t){n?ar(t,n,e):e()}const Ru=Hh(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ft(n,e,t=1/0){return _e(e)?ft((r,o)=>re((i,s)=>e(r,i,o,s))(sr(n(r,o))),t):("number"==typeof e&&(t=e),rt((r,o)=>function A$(n,e,t,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?g(m):c.push(m),g=m=>{i&&e.next(m),l++;let y=!1;sr(t(m,u++)).subscribe(et(e,I=>{o?.(I),i?f(I):e.next(I)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){const I=c.shift();s?ar(e,s,()=>g(I)):g(I)}h()}catch(I){e.error(I)}}))};return n.subscribe(et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,n,t)))}function Da(n=1/0){return ft(Qr,n)}function qm(...n){return function D$(){return Da(1)}()(he(n,bu(n)))}function zD(n){return new ze(e=>{sr(n()).subscribe(e)})}function Mu(n,e){const t=_e(n)?n:()=>n,r=o=>o.error(t());return new ze(e?o=>e.schedule(r,0,o):r)}const xn=new ze(n=>n.complete());function Km(){return rt((n,e)=>{let t=null;n._refCount++;const r=et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qD extends ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rt;const t=this.getSubject();e.add(this.source.subscribe(et(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rt.EMPTY)}return e}refCount(){return Km()(this)}}function pt(n,e){return rt((t,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();t.subscribe(et(r,c=>{o?.unsubscribe();let l=0;const u=i++;sr(n(c,u)).subscribe(o=et(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function cr(n){return n<=0?()=>xn:rt((e,t)=>{let r=0;e.subscribe(et(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Lt(n,e){return rt((t,r)=>{let o=0;t.subscribe(et(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Nu(n){return rt((e,t)=>{let r=!1;e.subscribe(et(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function KD(n=M$){return rt((e,t)=>{let r=!1;e.subscribe(et(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function M$(){return new Ru}function Co(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Lt((o,i)=>n(o,i,r)):Qr,cr(1),t?Nu(e):KD(()=>new Ru))}function xr(n,e){return _e(e)?ft(n,e,1):ft(n,1)}function gt(n,e,t){const r=_e(n)||e||t?{next:n,error:e,complete:t}:n;return r?rt((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(et(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Qr}function Lr(n){return rt((e,t)=>{let i,r=null,o=!1;r=e.subscribe(et(t,void 0,void 0,s=>{i=sr(n(s,Lr(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function Wm(n){return n<=0?()=>xn:rt((e,t)=>{let r=[];e.subscribe(et(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ba(n){return rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function WD(n){return rt((e,t)=>{sr(n).subscribe(et(t,()=>t.complete(),Vh)),!t.closed&&e.subscribe(t)})}const Q="primary",Ra=Symbol("RouteTitle");class x${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ui(n){return new x$(n)}function L$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=n[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ln(n,e){const t=n?Ym(n):void 0,r=e?Ym(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!YD(n[o],e[o]))return!1;return!0}function Ym(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function YD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}return n===e}function Fr(n){return function kV(n){return!!n&&(n instanceof ze||_e(n.lift)&&_e(n.subscribe))}(n)?n:Xl(n)?he(Promise.resolve(n)):L(n)}const U$={exact:function ZD(n,e,t){if(!Eo(n.segments,e.segments)||!ku(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ZD(n.children[r],e.children[r],t))return!1;return!0},subset:XD},QD={exact:function H$(n,e){return Ln(n,e)},subset:function B$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>YD(n[t],e[t]))},ignored:()=>!0};function JD(n,e,t){return U$[t.paths](n.root,e.root,t.matrixParams)&&QD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function XD(n,e,t){return eb(n,e,e.segments,t)}function eb(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Eo(o,t)||e.hasChildren()||!ku(o,t,r))}if(n.segments.length===t.length){if(!Eo(n.segments,t)||!ku(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!XD(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(Eo(n.segments,o)&&ku(n.segments,o,r)&&n.children[Q])&&eb(n.children[Q],e,i,r)}}function ku(n,e,t){return e.every((r,o)=>QD[t](n[o].parameters,r.parameters))}class Hi{constructor(e=new pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return $$.serialize(this)}}class pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ou(this)}}class Ma{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ui(this.parameters)),this._parameterMap}toString(){return rb(this)}}function Eo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bi=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>new Qm,providedIn:"root"})}return n})();class Qm{parse(e){const t=new e2(e);return new Hi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Na(e.root,!0)}`,r=function q$(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${Pu(t)}=${Pu(o)}`).join("&"):`${Pu(t)}=${Pu(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function G$(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $$=new Qm;function Ou(n){return n.segments.map(e=>rb(e)).join("/")}function Na(n,e){if(!n.hasChildren())return Ou(n);if(e){const t=n.children[Q]?Na(n.children[Q],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==Q&&r.push(`${o}:${Na(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function V$(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Q&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Q&&(t=t.concat(e(o,r)))}),t}(n,(r,o)=>o===Q?[Na(n.children[Q],!1)]:[`${o}:${Na(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Q]?`${Ou(n)}/${t[0]}`:`${Ou(n)}/(${t.join("//")})`}}function tb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pu(n){return tb(n).replace(/%3B/gi,";")}function Jm(n){return tb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xu(n){return decodeURIComponent(n)}function nb(n){return xu(n.replace(/\+/g,"%20"))}function rb(n){return`${Jm(n.path)}${function z$(n){return Object.entries(n).map(([e,t])=>`;${Jm(e)}=${Jm(t)}`).join("")}(n.parameters)}`}const K$=/^[^\/()?;#]+/;function Zm(n){const e=n.match(K$);return e?e[0]:""}const W$=/^[^\/()?;=#]+/,Q$=/^[^=?&#]+/,Z$=/^[^&#]+/;class e2{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Q]=new pe(e,t)),r}parseSegment(){const e=Zm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,!1);return this.capture(e),new Ma(xu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Y$(n){const e=n.match(W$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Zm(this.remaining);o&&(r=o,this.capture(r))}e[xu(t)]=xu(r)}parseQueryParam(e){const t=function J$(n){const e=n.match(Q$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function X$(n){const e=n.match(Z$);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=nb(t),i=nb(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zm(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new S(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Q);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[Q]:new pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,!1)}}function ob(n){return n.segments.length>0?new pe([],{[Q]:n}):n}function ib(n){const e={};for(const[r,o]of Object.entries(n.children)){const i=ib(o);if(r===Q&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function t2(n){if(1===n.numberOfChildren&&n.children[Q]){const e=n.children[Q];return new pe(n.segments.concat(e.segments),e.children)}return n}(new pe(n.segments,e))}function Io(n){return n instanceof Hi}function sb(n){let e;const o=ob(function t(i){const s={};for(const c of i.children){const l=t(c);s[c.outlet]=l}const a=new pe(i.url,s);return i===n&&(e=a),a}(n.root));return e??o}function ab(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(0===e.length)return Xm(o,o,o,t,r);const i=function r2(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lb(!0,0,n);let e=0,t=!1;const r=n.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new lb(t,e,r)}(e);if(i.toRoot())return Xm(o,o,new pe([],{}),t,r);const s=function o2(n,e,t){if(n.isAbsolute)return new Fu(e,!0,0);if(!t)return new Fu(e,!1,NaN);if(null===t.parent)return new Fu(t,!0,0);const r=Lu(n.commands[0])?0:1;return function i2(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new S(4005,!1);o=r.segments.length}return new Fu(r,!1,o-i)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(i,o,n),a=s.processChildren?Oa(s.segmentGroup,s.index,i.commands):ub(s.segmentGroup,s.index,i.commands);return Xm(o,s.segmentGroup,a,t,r)}function Lu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ka(n){return"object"==typeof n&&null!=n&&n.outlets}function Xm(n,e,t,r,o){let s,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:cb(n,e,t);const a=ob(ib(s));return new Hi(a,i,o)}function cb(n,e,t){const r={};return Object.entries(n.children).forEach(([o,i])=>{r[o]=i===e?t:cb(i,e,t)}),new pe(n.segments,r)}class lb{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Lu(r[0]))throw new S(4003,!1);const o=r.find(ka);if(o&&o!==r.at(-1))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ub(n,e,t){if(n||(n=new pe([],{})),0===n.segments.length&&n.hasChildren())return Oa(n,e,t);const r=function a2(n,e,t){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;const s=n.segments[o],a=t[r];if(ka(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!hb(c,l,s))return i;r+=2}else{if(!hb(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const i=new pe(n.segments.slice(0,r.pathIndex),{});return i.children[Q]=new pe(n.segments.slice(r.pathIndex),n.children),Oa(i,0,o)}return r.match&&0===o.length?new pe(n.segments,{}):r.match&&!n.hasChildren()?ey(n,e,t):r.match?Oa(n,0,o):ey(n,e,t)}function Oa(n,e,t){if(0===t.length)return new pe(n.segments,{});{const r=function s2(n){return ka(n[0])?n[0].outlets:{[Q]:n}}(t),o={};if(Object.keys(r).some(i=>i!==Q)&&n.children[Q]&&1===n.numberOfChildren&&0===n.children[Q].segments.length){const i=Oa(n.children[Q],e,t);return new pe(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=ub(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new pe(n.segments,o)}}function ey(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const i=t[o];if(ka(i)){const c=c2(i.outlets);return new pe(r,c)}if(0===o&&Lu(t[0])){r.push(new Ma(n.segments[e].path,db(t[0]))),o++;continue}const s=ka(i)?i.outlets[Q]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Lu(a)?(r.push(new Ma(s,db(a))),o+=2):(r.push(new Ma(s,{})),o++)}return new pe(r,{})}function c2(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ey(new pe([],{}),0,r))}),e}function db(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hb(n,e,t){return n==t.path&&Ln(e,t.parameters)}const Pa="imperative";class Fn{constructor(e,t){this.id=e,this.url=t}}class Uu extends Fn{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lr extends Fn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ji extends Fn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vi extends Fn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class Hu extends Fn{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fb extends Fn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class l2 extends Fn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u2 extends Fn{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class d2 extends Fn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h2 extends Fn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f2{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p2{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class g2{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m2{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y2{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v2{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ty{}class ny{constructor(e){this.url=e}}class C2{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new xa,this.attachRef=null}}let xa=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new C2,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ry(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ry(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=oy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return oy(e,this._root).map(t=>t.value)}}function ry(n,e){if(n===e.value)return e;for(const t of e.children){const r=ry(n,t);if(r)return r}return null}function oy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=oy(n,t);if(r.length)return r.unshift(e),r}return[]}class pn{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function $i(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class mb extends gb{constructor(e,t){super(e),this.snapshot=t,ay(this,e)}toString(){return this.snapshot.toString()}}function yb(n){const e=function E2(n){const i=new sy([],{},{},"",{},Q,n,null,{});return new vb("",new pn(i,[]))}(n),t=new Ut([new Ma("",{})]),r=new Ut({}),o=new Ut({}),i=new Ut({}),s=new Ut(""),a=new Gi(t,r,i,s,o,Q,n,e.root);return a.snapshot=e.root,new mb(new pn(a,[]),e)}class Gi{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(re(l=>l[Ra]))??L(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(re(e=>Ui(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(re(e=>Ui(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function iy(n,e,t="emptyOnly"){let r;const{routeConfig:o}=n;return r=null===e||"always"!==t&&""!==o?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...o?.data,...n._resolvedData}},o&&Eb(o)&&(r.resolve[Ra]=o.title),r}class sy{get title(){return this.data?.[Ra]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ui(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ui(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vb extends gb{constructor(e,t){super(t),this.url=e,ay(this,t)}toString(){return Cb(this._root)}}function ay(n,e){e.value._routerState=n,e.children.forEach(t=>ay(n,t))}function Cb(n){const e=n.children.length>0?` { ${n.children.map(Cb).join(", ")} } `:"";return`${n.value}${e}`}function cy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ln(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ln(e.params,t.params)||n.paramsSubject.next(t.params),function F$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ln(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ln(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ly(n,e){const t=Ln(n.params,e.params)&&function j$(n,e){return Eo(n,e)&&n.every((t,r)=>Ln(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ly(n.parent,e.parent))}function Eb(n){return"string"==typeof n.title||null===n.title}let uy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=_(xa),this.location=_(dn),this.changeDetector=_(Ol),this.environmentInjector=_(Vt),this.inputBinder=_(Bu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,!1);this._activatedRoute=t;const o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new I2(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=vt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[eo]})}return n})();class I2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Gi?this.route:e===xa?this.childContexts:this.parent.get(e,t)}}const Bu=new R("");let Ib=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,o=zm([r.queryParams,r.params,r.data]).pipe(pt(([i,s,a],c)=>(a={...i,...s,...a},0===c?L(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function iB(n){const e=Z(n);if(!e)return null;const t=new Xs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();function La(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function w2(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return La(n,r,o);return La(n,r)})}(n,e,t);return new pn(r,o)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>La(n,a)),s}}const r=function _2(n){return new Gi(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(i=>La(n,i));return new pn(r,o)}}const dy="ngNavigationCancelingError";function Tb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=wb(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function wb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[dy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _b(n){return n&&n[dy]}let Sb=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Lo({type:n,selectors:[["ng-component"]],standalone:!0,features:[fS],decls:1,vars:0,template:function(r,o){1&r&&Ri(0,"router-outlet")},dependencies:[uy],encapsulation:2})}return n})();function hy(n){const e=n.children&&n.children.map(hy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Q&&(t.component=Sb),t}function Un(n){return n.outlet||Q}function Fa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class k2{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=$i(t);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=$i(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=$i(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const o=$i(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new v2(i.value.snapshot))}),e.children.length&&this.forwardEvent(new m2(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,i=t?t.value:null;if(cy(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Fa(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class Ab{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ju{constructor(e,t){this.component=e,this.route=t}}function O2(n,e,t){const r=n._root;return Ua(r,e?e._root:null,t,[r.value])}function zi(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function nN(n){return null!==Ac(n)}(n)?e.get(n):n:r}function Ua(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=$i(e);return n.children.forEach(s=>{(function x2(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function L2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Eo(n.url,e.url)||!Ln(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ly(n,e)||!Ln(n.queryParams,e.queryParams);default:return!ly(n,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Ab(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ua(n,e,i.component?a?a.children:null:t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ju(a.outlet.component,s))}else s&&Ha(e,a,o),o.canActivateChecks.push(new Ab(r)),Ua(n,null,i.component?a?a.children:null:t,r,o)})(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>Ha(a,t.getContext(s),o)),o}function Ha(n,e,t){const r=$i(n),o=n.value;Object.entries(r).forEach(([i,s])=>{Ha(s,o.component?e?e.children.getContext(i):null:e,t)}),t.canDeactivateChecks.push(new ju(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Ba(n){return"function"==typeof n}function Db(n){return n instanceof Ru||"EmptyError"===n?.name}const Vu=Symbol("INITIAL_VALUE");function qi(){return pt(n=>zm(n.map(e=>e.pipe(cr(1),function R$(...n){const e=bu(n);return rt((t,r)=>{(e?qm(n,t,e):qm(n,t)).subscribe(r)})}(Vu)))).pipe(re(e=>{for(const t of e)if(!0!==t){if(t===Vu)return Vu;if(!1===t||t instanceof Hi)return t}return!0}),Lt(e=>e!==Vu),cr(1)))}function bb(n){return function GM(...n){return hC(n)}(gt(e=>{if(Io(e))throw Tb(0,e)}),re(e=>!0===e))}class fy{constructor(e){this.segmentGroup=e||null}}class py extends Error{constructor(e){super(),this.urlTree=e}}function Ki(n){return Mu(new fy(n))}class nG{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return L(r);if(o.numberOfChildren>1||!o.children[Q])return Mu(new S(4e3,!1));o=o.children[Q]}}applyRedirectCommands(e,t,r){const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new py(o);return o}applyRedirectCreateUrlTree(e,t,r,o){const i=this.createSegmentGroup(e,t.root,r,o);return new Hi(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){const i=this.createSegments(e,t.segments,r,o);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new pe(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new S(4001,!1);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}const gy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rG(n,e,t,r,o){const i=my(n,e,t);return i.matched?(r=function A2(n,e){return n.providers&&!n._injector&&(n._injector=Fg(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function X2(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?L(o.map(s=>{const a=zi(s,n);return Fr(function V2(n){return n&&Ba(n.canMatch)}(a)?a.canMatch(e,t):Er(n,()=>a(e,t)))})).pipe(qi(),bb()):L(!0)}(r,e,t).pipe(re(s=>!0===s?i:{...gy}))):L(i)}function my(n,e,t){if("**"===e.path)return function oG(n){return{matched:!0,parameters:n.at(-1)?.parameters??{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||L$)(t,n,e);if(!o)return{...gy};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Rb(n,e,t,r){return t.length>0&&function aG(n,e,t){return t.some(r=>$u(n,e,r)&&Un(r)!==Q)}(n,t,r)?{segmentGroup:new pe(e,sG(r,new pe(t,n.children))),slicedSegments:[]}:0===t.length&&function cG(n,e,t){return t.some(r=>$u(n,e,r))}(n,t,r)?{segmentGroup:new pe(n.segments,iG(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pe(n.segments,n.children),slicedSegments:t}}function iG(n,e,t,r){const o={};for(const i of t)if($u(n,e,i)&&!r[Un(i)]){const s=new pe([],{});o[Un(i)]=s}return{...r,...o}}function sG(n,e){const t={};t[Q]=e;for(const r of n)if(""===r.path&&Un(r)!==Q){const o=new pe([],{});t[Un(r)]=o}return t}function $u(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class dG{}class pG{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new nG(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new S(4002,`'${e.segmentGroup}'`)}recognize(){const e=Rb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(t=>{const r=new sy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),o=new pn(r,t),i=new vb("",o),s=function n2(n,e,t=null,r=null){return ab(sb(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root,null),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Q).pipe(Lr(r=>{if(r instanceof py)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fy?this.noMatchError(r):r}))}inheritParamsAndData(e,t){const r=e.value,o=iy(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o,!0).pipe(re(i=>i instanceof pn?[i]:[]))}processChildren(e,t,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return he(o).pipe(xr(i=>{const s=r.children[i],a=function M2(n,e){const t=n.filter(r=>Un(r)===e);return t.push(...n.filter(r=>Un(r)!==e)),t}(t,i);return this.processSegmentGroup(e,a,s,i)}),function k$(n,e){return rt(function N$(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(et(s,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),Nu(null),function O$(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Lt((o,i)=>n(o,i,r)):Qr,Wm(1),t?Nu(e):KD(()=>new Ru))}(),ft(i=>{if(null===i)return Ki(r);const s=Mb(i);return function gG(n){n.sort((e,t)=>e.value.outlet===Q?-1:t.value.outlet===Q?1:e.value.outlet.localeCompare(t.value.outlet))}(s),L(s)}))}processSegment(e,t,r,o,i,s){return he(t).pipe(xr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,o,i,s).pipe(Lr(c=>{if(c instanceof fy)return L(null);throw c}))),Co(a=>!!a),Lr(a=>{if(Db(a))return function uG(n,e,t){return 0===e.length&&!n.children[t]}(r,o,i)?L(new dG):Ki(r);throw a}))}processSegmentAgainstRoute(e,t,r,o,i,s,a){return function lG(n,e,t,r){return!!(Un(n)===r||r!==Q&&$u(e,t,n))&&my(e,n,t).matched}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,i,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s):Ki(o):Ki(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s){const{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=my(t,o,i);if(!a)return Ki(t);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,l);return this.applyRedirects.lineralizeSegments(o,d).pipe(ft(h=>this.processSegment(e,r,t,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,o,i){const s=rG(t,r,o,e);return"**"===r.path&&(t.children={}),s.pipe(pt(a=>a.matched?this.getChildConfig(e=r._injector??e,r,o).pipe(pt(({routes:c})=>{const l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new sy(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function yG(n){return n.data||{}}(r),Un(r),r.component??r._loadedComponent??null,r,function vG(n){return n.resolve||{}}(r)),{segmentGroup:g,slicedSegments:m}=Rb(t,u,d,c);if(0===m.length&&g.hasChildren())return this.processChildren(l,c,g).pipe(re(I=>null===I?null:new pn(f,I)));if(0===c.length&&0===m.length)return L(new pn(f,[]));const y=Un(r)===i;return this.processSegment(l,c,g,m,y?Q:i,!0).pipe(re(I=>new pn(f,I instanceof pn?[I]:[])))})):Ki(t)))}getChildConfig(e,t,r){return t.children?L({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?L({routes:t._loadedRoutes,injector:t._loadedInjector}):function Z2(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?L(!0):L(o.map(s=>{const a=zi(s,n);return Fr(function U2(n){return n&&Ba(n.canLoad)}(a)?a.canLoad(e,t):Er(n,()=>a(e,t)))})).pipe(qi(),bb())}(e,t,r).pipe(ft(o=>o?this.configLoader.loadChildren(e,t).pipe(gt(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function tG(n){return Mu(wb(!1,3))}())):L({routes:[],injector:e})}}function mG(n){const e=n.value.routeConfig;return e&&""===e.path}function Mb(n){const e=[],t=new Set;for(const r of n){if(!mG(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Mb(r.children);e.push(new pn(r.value,o))}return e.filter(r=>!t.has(r))}function Nb(n){const e=n.children.map(t=>Nb(t)).flat();return[n,...e]}function yy(n){return pt(e=>{const t=n(e);return t?he(t).pipe(re(()=>e)):L(e)})}let kb=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Q);return r}getResolvedTitleForRoute(t){return t.data[Ra]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(_G),providedIn:"root"})}return n})(),_G=(()=>{class n extends kb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(M(wD))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Wi=new R("",{providedIn:"root",factory:()=>({})}),Yi=new R("ROUTES");let vy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(JS)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return L(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fr(t.loadComponent()).pipe(re(Ob),gt(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),ba(()=>{this.componentLoaders.delete(t)})),o=new qD(r,()=>new Ft).pipe(Km());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function SG(n,e,t,r){return Fr(n.loadChildren()).pipe(re(Ob),ft(o=>o instanceof dS||Array.isArray(o)?L(o):he(e.compileModuleAsync(o))),re(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(t).injector,s=i.get(Yi,[],{optional:!0,self:!0}).flat()),{routes:s.map(hy),injector:i}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ba(()=>{this.childrenLoaders.delete(r)})),s=new qD(i,()=>new Ft).pipe(Km());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ob(n){return function AG(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Cy=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(DG),providedIn:"root"})}return n})(),DG=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Pb=new R(""),xb=new R("");function bG(n,e,t){const r=n.get(xb),o=n.get(At);return n.get(ce).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let i;const s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),function RG(n){return new Promise(e=>{kT(e,{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&Er(n,()=>c({transition:a,from:e,to:t})),s})}let Gu=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ft,this.transitionAbortSubject=new Ft,this.configLoader=_(vy),this.environmentInjector=_(Vt),this.urlSerializer=_(Bi),this.rootContexts=_(xa),this.location=_(kr),this.inputBindingEnabled=null!==_(Bu,{optional:!0}),this.titleStrategy=_(kb),this.options=_(Wi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(Cy),this.createViewTransition=_(Pb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new p2(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new f2(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,o){return this.transitions=new Ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lt(i=>0!==i.id),re(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pt(i=>{this.currentTransition=i;let s=!1,a=!1;return L(i).pipe(gt(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pt(c=>{const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const d="";return this.events.next(new Vi(c.id,this.urlSerializer.serialize(c.rawUrl),d,0)),c.resolve(null),xn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return L(c).pipe(pt(d=>{const h=this.transitions?.getValue();return this.events.next(new Uu(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?xn:Promise.resolve(d)}),function CG(n,e,t,r,o,i){return ft(s=>function hG(n,e,t,r,o,i,s="emptyOnly"){return new pG(n,e,t,r,o,s,i).recognize()}(n,e,t,r,s.extractedUrl,o,i).pipe(re(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new fb(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:g,extras:m}=c,y=new Uu(d,this.urlSerializer.serialize(h),f,g);this.events.next(y);const I=yb(this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:I,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,L(i)}{const d="";return this.events.next(new Vi(c.id,this.urlSerializer.serialize(c.extractedUrl),d,1)),c.resolve(null),xn}}),gt(c=>{const l=new l2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),re(c=>(this.currentTransition=i={...c,guards:O2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function G2(n,e){return ft(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return 0===s.length&&0===i.length?L({...t,guardsResult:!0}):function z2(n,e,t,r){return he(n).pipe(ft(o=>function J2(n,e,t,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?L(i.map(a=>{const c=Fa(e)??o,l=zi(a,c);return Fr(function j2(n){return n&&Ba(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):Er(c,()=>l(n,e,t,r))).pipe(Co())})).pipe(qi()):L(!0)}(o.component,o.route,t,e,r)),Co(o=>!0!==o,!0))}(s,r,o,n).pipe(ft(a=>a&&function F2(n){return"boolean"==typeof n}(a)?function q2(n,e,t,r){return he(e).pipe(xr(o=>qm(function W2(n,e){return null!==n&&e&&e(new g2(n)),L(!0)}(o.route.parent,r),function K2(n,e){return null!==n&&e&&e(new y2(n)),L(!0)}(o.route,r),function Q2(n,e,t){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function P2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>zD(()=>L(s.guards.map(c=>{const l=Fa(s.node)??t,u=zi(c,l);return Fr(function B2(n){return n&&Ba(n.canActivateChild)}(u)?u.canActivateChild(r,n):Er(l,()=>u(r,n))).pipe(Co())})).pipe(qi())));return L(i).pipe(qi())}(n,o.path,t),function Y2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return L(!0);const o=r.map(i=>zD(()=>{const s=Fa(e)??t,a=zi(i,s);return Fr(function H2(n){return n&&Ba(n.canActivate)}(a)?a.canActivate(e,n):Er(s,()=>a(e,n))).pipe(Co())}));return L(o).pipe(qi())}(n,o.route,t))),Co(o=>!0!==o,!0))}(r,i,n,e):L(a)),re(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),gt(c=>{if(i.guardsResult=c.guardsResult,Io(c.guardsResult))throw Tb(0,c.guardsResult);const l=new u2(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Lt(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),yy(c=>{if(c.guards.canActivateChecks.length)return L(c).pipe(gt(l=>{const u=new d2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),pt(l=>{let u=!1;return L(l).pipe(function EG(n,e){return ft(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return L(t);const i=new Set(o.map(c=>c.route)),s=new Set;for(const c of i)if(!s.has(c))for(const l of Nb(c))s.add(l);let a=0;return he(s).pipe(xr(c=>i.has(c)?function IG(n,e,t,r){const o=n.routeConfig,i=n._resolve;return void 0!==o?.title&&!Eb(o)&&(i[Ra]=o.title),function TG(n,e,t,r){const o=Ym(n);if(0===o.length)return L({});const i={};return he(o).pipe(ft(s=>function wG(n,e,t,r){const o=Fa(e)??r,i=zi(n,o);return Fr(i.resolve?i.resolve(e,t):Er(o,()=>i(e,t)))}(n[s],e,t,r).pipe(Co(),gt(a=>{i[s]=a}))),Wm(1),function P$(n){return re(()=>n)}(i),Lr(s=>Db(s)?xn:Mu(s)))}(i,n,e,r).pipe(re(s=>(n._resolvedData=s,n.data=iy(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=iy(c,c.parent,n).resolve,L(void 0))),gt(()=>a++),Wm(1),ft(c=>a===s.size?L(t):xn))})}(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),gt(l=>{const u=new h2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),yy(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(gt(h=>{u.component=h}),re(()=>{})));for(const h of u.children)d.push(...l(h));return d};return zm(l(c.targetSnapshot.root)).pipe(Nu(null),cr(1))}),yy(()=>this.afterPreactivation()),pt(()=>{const{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?he(u).pipe(re(()=>i)):L(i)}),re(c=>{const l=function T2(n,e,t){const r=La(n,e._root,t?t._root:void 0);return new mb(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,i}),gt(()=>{this.events.next(new ty)}),((n,e,t,r)=>re(o=>(new k2(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),cr(1),gt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),WD(this.transitionAbortSubject.pipe(gt(c=>{throw c}))),ba(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Lr(c=>{if(a=!0,_b(c))this.events.next(new ji(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function S2(n){return _b(n)&&Io(n.url)}(c)?this.events.next(new ny(c.url)):i.resolve(!1);else{this.events.next(new Hu(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(t.errorHandler(c))}catch(l){i.reject(l)}}return xn}))}))}cancelNavigationTransition(t,r,o){const i=new ji(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MG(n){return n!==Pa}let NG=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(OG),providedIn:"root"})}return n})();class kG{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let OG=(()=>{class n extends kG{static#e=this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Uf(n)))(o||n)}})();static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lb=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:()=>_(PG),providedIn:"root"})}return n})(),PG=(()=>{class n extends Lb{constructor(){super(...arguments),this.location=_(kr),this.urlSerializer=_(Bi),this.options=_(Wi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(Cy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=yb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Uu)this.stateMemento=this.createStateMemento();else if(t instanceof Vi)this.rawUrlTree=r.initialUrl;else if(t instanceof fb){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else t instanceof ty?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof ji&&(3===t.code||2===t.code)?this.restoreHistory(r):t instanceof Hu?this.restoreHistory(r,!0):t instanceof lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===t.finalUrl&&0===i&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Uf(n)))(o||n)}})();static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ja=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ja||{});function Fb(n,e){n.events.pipe(Lt(t=>t instanceof lr||t instanceof ji||t instanceof Hu||t instanceof Vi),re(t=>t instanceof lr||t instanceof Vi?ja.COMPLETE:t instanceof ji&&(0===t.code||1===t.code)?ja.REDIRECTING:ja.FAILED),Lt(t=>t!==ja.REDIRECTING),cr(1)).subscribe(()=>{e()})}function xG(n){throw n}const LG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let en=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=_(QS),this.stateManager=_(Lb),this.options=_(Wi,{optional:!0})||{},this.pendingTasks=_(Pi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(Gu),this.urlSerializer=_(Bi),this.location=_(kr),this.urlHandlingStrategy=_(Cy),this._events=new Ft,this.errorHandler=this.options.errorHandler||xG,this.navigated=!1,this.routeReuseStrategy=_(NG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(Yi,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(Bu,{optional:!0}),this.eventsSubscription=new Rt,this.isNgZoneEnabled=_(ce)instanceof ce&&ce.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(null!==o&&null!==i)if(this.stateManager.handleRouterEvent(r,i),r instanceof ji&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof lr)this.navigated=!0;else if(r instanceof ny){const s=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),a={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||MG(o.source)};this.scheduleNavigation(s,Pa,null,a,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function HG(n){return!(n instanceof ty||n instanceof ny)})(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)}))}navigateToSyncWithBrowser(t,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=sb(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return ab(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Io(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Pa,null,r)}navigate(t,r={skipLocationChange:!1}){return function UG(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new S(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(o=!0===r?{...LG}:!1===r?{...FG}:r,Io(t))return JD(this.currentUrlTree,t,o);const i=this.parseUrl(t);return JD(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(null!=i&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return Fb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zu=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Ft,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof lr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,i,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function PI(n,e,t){return function dP(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?OI:kI}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(F(en),F(Gi),function zc(n){return function gk(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let o=0;for(;o<r;){const i=t[o];if(DC(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof t[o];)o++;else{if(i===e)return t[o+1];o+=2}}}return null}(fe(),n)}("tabindex"),F(Al),F(br),F(vo))};static#t=this.\u0275dir=vt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&ma("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Zp("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",hm],skipLocationChange:["skipLocationChange","skipLocationChange",hm],replaceUrl:["replaceUrl","replaceUrl",hm],routerLink:"routerLink"},standalone:!0,features:[VT,eo]})}return n})();class Ub{}let VG=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Lt(t=>t instanceof lr),xr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Fg(i.providers,t,`Route: ${i.path}`));const s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return he(o).pipe(Da())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):L(null);const i=o.pipe(ft(s=>null===s?L(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?he([i,this.loader.loadComponent(r)]).pipe(Da()):i})}static#e=this.\u0275fac=function(r){return new(r||n)(M(en),M(JS),M(Vt),M(Ub),M(vy))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ey=new R("");let Hb=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Uu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Vi&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function cT(){throw new Error("invalid")}()};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();function Hn(n,e){return{\u0275kind:n,\u0275providers:e}}function jb(){const n=_($t);return e=>{const t=n.get(mo);if(e!==t.components[0])return;const r=n.get(en),o=n.get(Vb);1===n.get(Iy)&&r.initialNavigation(),n.get($b,null,X.Optional)?.setUpPreloading(),n.get(Ey,null,X.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const Vb=new R("",{factory:()=>new Ft}),Iy=new R("",{providedIn:"root",factory:()=>1}),$b=new R("");function qG(n){return Hn(0,[{provide:$b,useExisting:VG},{provide:Ub,useExisting:n}])}function WG(n){return Hn(9,[{provide:Pb,useValue:bG},{provide:xb,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const Gb=new R("ROUTER_FORROOT_GUARD"),YG=[kr,{provide:Bi,useClass:Qm},en,xa,{provide:Gi,useFactory:function Bb(n){return n.routerState.root},deps:[en]},vy,[]];let zb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[YG,[],{provide:Yi,multi:!0,useValue:t},{provide:Gb,useFactory:XG,deps:[[en,new Yc,new Qc]]},{provide:Wi,useValue:r||{}},r?.useHash?{provide:vo,useClass:uB}:{provide:vo,useClass:HA},{provide:Ey,useFactory:()=>{const n=_(Nj),e=_(ce),t=_(Wi),r=_(Gu),o=_(Bi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Hb(o,r,n,e,t)}},r?.preloadingStrategy?qG(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?ez(r):[],r?.bindToComponentInputs?Hn(8,[Ib,{provide:Bu,useExisting:Ib}]).\u0275providers:[],r?.enableViewTransitions?WG().\u0275providers:[],[{provide:qb,useFactory:jb},{provide:tm,multi:!0,useExisting:qb}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Yi,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(M(Gb,8))};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({})}return n})();function XG(n){return"guarded"}function ez(n){return["disabled"===n.initialNavigation?Hn(3,[{provide:Xg,multi:!0,useFactory:()=>{const e=_(en);return()=>{e.setUpLocationChangeListener()}}},{provide:Iy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Hn(2,[{provide:Iy,useValue:0},{provide:Xg,multi:!0,deps:[$t],useFactory:e=>{const t=e.get(cB,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(en),i=e.get(Vb);Fb(o,()=>{r(!0)}),e.get(Gu).afterPreactivation=()=>(r(!0),i.closed?L(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const qb=new R("");function Kb(n,e,t,r,o,i,s){try{var a=n[i](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(r,o)}function v(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(c){Kb(i,r,o,s,a,"next",c)}function a(c){Kb(i,r,o,s,a,"throw",c)}s(void 0)})}}class qu{}class Ku{}class tn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),i=o.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof tn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new tn;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof tn?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nz{encodeKey(e){return Wb(e)}encodeValue(e){return Wb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const oz=/%(\d[a-f0-9])/gi,iz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Wb(n){return encodeURIComponent(n).replace(oz,(e,t)=>iz[t]??e)}function Wu(n){return`${n}`}class Ur{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nz,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rz(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(Wu):[Wu(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ur({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Wu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Wu(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sz{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Yb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Qb(n){return typeof Blob<"u"&&n instanceof Blob}function Jb(n){return typeof FormData<"u"&&n instanceof FormData}class Va{constructor(e,t,r,o){let i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function az(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers||(this.headers=new tn),this.context||(this.context=new sz),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Ur,this.urlWithParams=t}serializeBody(){return null===this.body?null:Yb(this.body)||Qb(this.body)||Jb(this.body)||function cz(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ur?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Jb(this.body)?null:Qb(this.body)?this.body.type||null:Yb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ur?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,l=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new Va(t,r,i,{params:l,headers:c,context:u,reportProgress:a,responseType:o,withCredentials:s})}}var Hr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Hr||{});class Ty{constructor(e,t=200,r="OK"){this.headers=e.headers||new tn,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Yu extends Ty{constructor(e={}){super(e),this.type=Hr.ResponseHeader}clone(e={}){return new Yu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class To extends Ty{constructor(e={}){super(e),this.type=Hr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new To({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qi extends Ty{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function wy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Zb=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof Va)i=t;else{let c,l;c=o.headers instanceof tn?o.headers:new tn(o.headers),o.params&&(l=o.params instanceof Ur?o.params:new Ur({fromObject:o.params})),i=new Va(t,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}const s=L(i).pipe(xr(c=>this.handler.handle(c)));if(t instanceof Va||"events"===o.observe)return s;const a=s.pipe(Lt(c=>c instanceof To));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(re(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(re(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(re(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(re(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ur).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,wy(o,r))}post(t,r,o={}){return this.request("POST",t,wy(o,r))}put(t,r,o={}){return this.request("PUT",t,wy(o,r))}static#e=this.\u0275fac=function(r){return new(r||n)(M(qu))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();function eR(n,e){return e(n)}function fz(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const tR=new R(""),$a=new R(""),nR=new R(""),rR=new R("");function gz(){let n=null;return(e,t)=>{null===n&&(n=(_(tR,{optional:!0})??[]).reduceRight(fz,eR));const r=_(Pi),o=r.add();return n(e,t).pipe(ba(()=>r.remove(o)))}}let oR=(()=>{class n extends qu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=_(Pi);const o=_(rR,{optional:!0});this.backend=o??t}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get($a),...this.injector.get(nR,[])]));this.chain=o.reduceRight((i,s)=>function pz(n,e,t){return(r,o)=>Er(t,()=>e(r,i=>n(i,o)))}(i,s,this.injector),eR)}const r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(ba(()=>this.pendingTasks.remove(r)))}static#e=this.\u0275fac=function(r){return new(r||n)(M(Ku),M(Vt))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const Ez=/^\)\]\}',?\n/;let sR=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new S(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?he(r.\u0275loadImpl()):L(null)).pipe(pt(()=>new ze(i=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((m,y)=>s.setRequestHeader(m,y.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const m=t.detectContentTypeHeader();null!==m&&s.setRequestHeader("Content-Type",m)}if(t.responseType){const m=t.responseType.toLowerCase();s.responseType="json"!==m?m:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=s.statusText||"OK",y=new tn(s.getAllResponseHeaders()),I=function Iz(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new Yu({headers:y,status:s.status,statusText:m,url:I}),c},u=()=>{let{headers:m,status:y,statusText:I,url:C}=l(),b=null;204!==y&&(b=typeof s.response>"u"?s.responseText:s.response),0===y&&(y=b?200:0);let x=y>=200&&y<300;if("json"===t.responseType&&"string"==typeof b){const H=b;b=b.replace(Ez,"");try{b=""!==b?JSON.parse(b):null}catch(me){b=H,x&&(x=!1,b={error:me,text:b})}}x?(i.next(new To({body:b,headers:m,status:y,statusText:I,url:C||void 0})),i.complete()):i.error(new Qi({error:b,headers:m,status:y,statusText:I,url:C||void 0}))},d=m=>{const{url:y}=l(),I=new Qi({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});i.error(I)};let h=!1;const f=m=>{h||(i.next(l()),h=!0);let y={type:Hr.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),"text"===t.responseType&&s.responseText&&(y.partialText=s.responseText),i.next(y)},g=m=>{let y={type:Hr.UploadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),i.next(y)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",f),null!==a&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),i.next({type:Hr.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",f),null!==a&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(M(sD))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();const Ay=new R("XSRF_ENABLED"),aR=new R("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),cR=new R("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class lR{}let _z=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=YA(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(M(At),M(wr),M(aR))};static#t=this.\u0275prov=N({token:n,factory:n.\u0275fac})}return n})();function Sz(n,e){const t=n.url.toLowerCase();if(!_(Ay)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=_(lR).getToken(),o=_(cR);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Br=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Br||{});function Az(...n){const e=[Zb,sR,oR,{provide:qu,useExisting:oR},{provide:Ku,useExisting:sR},{provide:$a,useValue:Sz,multi:!0},{provide:Ay,useValue:!0},{provide:lR,useClass:_z}];for(const t of n)e.push(...t.\u0275providers);return function Xc(n){return{\u0275providers:n}}(e)}const uR=new R("LEGACY_INTERCEPTOR_FN");function Dz(){return function wo(n,e){return{\u0275kind:n,\u0275providers:e}}(Br.LegacyInterceptors,[{provide:uR,useFactory:gz},{provide:$a,useExisting:uR,multi:!0}])}let bz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({providers:[Az(Dz())]})}return n})(),Pz=(()=>{class n{constructor(t){this.http=t}ngOnInit(){this.http.get("https://graph.microsoft.com/v1.0/me").subscribe(t=>{this.profile=t}),this.tokenExpiration=localStorage.getItem("tokenExpiration")}static#e=this.\u0275fac=function(r){return new(r||n)(F(Zb))};static#t=this.\u0275cmp=Lo({type:n,selectors:[["app-profile"]],decls:55,vars:12,consts:[[1,"profile"]],template:function(r,o){1&r&&(Ae(0,"div",0)(1,"p")(2,"strong"),se(3,"Business Phones:"),ee(),se(4),ee(),Ae(5,"p")(6,"strong"),se(7,"Display Name:"),ee(),se(8),ee(),Ae(9,"p")(10,"strong"),se(11,"Given Name:"),ee(),se(12),ee(),Ae(13,"p")(14,"strong"),se(15,"Job Title:"),ee(),se(16),ee(),Ae(17,"p")(18,"strong"),se(19,"Mail:"),ee(),se(20),ee(),Ae(21,"p")(22,"strong"),se(23,"Mobile Phone:"),ee(),se(24),ee(),Ae(25,"p")(26,"strong"),se(27,"Office Location:"),ee(),se(28),ee(),Ae(29,"p")(30,"strong"),se(31,"Preferred Language:"),ee(),se(32),ee(),Ae(33,"p")(34,"strong"),se(35,"Surname:"),ee(),se(36),ee(),Ae(37,"p")(38,"strong"),se(39,"User Principal Name:"),ee(),se(40),ee(),Ae(41,"p")(42,"strong"),se(43,"Profile Id:"),ee(),se(44),ee(),Ri(45,"br")(46,"br"),Ae(47,"p")(48,"strong"),se(49,"Token Expiration:"),ee(),se(50),ee(),Ri(51,"br")(52,"br"),Ae(53,"p"),se(54,"Refreshing this page will continue to use the cached access token until it nears expiration, at which point a new access token will be requested."),ee()()),2&r&&(ht(4),_t(" ",null==o.profile?null:o.profile.businessPhones,""),ht(4),_t(" ",null==o.profile?null:o.profile.displayName,""),ht(4),_t(" ",null==o.profile?null:o.profile.givenName,""),ht(4),_t(" ",null==o.profile?null:o.profile.jobTitle,""),ht(4),_t(" ",null==o.profile?null:o.profile.mail,""),ht(4),_t(" ",null==o.profile?null:o.profile.mobilePhone,""),ht(4),_t(" ",null==o.profile?null:o.profile.officeLocation,""),ht(4),_t(" ",null==o.profile?null:o.profile.preferredLanguage,""),ht(4),_t(" ",null==o.profile?null:o.profile.surname,""),ht(4),_t(" ",null==o.profile?null:o.profile.userPrincipalName,""),ht(4),_t(" ",null==o.profile?null:o.profile.id,""),ht(6),_t(" ",o.tokenExpiration,""))},encapsulation:2})}return n})();const E={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ji=[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE],yR=[...Ji,E.EMAIL_SCOPE],tt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},nt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},vR={PLAIN:"plain",S256:"S256"},Ga={QUERY:"query",FRAGMENT:"fragment"},xz={...Ga,FORM_POST:"form_post"},mt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},V={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Dy="appmetadata",it={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ge={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},bt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Xi_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836";var k=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(k||{});const wR={scopes:Ji},_R="jwk",Ry="msal.db",jz=`${Ry}.keys`,Vz=[0,5,4];class zz{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===k.Redirect||e.interactionType===k.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(t&&"ssoSilent"!==t)break;return"none";case"msal:logoutEnd":if(t&&"logout"!==t)break;return"none";case"msal:handleRedirectEnd":if(t&&"handleRedirect"!==t)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===k.Redirect||e.interactionType===k.Popup){if(t&&"login"!==t&&"acquireToken"!==t)break;return"none"}}return null}}const Ka="unexpected_error",rd={[Ka]:"Unexpected error in authentication.",post_request_failed:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Pe extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,Pe.prototype),this.errorCode=e||E.EMPTY_STRING,this.errorMessage=t||E.EMPTY_STRING,this.subError=r||E.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function SR(n,e){return new Pe(n,e?`${rd[n]} ${e}`:rd[n])}const od="storage_not_supported",id="in_mem_redirect_unavailable",sd={[od]:"Given storage configuration option was not supported.",stubbed_public_client_application_called:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[id]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Wa extends Pe{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Wa.prototype)}}function AR(n){return new Wa(n,sd[n])}const ad="redirect_uri_empty",cd="authority_uri_insecure",So="url_parse_error",ld="empty_url_error",ud="empty_input_scopes_error",dd="invalid_prompt_value",Ya="invalid_claims",hd="token_request_empty",fd="logout_request_empty",pd="invalid_code_challenge_method",Qa="pkce_params_missing",Ja="invalid_cloud_discovery_metadata",gd="invalid_authority_metadata",md="untrusted_authority",es="missing_ssh_jwk",yd="missing_ssh_kid",vd="cannot_set_OIDCOptions",Cd="cannot_allow_native_broker",Ed="authority_mismatch",Re={[ad]:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[cd]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[So]:"URL could not be parsed into appropriate segments.",[ld]:"URL was empty or null.",[ud]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[dd]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Ya]:"Given claims parameter must be a stringified JSON object.",[hd]:"Token request was empty and not found in cache.",[fd]:"The logout request was null or undefined.",[pd]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Qa]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Ja]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[gd]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[md]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[es]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[yd]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",[vd]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Cd]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Ed]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class xy extends Pe{constructor(e){super(e,Re[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,xy.prototype)}}function ve(n){return new xy(n)}class nn{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch{}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}const Za="client_info_decoding_error",Id="client_info_empty_error",Xa="token_parsing_error",Td="null_or_empty_token",gn="endpoints_resolution_error",wd="network_error",_d="openid_config_error",Sd="hash_not_deserialized",Gr="invalid_state",Ad="state_mismatch",ts="state_not_found",Dd="nonce_mismatch",ec="auth_time_not_found",bd="max_age_transpired",Rd="multiple_matching_appMetadata",Md="request_cannot_be_made",Nd="cannot_remove_empty_scope",kd="cannot_append_scopeset",tc="empty_input_scopeset",nc="no_account_in_silent_request",Od="invalid_cache_record",rc="invalid_cache_environment",oc="no_account_found",ic="no_crypto_object",sc="unexpected_credential_type",mn="token_refresh_required",Pd="token_claims_cnf_required_for_signedjwt",xd="authorization_code_missing_from_server_response",Ld="binding_key_not_removed",Fd="end_session_endpoint_not_supported",ac="key_id_missing",J="method_not_implemented",K={[Za]:"The client info could not be parsed/decoded correctly",[Id]:"The client info was empty",[Xa]:"Token cannot be parsed",[Td]:"The token is null or empty",[gn]:"Endpoints cannot be resolved",[wd]:"Network request failed",[_d]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Sd]:"The hash parameters could not be deserialized",[Gr]:"State was not the expected format",[Ad]:"State mismatch error",[ts]:"State not found",[Dd]:"Nonce mismatch error",[ec]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[bd]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Rd]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Md]:"Token request cannot be made without authorization code or refresh token.",[Nd]:"Cannot remove null or empty scope from ScopeSet",[kd]:"Cannot append ScopeSet",[tc]:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",[nc]:"Please pass an account object, silent flow is not supported without account information",[Od]:"Cache record object was null or undefined.",[rc]:"Invalid environment when attempting to create cache entry",[oc]:"No account found in cache for given key.",[ic]:"No crypto object detected.",[sc]:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[mn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",[Pd]:"Cannot generate a POP jwt if the token_claims are not populated",[xd]:"Server response does not contain an authorization code to proceed",[Ld]:"Could not remove the credential's binding key from storage.",[Fd]:"The provided authority does not support logout",[ac]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[J]:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled"};class Ud extends Pe{constructor(e,t){super(e,t?`${K[e]}: ${t}`:K[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ud.prototype)}}function w(n,e){return new Ud(n,e)}function DR(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Hd(n){if(!n||n.indexOf("=")<0)return null;try{const e=DR(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw w(Sd)}return null}class oe{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ve(ld);e.includes("#")||(this._urlString=oe.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return nn.endsWith(t,"?")?t=t.slice(0,-1):nn.endsWith(t,"?/")&&(t=t.slice(0,-2)),nn.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ve(So)}if(!e.HostNameAndPort||!e.PathSegments)throw ve(So);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw ve(cd)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return oe.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),oe.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ve(So);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw ve(So);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===E.FORWARD_SLASH){const o=new oe(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new oe(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Hd(e)}}const cc="pkce_not_created",Bd="crypto_nonexistent",ns="empty_navigate_uri",jd="hash_empty_error",lc="no_state_in_hash",Vd="hash_does_not_contain_known_properties",$d="unable_to_parse_state",Gd="state_interaction_type_mismatch",zd="interaction_in_progress",qd="popup_window_error",Kd="empty_window_error",ur="user_cancelled",Wd="monitor_window_timeout",Yd="redirect_in_iframe",Qd="block_iframe_reload",Jd="block_nested_popups",rs="silent_logout_unsupported",Zd="no_account_error",Xd="no_token_request_cache_error",eh="unable_to_parse_token_request_cache_error",uc="no_cached_authority_error",dc="non_browser_environment",zr="database_not_open",os="no_network_connectivity",th="post_request_failed",nh="get_request_failed",hc="failed_to_parse_response",rh="unable_to_load_token",fc="crypto_key_not_found",oh="auth_code_required",ih="auth_code_or_nativeAccountId_required",sh="spa_code_and_nativeAccountId_present",pc="database_unavailable",ah="unable_to_acquire_token_from_native_platform",ch="native_handshake_timeout",lh="native_extension_not_installed",Ao="native_connection_not_established",uh="uninitialized_public_client_application",dh="native_prompt_not_supported",hh="invalid_base64_string",fh="invalid_pop_token_request",bR="failed_to_retry",dr="For more visit: aka.ms/msaljs/browser-errors",G={[cc]:"The PKCE code challenge and verifier could not be generated.",[Bd]:"The crypto object or function is not available.",[ns]:"Navigation URI is empty. Please check stack trace for more info.",[jd]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${dr}`,[lc]:"Hash does not contain state. Please verify that the request originated from msal.",[Vd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${dr}`,[$d]:"Unable to parse state. Please verify that the request originated from msal.",[Gd]:"Hash contains state but the interaction type does not match the caller.",[zd]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${dr}`,[qd]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Kd]:"window.open returned null or undefined window object.",[ur]:"User cancelled the flow.",monitor_popup_timeout:`Token acquisition in popup failed due to timeout.  ${dr}`,[Wd]:`Token acquisition in iframe failed due to timeout.  ${dr}`,[Yd]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Qd]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${dr}`,[Jd]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",iframe_closed_prematurely:"The iframe being monitored was closed prematurely.",[rs]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Zd]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",silent_prompt_value_error:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Xd]:"No token request found in cache.",[eh]:"The cached token request could not be parsed.",[uc]:"No cached authority found.",auth_request_not_set_error:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",invalid_cache_type:"Invalid cache type",[dc]:"Login and token requests are not supported in non-browser environments.",[zr]:"Database is not open!",[os]:"No network connectivity. Check your internet connection.",[th]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[nh]:"Network request failed. Please check the network trace to determine root cause.",[hc]:"Failed to parse network response. Check network trace.",[rh]:"Error loading token to cache.",[fc]:"Cryptographic Key or Keypair not found in browser storage.",[oh]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ih]:"An authorization code or nativeAccountId must be provided to this flow.",[sh]:"Request cannot contain both spa code and native account id.",[pc]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[ah]:`Unable to acquire token from native platform.  ${dr}`,[ch]:"Timed out while attempting to establish connection to browser extension",[lh]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Ao]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${dr}`,[uh]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${dr}`,[dh]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[hh]:"Invalid base64 encoded string.",[fh]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[bR]:"Unable to retry failed auth code redemption due to usage of the onRedirectNavigate request parameter. Please set onRedirectNavigate on the PublicClientApplication configuration instead or call loginRedirect again."};class gc extends Pe{constructor(e){super(e,G[e]),Object.setPrototypeOf(this,gc.prototype),this.name="BrowserAuthError"}}function P(n){return new gc(n)}function ph(){return window.parent!==window}function hr(){return window.location.href.split("?")[0].split("#")[0]}function RR(n){if(!n)throw P(uh)}function Xy(n){(function Xz(){if(typeof window>"u")throw P(dc)})(),function Qz(){if(oe.hashContainsKnownProperties(window.location.hash)&&ph())throw P(Qd)}(),function Zz(){if(function Wz(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${bt.POPUP_NAME_PREFIX}.`)}())throw P(Jd)}(),RR(n)}function MR(n,e){if(Xy(n),function Jz(n){if(ph()&&!n)throw P(Yd)}(e.system.allowRedirectInIframe),"memoryStorage"===e.cache.cacheLocation&&!e.cache.storeAuthStateInCookie)throw AR(id)}function NR(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const kR={now:()=>(kR.delegate||Date).now(),delegate:void 0};class eq extends Ft{constructor(e=1/0,t=1/0,r=kR){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}const OR="@azure/msal-angular",ev="3.0.23",gh=new R("MSAL_INSTANCE"),mh=new R("MSAL_GUARD_CONFIG"),tv=new R("MSAL_INTERCEPTOR_CONFIG"),tq=new R("MSAL_BROADCAST_CONFIG");let qr=(()=>{class n{constructor(t,r){this.instance=t,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",ev)}initialize(){return he(this.instance.initialize())}acquireTokenPopup(t){return he(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return he(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return he(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return he(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return he(this.instance.loginPopup(t))}loginRedirect(t){return he(this.instance.loginRedirect(t))}logout(t){return he(this.instance.logout(t))}logoutRedirect(t){return he(this.instance.logoutRedirect(t))}logoutPopup(t){return he(this.instance.logoutPopup(t))}ssoSilent(t){return he(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(OR,ev)),this.logger}setLogger(t){this.logger=t.clone(OR,ev),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(M(gh),M(kr))},n.\u0275prov=N({token:n,factory:n.\u0275fac}),n})(),is=(()=>{class n{constructor(t,r,o){this.msalInstance=t,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new eq(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Ft,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Ut("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const s=zz.getInteractionStatusFromEvent(i,this._inProgress.value);null!==s&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(M(gh),M(qr),M(tq,8))},n.\u0275prov=N({token:n,factory:n.\u0275fac}),n})(),nv=(()=>{class n{constructor(t,r,o,i,s){this.msalGuardConfig=t,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(t);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${t}`}loginInteractively(t){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,t):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===k.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(re(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(t.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(re(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==k.Popup&&this.msalGuardConfig.interactionType!==k.Redirect)throw new Wa("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),L(!0);if(oe.hashContainsKnownProperties(window.location.hash)&&ph()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),L(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(xr(()=>this.authService.handleRedirectObservable()),xr(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),L(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){const o=this.includesCode(t.url),i=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=0===this.location.prepareExternalUrl(t.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?L(this.parseUrl(this.location.path())):L(this.parseUrl(""))}return L(!0)}),Lr(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),L(this.loginFailedRoute)):L(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(t,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(M(mh),M(is),M(qr),M(kr),M(en))},n.\u0275prov=N({token:n,factory:n.\u0275fac}),n})(),nq=(()=>{class n{constructor(t,r,o,i,s){this.msalInterceptorConfig=t,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(t,r){if(this.msalInterceptorConfig.interactionType!==k.Popup&&this.msalInterceptorConfig.interactionType!==k.Redirect)throw new Wa("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(t.url,t.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(t);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,t,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${t.url}`),this.acquireToken(s,o,i).pipe(pt(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const c=t.headers.set("Authorization",`Bearer ${a.accessToken}`),l=t.clone({headers:c});return r.handle(l)}))}acquireToken(t,r,o){return this.authService.acquireTokenSilent({...t,scopes:r,account:o}).pipe(Lr(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(cr(1),pt(i=>"none"===i?this.acquireTokenInteractively(t,r):this.msalBroadcastService.inProgress$.pipe(Lt(s=>"none"===s),cr(1),pt(()=>this.acquireToken(t,r,o))))))),pt(i=>i.accessToken?L(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(Lt(s=>"none"===s),cr(1),pt(()=>this.acquireTokenInteractively(t,r))))))}acquireTokenInteractively(t,r){if(this.msalInterceptorConfig.interactionType===k.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...t,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...t,scopes:r,redirectStartPage:o}),xn}getScopesForEndpoint(t,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(t),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(t,r){const o=[];return t.forEach(i=>{const s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(t,r){const o=["protocol","host","pathname","search","hash"];for(const i of o)if(t[i]){const s=decodeURIComponent(t[i]);if(!nn.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(t){const r=this._document.createElement("a");return r.href=t,r.href}matchScopesToEndpoint(t,r,o){const i=[];return r.forEach(s=>{const a=[],c=t.get(s);null!==c?(c.forEach(l=>{if("string"==typeof l)a.push(l);else{const u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(null===l.scopes?i.push(null):l.scopes.forEach(h=>{a.push(h)}))}}),a.length>0&&i.push(a)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return n.\u0275fac=function(t){return new(t||n)(M(tv),M(qr),M(kr),M(is),M(At))},n.\u0275prov=N({token:n,factory:n.\u0275fac}),n})(),rq=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(F(qr))},n.\u0275cmp=Lo({type:n,selectors:[["app-redirect"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),oq=(()=>{class n{static forRoot(t,r,o){return{ngModule:n,providers:[{provide:gh,useValue:t},{provide:mh,useValue:r},{provide:tv,useValue:o},qr]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=In({providers:[nv,is],imports:[rD]}),n})();const iq=[{path:"profile",component:Pz,canActivate:[nv]},{path:"**",component:(()=>{class n{constructor(t,r){this.authService=t,this.msalBroadcastService=r}ngOnInit(){this.msalBroadcastService.msalSubject$.pipe(Lt(t=>"msal:loginSuccess"===t.eventType)).subscribe(t=>{this.authService.instance.setActiveAccount(t.payload.account)})}static#e=this.\u0275fac=function(r){return new(r||n)(F(qr),F(is))};static#t=this.\u0275cmp=Lo({type:n,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"title"]],template:function(r,o){1&r&&(Ae(0,"div",0)(1,"h5"),se(2," Welcome to the Microsoft Authentication Library For Javascript - Angular SPAx "),ee(),Ae(3,"p"),se(4,'View your data from Microsoft Graph by clicking the "View Profile" link above.'),ee()())},encapsulation:2})}return n})()}];let sq=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Yn({type:n});static#n=this.\u0275inj=In({imports:[zb.forRoot(iq,{useHash:!0}),zb]})}return n})();function aq(n,e){if(1&n){const t=Ag();Ae(0,"button",6),ma("click",function(){return wf(t),_f(Rg().login())}),se(1,"Sign In"),ee()}}function cq(n,e){if(1&n){const t=Ag();Ae(0,"button",6),ma("click",function(){return wf(t),_f(Rg().logout())}),se(1,"Sign Out"),ee()}}const lq=()=>["profile"];function uq(n,e){1&n&&(Ae(0,"a",7),se(1,"View Profile"),ee()),2&n&&Ei("routerLink",IS(1,lq))}let dq=(()=>{class n{constructor(t,r,o){this.msalGuardConfig=t,this.authService=r,this.msalBroadcastService=o,this.title="Angular 12 - MSAL Example",this.loginDisplay=!1,this.tokenExpiration="",this._destroying$=new Ft}ngOnInit(){this.msalBroadcastService.inProgress$.pipe(Lt(t=>"none"===t),WD(this._destroying$)).subscribe(()=>{this.setLoginDisplay()}),this.msalBroadcastService.msalSubject$.pipe(Lt(t=>"msal:acquireTokenSuccess"===t.eventType)).subscribe(t=>{this.tokenExpiration=t.payload.expiresOn,localStorage.setItem("tokenExpiration",this.tokenExpiration)})}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0}login(){this.msalGuardConfig.authRequest?this.authService.loginRedirect({...this.msalGuardConfig.authRequest}):this.authService.loginRedirect()}logout(){this.authService.logoutRedirect()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(F(mh),F(qr),F(is))};static#t=this.\u0275cmp=Lo({type:n,selectors:[["app-root"]],decls:10,vars:3,consts:[["variant","dark","href","/",1,"navbar","navbar-dark","bg-primary"],[1,"navbar-brand"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"profileButton"],["class","btn btn-secondary",3,"routerLink",4,"ngIf"],[1,"container"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(r,o){1&r&&(Ae(0,"a",0)(1,"a",1),se(2," Microsoft Identity Platform "),ee(),Ae(3,"a"),ho(4,aq,2,0,"button",2)(5,cq,2,0,"button",2),ee()(),Ae(6,"a",3),ho(7,uq,2,2,"a",4),ee(),Ae(8,"div",5),Ri(9,"router-outlet"),ee()),2&r&&(ht(4),Ei("ngIf",!o.loginDisplay),ht(),Ei("ngIf",o.loginDisplay),ht(2),Ei("ngIf",o.loginDisplay))},dependencies:[XA,uy,zu],encapsulation:2})}return n})();var Me=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(Me||{});class Do{constructor(e,t,r){this.level=Me.Info;const i=e||Do.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:Me.Info,this.correlationId=i.correlationId||E.EMPTY_STRING,this.packageName=t||E.EMPTY_STRING,this.packageVersion=r||E.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Me.Info}}clone(e,t,r){return new Do({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${Me[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Me.Error,containsPii:!1,correlationId:t||E.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Me.Error,containsPii:!0,correlationId:t||E.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Me.Warning,containsPii:!1,correlationId:t||E.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Me.Warning,containsPii:!0,correlationId:t||E.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Me.Info,containsPii:!1,correlationId:t||E.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Me.Info,containsPii:!0,correlationId:t||E.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Me.Verbose,containsPii:!1,correlationId:t||E.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Me.Verbose,containsPii:!0,correlationId:t||E.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Me.Trace,containsPii:!1,correlationId:t||E.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Me.Trace,containsPii:!0,correlationId:t||E.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const yh={createNewGuid:()=>{throw w(J)},base64Decode:()=>{throw w(J)},base64Encode:()=>{throw w(J)},base64UrlEncode:()=>{throw w(J)},encodeKid:()=>{throw w(J)},getPublicKeyThumbprint:()=>v(function*(){throw w(J)})(),removeTokenBindingKey:()=>v(function*(){throw w(J)})(),clearKeystore:()=>v(function*(){throw w(J)})(),signJwt:()=>v(function*(){throw w(J)})(),hashString:()=>v(function*(){throw w(J)})()},PR="@azure/msal-common",ov="14.14.1";function bo(n,e){const t=function hq(n){if(!n)throw w(Td);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw w(Xa);return t[2]}(n);try{const r=e(t);return JSON.parse(r)}catch{throw w(Xa)}}function xR(n,e){if(0===e||Date.now()-3e5>n+e)throw w(bd)}function jn(){return Math.round((new Date).getTime()/1e3)}function iv(n,e){const t=Number(n)||0;return jn()+e>t}function ss(n){return[pq(n),gq(n),mq(n),yq(n),vq(n)].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}function vh(n,e,t,r,o){return{credentialType:V.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function Ch(n,e,t,r,o,i,s,a,c,l,u,d,h,f,g){const m={homeAccountId:n,credentialType:V.ACCESS_TOKEN,secret:t,cachedAt:jn().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||ge.BEARER};if(d&&(m.userAssertionHash=d),l&&(m.refreshOn=l.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=g),m.tokenType?.toLowerCase()!==ge.BEARER.toLowerCase())switch(m.credentialType=V.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case ge.POP:const y=bo(t,c);if(!y?.cnf?.kid)throw w(Pd);m.keyId=y.cnf.kid;break;case ge.SSH:m.keyId=h}return m}function LR(n,e,t,r,o,i,s){const a={credentialType:V.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function sv(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function FR(n){return!!n&&sv(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===V.ACCESS_TOKEN||n.credentialType===V.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function UR(n){return!!n&&sv(n)&&n.hasOwnProperty("realm")&&n.credentialType===V.ID_TOKEN}function HR(n){return!!n&&sv(n)&&n.credentialType===V.REFRESH_TOKEN}function pq(n){return[n.homeAccountId,n.environment].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}function gq(n){return[n.credentialType,n.credentialType===V.REFRESH_TOKEN&&n.familyId||n.clientId,n.realm||""].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}function mq(n){return(n.target||"").toLowerCase()}function yq(n){return(n.requestedClaimsHash||"").toLowerCase()}function vq(n){return n.tokenType&&n.tokenType.toLowerCase()!==ge.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function BR(){return jn()+86400}function Eh(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function av(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function jR(n){return n.expiresAt<=jn()}class Be{constructor(e){const t=e?nn.trimArrayEntries([...e]):[],r=t?nn.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||E.EMPTY_STRING).split(" ");return new Be(r)}static createSearchScopes(e){const t=new Be(e);return t.containsOnlyOIDCScopes()?t.removeScope(E.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw ve(ud)}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Be(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return yR.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw w(kd)}}removeScope(e){if(!e)throw w(Nd);this.scopes.delete(e.trim())}removeOIDCScopes(){yR.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw w(tc);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw w(tc);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):E.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Ih(n,e){if(!n)throw w(Id);try{const t=e(n);return JSON.parse(t)}catch{throw w(Za)}}function as(n){if(!n)throw w(Za);const e=n.split(mt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?E.EMPTY_STRING:e[1]}}function Th(n,e){return!!n&&!!e&&n===e.split(".")[1]}function cv(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:Th(u,n)}}return{tenantId:t,localAccountId:e,isHomeTenant:Th(t,n)}}function lv(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=cv(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}function VR(n){return n&&(n.tid||n.tfp||n.acr)||null}class Xe{generateAccountId(){return[this.homeAccountId,this.environment].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Xe.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){const o=new Xe;let i;o.authorityType=1===t.authorityType?"ADFS":"AAD"===t.protocolMode?"MSSTS":"Generic",e.clientInfo&&r&&(i=Ih(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw w(rc);if(o.environment=s,o.realm=i?.utid||VR(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const l=cv(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){const o=new Xe;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,r,o,i){if(1!==t&&2!==t){if(e)try{const s=Ih(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}const GR={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},uv={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},zR=new Set;function qR(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=wh(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function wh(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}uv.metadata.forEach(n=>{n.aliases.forEach(e=>{zR.add(e)})});const KR="cache_quota_exceeded",dv="cache_error_unknown",hv={[KR]:"Exceeded cache storage capacity.",[dv]:"Unexpected error occurred when using cache storage."};class cs extends Error{constructor(e,t){const r=t||(hv[e]?hv[e]:hv[dv]);super(`${e}: ${r}`),Object.setPrototypeOf(this,cs.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}class ls{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(PR,ov),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let s,i=null;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const a=this.getIdToken(e,t,r.tenantId);return a&&(s=bo(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=lv(e,r,s,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const s=this.getTokenKeys();if(t){const c=i.get(t);if(!c)return[];i=new Map([[t,c]])}const a=[];return i.forEach(c=>{const l=this.getTenantedAccountInfoByFilter(o,s,c,r);l&&a.push(l)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r){var o=this;return v(function*(){if(!e)throw w(Od);try{e.account&&o.setAccount(e.account),e.idToken&&!1!==t?.idToken&&o.setIdTokenCredential(e.idToken),e.accessToken&&!1!==t?.accessToken&&(yield o.saveAccessToken(e.accessToken)),e.refreshToken&&!1!==t?.refreshToken&&o.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&o.setAppMetadata(e.appMetadata)}catch(i){throw o.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Error?(o.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i.message}`,r),"QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name||i.message.includes("exceeded the quota")?(o.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new cs(KR)):new cs(i.name,i.message)):(o.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${i}`,r),new cs(dv))}})()}saveAccessToken(e){var t=this;return v(function*(){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=t.getTokenKeys(),i=Be.fromString(e.target),s=[];o.accessToken.forEach(a=>{if(!t.accessTokenKeyMatchesFilter(a,r,!1))return;const c=t.getAccessTokenCredential(a);c&&t.credentialMatchesFilter(c,r)&&Be.fromString(c.target).intersectingScopeSets(i)&&s.push(t.removeAccessToken(a))}),yield Promise.all(s),t.setAccessTokenCredential(e)})()}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e?.localAccountId,name:e?.name},a=i.tenantProfiles?.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&0===a.length||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(mt.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(mt.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(V.ID_TOKEN.toLowerCase())&&-1===t.indexOf(V.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(V.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(V.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(V.REFRESH_TOKEN.toLowerCase())>-1){const o=`${V.REFRESH_TOKEN}${mt.CACHE_KEY_SEPARATOR}1${mt.CACHE_KEY_SEPARATOR}`;if(-1===t.indexOf(`${V.REFRESH_TOKEN}${mt.CACHE_KEY_SEPARATOR}${this.clientId}${mt.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===t.indexOf(o.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||"string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===V.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===ge.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(){var e=this;return v(function*(){const t=e.getAccountKeys(),r=[];t.forEach(o=>{r.push(e.removeAccount(o))}),yield Promise.all(r)})()}removeAccount(e){var t=this;return v(function*(){const r=t.getAccount(e,t.commonLogger);r&&(yield t.removeAccountContext(r),t.removeItem(e))})()}removeAccountContext(e){var t=this;return v(function*(){const r=t.getTokenKeys(),o=e.generateAccountId(),i=[];r.idToken.forEach(s=>{0===s.indexOf(o)&&t.removeIdToken(s)}),r.accessToken.forEach(s=>{0===s.indexOf(o)&&i.push(t.removeAccessToken(s))}),r.refreshToken.forEach(s=>{0===s.indexOf(o)&&t.removeRefreshToken(s)}),yield Promise.all(i)})()}updateOutdatedCachedAccount(e,t,r){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const o=this.getAccountKeys().filter(l=>l.startsWith(t.homeAccountId)),i=[];o.forEach(l=>{const u=this.getCachedAccountEntity(l);u&&i.push(u)});const s=i.find(l=>Th(l.realm,l.homeAccountId))||i[0];s.tenantProfiles=i.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:Th(l.realm,l.homeAccountId)}));const a=ls.toObject(new Xe,{...s}),c=a.generateAccountKey();return o.forEach(l=>{l!==c&&this.removeOutdatedAccount(e)}),this.setAccount(a),r?.verbose("Updated an outdated account entity in the cache"),a}return t}removeAccessToken(e){var t=this;return v(function*(){const r=t.getAccessTokenCredential(e);if(r){if(r.credentialType.toLowerCase()===V.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&r.tokenType===ge.POP){const i=r.keyId;if(i)try{yield t.cryptoImpl.removeTokenBindingKey(i)}catch{throw w(Ld)}}return t.removeItem(e)}})()}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){const t=Xe.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:V.ID_TOKEN,clientId:this.clientId,realm:r},t),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!r){const u=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&u.set(f,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=Be.createSearchScopes(t.scopes),c=t.authenticationScheme||ge.BEARER,l=c&&c.toLowerCase()!==ge.BEARER.toLowerCase()?V.ACCESS_TOKEN_WITH_AUTH_SCHEME:V.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,h=[];d.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,u,!0)){const m=this.getAccessTokenCredential(g);m&&this.credentialMatchesFilter(m,u)&&h.push(m)}});const f=h.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),h.forEach(g=>{this.removeAccessToken(ss(g))}),i&&s&&i.addFields({multiMatchedAT:h.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),h[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&-1===o.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===o.indexOf(t.homeAccountId.toLowerCase())||t.realm&&-1===o.indexOf(t.realm.toLowerCase())||t.requestedClaimsHash&&-1===o.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:V.REFRESH_TOKEN,clientId:this.clientId,familyId:t?"1":void 0},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&-1===r.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw w(Rd);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||"1"!==t.familyId)}matchHomeAccountId(e,t){return"string"==typeof e.homeAccountId&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=function _q(n,e){let t;const r=n.canonicalAuthority;if(r){const o=new oe(r).getUrlComponents().HostNameAndPort;t=qR(o,n.cloudDiscoveryMetadata?.metadata,"config",e)||qR(o,uv.metadata,"hardcoded_values",e)||n.knownAuthorities}return t||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==V.ACCESS_TOKEN&&e.credentialType!==V.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Be.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(Dy)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class Aq extends ls{setAccount(){throw w(J)}getAccount(){throw w(J)}getCachedAccountEntity(){throw w(J)}setIdTokenCredential(){throw w(J)}getIdTokenCredential(){throw w(J)}setAccessTokenCredential(){throw w(J)}getAccessTokenCredential(){throw w(J)}setRefreshTokenCredential(){throw w(J)}getRefreshTokenCredential(){throw w(J)}setAppMetadata(){throw w(J)}getAppMetadata(){throw w(J)}setServerTelemetry(){throw w(J)}getServerTelemetry(){throw w(J)}setAuthorityMetadata(){throw w(J)}getAuthorityMetadata(){throw w(J)}getAuthorityMetadataKeys(){throw w(J)}setThrottlingCache(){throw w(J)}getThrottlingCache(){throw w(J)}removeItem(){throw w(J)}getKeys(){throw w(J)}getAccountKeys(){throw w(J)}getTokenKeys(){throw w(J)}clear(){return v(function*(){throw w(J)})()}updateCredentialCacheKey(){throw w(J)}removeOutdatedAccount(){throw w(J)}}const WR={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Dq={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Me.Info,correlationId:E.EMPTY_STRING},bq={claimsBasedCachingEnabled:!1},Rq={sendGetRequestAsync:()=>v(function*(){throw w(J)})(),sendPostRequestAsync:()=>v(function*(){throw w(J)})()},Mq={sku:E.SKU,version:ov,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},Nq={clientSecret:E.EMPTY_STRING,clientAssertion:void 0},kq={azureCloudInstance:"none",tenant:`${E.DEFAULT_COMMON_TENANT}`},Oq={application:{appName:"",appVersion:""}};function xq(n){return{clientCapabilities:[],azureCloudOptions:kq,skipAuthorityMetadataCache:!1,...n}}function fv(n){return"OIDC"===n.authOptions.authority.options.protocolMode}const Lq={sendGetRequestAsync:()=>Promise.reject(w(J)),sendPostRequestAsync:()=>Promise.reject(w(J))},p={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",PopupClientTokenHelper:"popupClientTokenHelper",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"};class YR{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Uq{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new YR}}startPerformanceMeasurement(){return new YR}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class _h{navigateInternal(e,t){return _h.defaultNavigateWindow(e,t)}navigateExternal(e,t){return _h.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}class Hq{sendGetRequestAsync(e,t){var r=this;return v(function*(){let o;try{o=yield fetch(e,{method:"GET",headers:r.getFetchHeaders(t)})}catch{throw window.navigator.onLine?P(nh):P(os)}try{return{headers:r.getHeaderDict(o.headers),body:yield o.json(),status:o.status}}catch{throw P(hc)}})()}sendPostRequestAsync(e,t){var r=this;return v(function*(){const o=t&&t.body||E.EMPTY_STRING;let i;try{i=yield fetch(e,{method:"POST",headers:r.getFetchHeaders(t),body:o})}catch{throw window.navigator.onLine?P(th):P(os)}try{return{headers:r.getHeaderDict(i.headers),body:yield i.json(),status:i.status}}catch{throw P(hc)}})()}getFetchHeaders(e){const t=new Headers;if(!e||!e.headers)return t;const r=e.headers;return Object.keys(r).forEach(o=>{t.append(o,r[o])}),t}getHeaderDict(e){const t={};return e.forEach((r,o)=>{t[o]=r}),t}}const pv=1e4,Sh="3.21.0";class gv{static loggerCallback(e,t){switch(e){case Me.Error:return void console.error(t);case Me.Info:return void console.info(t);case Me.Verbose:return void console.debug(t);case Me.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment=typeof window<"u",this.config=function $q({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:E.EMPTY_STRING,authority:`${E.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:E.EMPTY_STRING,authorityMetadata:E.EMPTY_STRING,redirectUri:E.EMPTY_STRING,postLogoutRedirectUri:E.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:"AAD",OIDCOptions:{serverResponseType:Ga.FRAGMENT,defaultScopes:[E.OPENID_SCOPE,E.PROFILE_SCOPE,E.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:E.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},s={cacheLocation:"sessionStorage",temporaryCacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||"localStorage"!==e.cacheLocation),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Me.Info,piiLoggingEnabled:!1},l={...{...WR,loggerOptions:a,networkClient:o?new Hq:Lq,navigationClient:new _h,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||6e4,iframeHashTimeout:t?.loadFrameTimeout||pv,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:bt.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:t?.loggerOptions||a},u={application:{appName:E.EMPTY_STRING,appVersion:E.EMPTY_STRING},client:new Uq};if("OIDC"!==n?.protocolMode&&n?.OIDCOptions&&new Do(l.loggerOptions).warning(JSON.stringify(ve(vd))),n?.protocolMode&&"AAD"!==n.protocolMode&&l?.allowNativeBroker)throw ve(Cd);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n?.OIDCOptions}},cache:{...s,...e},system:l,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{t=window.sessionStorage}catch{}const r=t?.getItem("msal.browser.log.level"),o=t?.getItem("msal.browser.log.pii")?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(Me).includes(r)?Me[r]:void 0;a&&(s.loggerCallback=gv.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new Do(s,"@azure/msal-browser",Sh),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let QR=(()=>{class n extends gv{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){var t=this;return v(function*(){return t.available=typeof window<"u",t.available})()}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();const JR="missing_kid_error",ZR="missing_alg_error",zq={[JR]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[ZR]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class mv extends Pe{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,mv.prototype)}}function XR(n){return new mv(n,zq[n])}class yv{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw XR(JR);if(!e.alg)throw XR(ZR);const t=new yv({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(t)}}function Ah(n){return encodeURIComponent(vv(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Dh(n){return eM(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vv(n){return eM((new TextEncoder).encode(n))}function eM(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function Vn(n){return(new TextDecoder).decode(function qq(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw P(hh)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}(n))}const tM="SHA-256",Yq=new Uint8Array([1,0,1]),nM="0123456789abcdef",rM=new Uint32Array(1),Cv={name:"RSASSA-PKCS1-v1_5",hash:tM,modulusLength:2048,publicExponent:Yq};function oM(n,e,t){return Ev.apply(this,arguments)}function Ev(){return(Ev=v(function*(n,e,t){e?.addQueueMeasurement(p.Sha256Digest,t);const o=(new TextEncoder).encode(n);return window.crypto.subtle.digest(tM,o)})).apply(this,arguments)}function Jq(n){return window.crypto.getRandomValues(n)}function Iv(){return window.crypto.getRandomValues(rM),rM[0]}function pr(){const n=Date.now(),e=1024*Iv()+(1023&Iv()),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Iv();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/65536,t[4]=n/256,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=nM.charAt(t[a]>>>4),s+=nM.charAt(15&t[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function Tv(){return(Tv=v(function*(n,e){return window.crypto.subtle.generateKey(Cv,n,e)})).apply(this,arguments)}function wv(n){return _v.apply(this,arguments)}function _v(){return(_v=v(function*(n){return window.crypto.subtle.exportKey(_R,n)})).apply(this,arguments)}function Sv(){return(Sv=v(function*(n,e,t){return window.crypto.subtle.importKey(_R,n,Cv,e,t)})).apply(this,arguments)}function Av(){return(Av=v(function*(n,e){return window.crypto.subtle.sign(Cv,n,e)})).apply(this,arguments)}function iM(n){return Dv.apply(this,arguments)}function Dv(){return(Dv=v(function*(n){const e=yield oM(n);return Dh(new Uint8Array(e))})).apply(this,arguments)}class tK{constructor(){this.dbName=Ry,this.version=1,this.tableName=jz,this.dbOpen=!1}open(){var e=this;return v(function*(){return new Promise((t,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,t()}),o.addEventListener("error",()=>r(P(pc)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return v(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var t=this;return v(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(P(zr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).get(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}setItem(e,t){var r=this;return v(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(P(zr));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(t,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",l=>{r.closeConnection(),i(l)})})})()}removeItem(e){var t=this;return v(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(P(zr));const a=t.db.transaction([t.tableName],"readwrite").objectStore(t.tableName).delete(e);a.addEventListener("success",()=>{t.closeConnection(),r()}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}getKeys(){var e=this;return v(function*(){return yield e.validateDbIsOpen(),new Promise((t,r)=>{if(!e.db)return r(P(zr));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var t=this;return v(function*(){return yield t.validateDbIsOpen(),new Promise((r,o)=>{if(!t.db)return o(P(zr));const a=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).count(e);a.addEventListener("success",c=>{const l=c;t.closeConnection(),r(1===l.target.result)}),a.addEventListener("error",c=>{t.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return v(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((t,r)=>{const o=window.indexedDB.deleteDatabase(Ry),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),t(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),t(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class bv{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class nK{constructor(e){this.inMemoryCache=new bv,this.indexedDBCache=new tK,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof gc&&e.errorCode===pc))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var t=this;return v(function*(){const r=t.inMemoryCache.getItem(e);if(!r)try{return t.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.getItem(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}setItem(e,t){var r=this;return v(function*(){r.inMemoryCache.setItem(e,t);try{yield r.indexedDBCache.setItem(e,t)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var t=this;return v(function*(){t.inMemoryCache.removeItem(e);try{yield t.indexedDBCache.removeItem(e)}catch(r){t.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return v(function*(){const t=e.inMemoryCache.getKeys();if(0===t.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return t})()}containsKey(e){var t=this;return v(function*(){const r=t.inMemoryCache.containsKey(e);if(!r)try{return t.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield t.indexedDBCache.containsKey(e)}catch(o){t.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return v(function*(){try{e.logger.verbose("Deleting persistent keystore");const t=yield e.indexedDBCache.deleteDatabase();return t&&e.logger.verbose("Persistent keystore deleted"),t}catch(t){return e.handleDatabaseAccessError(t),!1}})()}}let rK=(()=>{class n{constructor(t,r){this.logger=t,function Qq(n){if(!("crypto"in window))throw n.error("BrowserCrypto: crypto interface is unavailable"),P(Bd);n.verbose("BrowserCrypto: modern crypto interface available")}(t),this.cache=new nK(this.logger),this.performanceClient=r}createNewGuid(){return pr()}base64Encode(t){return vv(t)}base64Decode(t){return Vn(t)}base64UrlEncode(t){return Ah(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){var r=this;return v(function*(){const o=r.performanceClient?.startMeasurement(p.CryptoOptsGetPublicKeyThumbprint,t.correlationId),i=yield function Zq(n,e){return Tv.apply(this,arguments)}(n.EXTRACTABLE,n.POP_KEY_USAGES),s=yield wv(i.publicKey),c=sM({e:s.e,kty:s.kty,n:s.n}),l=yield r.hashString(c),u=yield wv(i.privateKey),d=yield function Xq(n,e,t){return Sv.apply(this,arguments)}(u,!1,["sign"]);return yield r.cache.setItem(l,{privateKey:d,publicKey:i.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),o&&o.end({success:!0}),l})()}removeTokenBindingKey(t){var r=this;return v(function*(){return yield r.cache.removeItem(t),!(yield r.cache.containsKey(t))})()}clearKeystore(){var t=this;return v(function*(){t.cache.clearInMemory();try{return yield t.cache.clearPersistent(),!0}catch(r){return r instanceof Error?t.logger.error(`Clearing keystore failed with error: ${r.message}`):t.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(t,r,o,i){var s=this;return v(function*(){const a=s.performanceClient?.startMeasurement(p.CryptoOptsSignJwt,i),c=yield s.cache.getItem(r);if(!c)throw P(fc);const l=yield wv(c.publicKey),u=sM(l),d=Ah(JSON.stringify({kid:r})),f=Ah(yv.getShrHeaderString({...o?.header,alg:l.alg,kid:d}));t.cnf={jwk:JSON.parse(u)};const m=`${f}.${Ah(JSON.stringify(t))}`,I=(new TextEncoder).encode(m),C=yield function eK(n,e){return Av.apply(this,arguments)}(c.privateKey,I),x=`${m}.${Dh(new Uint8Array(C))}`;return a&&a.end({success:!0}),x})()}hashString(t){return v(function*(){return iM(t)})()}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function sM(n){return JSON.stringify(n,Object.keys(n).sort())}const Ro=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},D=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let aK=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){var o=this;return v(function*(){o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryDetectRegion,o.correlationId);let i=t;if(i)r.region_source="3";else{const s=n.IMDS_OPTIONS;try{const a=yield D(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(E.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield D(o.getCurrentVersion.bind(o),p.RegionDiscoveryGetCurrentVersion,o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const l=yield D(o.getRegionFromIMDS.bind(o),p.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(c,s);200===l.status&&(i=l.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(t,r){var o=this;return v(function*(){return o.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetRegionFromIMDS,o.correlationId),o.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,E.IMDS_TIMEOUT)})()}getCurrentVersion(t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.RegionDiscoveryGetCurrentVersion,r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${E.IMDS_ENDPOINT}?format=json`,t);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();class yt{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new aK(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(E.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case E.ADFS:return 1;case E.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new oe(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw w(gn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw w(gn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw w(gn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw w(Fd);return this.replacePath(this.metadata.end_session_endpoint)}throw w(gn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw w(gn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw w(gn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!yt.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&"AAD"===this.protocolMode}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new oe(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(0===c&&this.canReplaceTenant(o)){const u=new oe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||"AAD"!==this.protocolMode&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityResolveEndpointsAsync,e.correlationId);const t=e.getCurrentMetadataEntity(),r=yield D(e.updateCloudDiscoveryMetadata.bind(e),p.AuthorityUpdateCloudDiscoveryMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,t.preferred_network);const o=yield D(e.updateEndpointMetadata.bind(e),p.AuthorityUpdateEndpointMetadata,e.logger,e.performanceClient,e.correlationId)(t);e.updateCachedMetadata(t,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:BR(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){"cache"!==t&&"cache"!==r?.source&&(e.expiresAt=BR(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateEndpointMetadata,t.correlationId);const r=t.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&t.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield D(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(r.metadata);Eh(e,i,!1),e.canonical_authority=t.canonicalAuthority}return r.source}let o=yield D(t.getEndpointMetadataFromNetwork.bind(t),p.AuthorityGetEndpointMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return t.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield D(t.updateMetadataWithRegionalInformation.bind(t),p.AuthorityUpdateMetadataWithRegionalInformation,t.logger,t.performanceClient,t.correlationId)(o)),Eh(e,o,!0),"network";throw w(_d,t.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Eh(e,t,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Eh(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=jR(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new oe(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ve(gd)}return null}getEndpointMetadataFromNetwork(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetEndpointMetadataFromNetwork,e.correlationId);const t={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,t);return function oK(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in GR?GR[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateMetadataWithRegionalInformation,t.correlationId);const r=t.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==E.AZURE_REGION_AUTO_DISCOVER_FLAG)return t.regionDiscoveryMetadata.region_outcome="2",t.regionDiscoveryMetadata.region_used=r,yt.replaceWithRegionalInformation(e,r);const o=yield D(t.regionDiscovery.detectRegion.bind(t.regionDiscovery),p.RegionDiscoveryDetectRegion,t.logger,t.performanceClient,t.correlationId)(t.authorityOptions.azureRegionConfiguration?.environmentRegion,t.regionDiscoveryMetadata);if(o)return t.regionDiscoveryMetadata.region_outcome="4",t.regionDiscoveryMetadata.region_used=o,yt.replaceWithRegionalInformation(e,o);t.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.AuthorityUpdateCloudDiscoveryMetadata,t.correlationId);const r=t.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield D(t.getCloudDiscoveryMetadataFromNetwork.bind(t),p.AuthorityGetCloudDiscoveryMetadataFromNetwork,t.logger,t.performanceClient,t.correlationId)();if(o)return av(e,o,!0),"network";throw ve(md)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||E.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||E.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),av(e,t,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function Sq(n){return wh(uv.metadata,n)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),av(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=jR(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),yt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const t=wh(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ve(Ja)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),yt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(p.AuthorityGetCloudDiscoveryMetadataFromNetwork,e.correlationId);const t=`${E.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(t,r);let s,a;if(function iK(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function sK(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===E.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=wh(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof Pe?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=yt.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&oe.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;return t&&"none"!==t.azureCloudInstance&&(r=`${t.azureCloudInstance}/${t.tenant?t.tenant:E.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return E.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw w(gn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return zR.has(e)}static isPublicCloudAuthority(e){return E.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new oe(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${E.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=oe.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=yt.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=yt.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=yt.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new oe(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(E.CIAM_AUTH_URL)&&(t=`${t}${o.HostNameAndPort.split(".")[0]}${E.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function aM(n){return n.endsWith(E.FORWARD_SLASH)?n:`${n}${E.FORWARD_SLASH}`}yt.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const us="no_tokens_found",bh="native_account_unavailable",Rv="refresh_token_expired",ds="bad_token",cM=["interaction_required","consent_required","login_required",ds],fK=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Rh={[us]:"No refresh token found in the cache. Please sign-in.",[bh]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Rv]:"Refresh token has expired.",[ds]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class vn extends Pe{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,vn.prototype),this.timestamp=o||E.EMPTY_STRING,this.traceId=i||E.EMPTY_STRING,this.correlationId=s||E.EMPTY_STRING,this.claims=a||E.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function lM(n,e,t){const r=!!n&&cM.indexOf(n)>-1,o=!!t&&fK.indexOf(t)>-1,i=!!e&&cM.some(s=>e.indexOf(s)>-1);return r||i||o}function Mv(n){return new vn(n,Rh[n])}class Cn{static setRequestState(e,t,r){const o=Cn.generateLibraryState(e,r);return t?`${o}${E.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw w(ic);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw w(ic);if(!t)throw w(Gr);try{const r=t.split(E.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(E.RESOURCE_DELIM):E.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||E.EMPTY_STRING,libraryState:a}}catch{throw w(Gr)}}}class uM{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if("localStorage"!==e&&"sessionStorage"!==e||!window[e])throw AR(od)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,t){this.windowStorage.setItem(e,t)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}function dM(n,e){if(!e)return null;try{return Cn.parseRequestState(n,e).libraryState.meta}catch{throw w(Gr)}}class Nv extends ls{constructor(e,t,r,o,i,s){super(e,r,o,i),this.COOKIE_LIFE_MULTIPLIER=864e5,this.cacheConfig=t,this.logger=o,this.internalStorage=new bv,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case"localStorage":case"sessionStorage":try{return new uM(e)}catch(t){this.logger.verbose(t);break}}return this.cacheConfig.cacheLocation="memoryStorage",new bv}setupTemporaryCacheStorage(e,t){switch(t){case"localStorage":case"sessionStorage":try{return new uM(e||"sessionStorage")}catch(r){return this.logger.verbose(r),this.internalStorage}default:return this.internalStorage}}migrateCacheEntries(){const t=`${E.CACHE_PREFIX}.${tt.CLIENT_INFO}`,r=`${E.CACHE_PREFIX}.${tt.ERROR}`,o=`${E.CACHE_PREFIX}.${tt.ERROR_DESC}`,l=[this.browserStorage.getItem(`${E.CACHE_PREFIX}.${tt.ID_TOKEN}`),this.browserStorage.getItem(t),this.browserStorage.getItem(r),this.browserStorage.getItem(o)];[tt.ID_TOKEN,tt.CLIENT_INFO,tt.ERROR,tt.ERROR_DESC].forEach((d,h)=>{const f=l[h];f&&this.setTemporaryCache(d,f,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem("msal.account.keys"),t=this.getItem(`msal.token.keys.${this.clientId}`);e&&t?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case V.ID_TOKEN:if(UR(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const c=this.updateCredentialCacheKey(o,s);return void this.addTokenKey(c,V.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case V.ACCESS_TOKEN:case V.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(FR(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const c=this.updateCredentialCacheKey(o,s);return void this.addTokenKey(c,V.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case V.REFRESH_TOKEN:if(HR(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const c=this.updateCredentialCacheKey(o,s);return void this.addTokenKey(c,V.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`)}}}if(this.isAccountKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);s&&Xe.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,t)}getCachedAccountEntity(e){const t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(t);return r&&Xe.isAccountEntity(r)?ls.toObject(new Xe,r):(this.removeAccountKeyFromMap(e),null)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem("msal.account.keys");return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();-1===t.indexOf(e)?(t.push(e),this.setItem("msal.account.keys",JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem("msal.account.keys",JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){var t=()=>super.removeAccount,r=this;return v(function*(){t().call(r,e),r.removeAccountKeyFromMap(e)})()}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,V.ID_TOKEN)}removeAccessToken(e){var t=()=>super.removeAccessToken,r=this;return v(function*(){t().call(r,e),r.removeTokenKey(e,V.ACCESS_TOKEN)})()}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,V.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`msal.token.keys.${this.clientId}`);if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(t){case V.ID_TOKEN:-1===r.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case V.ACCESS_TOKEN:-1===r.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case V.REFRESH_TOKEN:-1===r.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),w(sc)}this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(t){case V.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case V.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case V.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),w(sc)}this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.ID_TOKEN),null;const r=this.validateAndParseJson(t);return r&&UR(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.ID_TOKEN),null)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const t=ss(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,V.ID_TOKEN)}getAccessTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.ACCESS_TOKEN),null;const r=this.validateAndParseJson(t);return r&&FR(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.ACCESS_TOKEN),null)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const t=ss(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,V.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.REFRESH_TOKEN),null;const r=this.validateAndParseJson(t);return r&&HR(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,V.REFRESH_TOKEN),null)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const t=ss(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,V.REFRESH_TOKEN)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function Tq(n,e){return!!e&&0===n.indexOf(Dy)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function Iq({environment:n,clientId:e}){return[Dy,n,e].join(mt.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function Cq(n,e){const t=0===n.indexOf(it.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function wq(n,e){return!!e&&0===n.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",t)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||E.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||E.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(tt.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const o=this.generateCacheKey(tt.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(tt.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(tt.ACTIVE_ACCOUNT);e?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(t,JSON.stringify({homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId})),this.browserStorage.setItem(r,e.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r))}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function Eq(n,e){let t=!1;n&&(t=0===n.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if("localStorage"===this.cacheConfig.cacheLocation){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,t))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}clear(){var e=this;return v(function*(){yield e.removeAllAccounts(),e.removeAppMetadata(),e.temporaryCacheStorage.getKeys().forEach(t=>{(-1!==t.indexOf(E.CACHE_PREFIX)||-1!==t.indexOf(e.clientId))&&e.removeTemporaryItem(t)}),e.browserStorage.getKeys().forEach(t=>{(-1!==t.indexOf(E.CACHE_PREFIX)||-1!==t.indexOf(e.clientId))&&e.browserStorage.removeItem(t)}),e.internalStorage.clear()})()}clearTokensAndKeysWithClaims(e,t){var r=this;return v(function*(){e.addQueueMeasurement(p.ClearTokensAndKeysWithClaims,t);const o=r.getTokenKeys(),i=[];o.accessToken.forEach(s=>{const a=r.getAccessTokenCredential(s);a?.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&i.push(r.removeAccessToken(s))}),yield Promise.all(i),i.length>0&&r.logger.warning(`${i.length} access tokens with claims in the cache keys have been removed from the cache.`)})()}setItemCookie(e,t,r){let o=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;r&&(o+=`expires=${this.getCookieExpirationTime(r)};`),this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){const t=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o];for(;" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return E.EMPTY_STRING}clearMsalCookies(){const e=`${E.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e)){const o=r.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,E.EMPTY_STRING,-1)}getCookieExpirationTime(e){return new Date((new Date).getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):nn.startsWith(e,E.CACHE_PREFIX)||nn.startsWith(e,tt.ADAL_ID_TOKEN)?e:`${E.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=Cn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`authority.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=Cn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`nonce.id_token.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=Cn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`request.state.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const c=this.generateAuthorityKey(e);this.setTemporaryCache(c,r,!1),i?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:i.homeAccountId,type:"home_account_id"}),!0):o&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:o,type:"UPN"}),!0)}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.removeTemporaryItem(this.generateCacheKey("request.redirect")),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||E.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(-1===t.indexOf("request.state"))return;const r=this.temporaryCacheStorage.getItem(t);if(!r)return;const o=dM(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}generateRequestRetriedKey(){return`${E.CACHE_PREFIX}.request.retry.${this.clientId}`}getRequestRetried(){const e=this.generateRequestRetriedKey(),t=this.getTemporaryCache(e);return t?parseInt(t):null}setRequestRetried(){this.logger.trace("BrowserCacheManager.setRequestRetried called");const e=this.generateRequestRetriedKey();this.setTemporaryCache(e,"1",!1)}removeRequestRetried(){const e=this.generateRequestRetriedKey();this.removeTemporaryItem(e)}cacheRedirectRequest(e){this.logger.trace("BrowserCacheManager.cacheRedirectRequest called");const{...t}=e;delete t.onRedirectNavigate;const r=JSON.stringify(t);this.setTemporaryCache("request.redirect",r,!0)}getCachedRedirectRequest(){this.logger.trace("BrowserCacheManager.getCachedRedirectRequest called");const e=this.getTemporaryCache("request.redirect",!0);if(e){let t;this.removeTemporaryItem(this.generateCacheKey("request.redirect"));try{t=JSON.parse(e)}catch(r){return this.logger.errorPii(`Attempted to parse: ${e}`),void this.logger.error(`Parsing cached redirect request threw with error: ${r}`)}if(t)return t}else this.logger.error("No cached redirect request found.")}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=vv(JSON.stringify(e));this.setTemporaryCache("request.params",t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache("request.params",!0);if(!t)throw P(Xd);let r;try{r=JSON.parse(Vn(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),P(eh)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw P(uc);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){return this.getTemporaryCache(`${E.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(e){const t=`${E.CACHE_PREFIX}.interaction.status`;if(e){if(this.getInteractionInProgress())throw P(zd);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(tt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(tt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(tt.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(tt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=t||e;if(r){const o=bo(r,Vn);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){const r=ss(t);if(e!==r){const o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){var r=this;return v(function*(){const o=vh(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;t.claims&&(i=yield r.cryptoImpl.hashString(t.claims));const s=Ch(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Vn,void 0,e.tokenType,void 0,t.sshKid,t.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s})})()}saveCacheRecord(e,t,r){var o=()=>super.saveCacheRecord,i=this;return v(function*(){try{yield o().call(i,e,t,r)}catch(s){if(s instanceof cs&&i.performanceClient&&r)try{const a=i.getTokenKeys();i.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},r)}catch{}throw s}})()}}class TK{constructor(e,t){this.eventCallbacks=new Map,this.logger=e,this.browserCrypto=t,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(e){if(typeof window<"u"){const t=pr();return this.eventCallbacks.set(t,e),this.logger.verbose(`Event callback registered with id: ${t}`),t}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(e,t,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${e}`),this.eventCallbacks.forEach((s,a)=>{this.logger.verbose(`Emitting event to callback ${a}: ${e}`),s.apply(null,[i])})}}handleAccountCacheChange(e){try{e.key?.includes(tt.ACTIVE_ACCOUNT_FILTERS)&&this.emitEvent("msal:activeAccountChanged");const t=e.newValue||e.oldValue;if(!t)return;const r=JSON.parse(t);if("object"!=typeof r||!Xe.isAccountEntity(r))return;const i=ls.toObject(new Xe,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent("msal:accountAdded",void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent("msal:accountRemoved",void 0,i))}catch{return}}}class En extends Pe{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,En.prototype)}}class $n{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,t){const r=$n.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now())return void e.removeItem(r);throw new En(o.errorCodes?.join(" ")||E.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if($n.checkResponseStatus(r)||$n.checkResponseForRetryAfter(r)){const o={throttleTime:$n.calculateThrottleTime(parseInt(r.headers["Retry-After"])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache($n.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty("Retry-After")&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||60),r+3600))}static removeThrottle(e,t,r,o){const s=this.generateThrottlingStorageKey({clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid});e.removeItem(s)}}class wK{constructor(e,t){this.networkClient=e,this.cacheManager=t}sendPostRequest(e,t,r){var o=this;return v(function*(){let i;$n.preProcess(o.cacheManager,e);try{i=yield o.networkClient.sendPostRequestAsync(t,r)}catch(s){throw s instanceof Pe?s:w(wd)}return $n.postProcess(o.cacheManager,e,i),i})()}}const hs="client_id",hM="response_type",fM="token_type",pM="req_cnf",gM="return_spa_code";class fs{static validateRedirectUri(e){if(!e)throw ve(ad)}static validatePrompt(e){const t=[];for(const r in nt)t.push(nt[r]);if(t.indexOf(e)<0)throw ve(dd)}static validateClaims(e){try{JSON.parse(e)}catch{throw ve(Ya)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw ve(Qa);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([vR.PLAIN,vR.S256].indexOf(e)<0)throw ve(pd)}}class mc{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(hM,encodeURIComponent(E.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(hM,encodeURIComponent(`${E.TOKEN_RESPONSE_TYPE} ${E.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||xz.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,t=!0,r=Ji){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new Be(o);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(hs,encodeURIComponent(e))}addRedirectUri(e){fs.validateRedirectUri(e),this.parameters.set("redirect_uri",encodeURIComponent(e))}addPostLogoutRedirectUri(e){fs.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const r=this.addClientCapabilitiesToClaims(e,t);fs.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){fs.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(fs.validateCodeChallengeParams(e,t),!e||!t)throw ve(Qa);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(e)try{r=JSON.parse(e)}catch{throw ve(Ya)}else r={};return t&&t.length>0&&(r.hasOwnProperty("access_token")||(r.access_token={}),r.access_token.xms_cc={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(fM,ge.POP),this.parameters.set(pM,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(fM,ge.SSH),this.parameters.set(pM,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),e.join("&")}}function mM(n,e,t,r,o,i,s){return kv.apply(this,arguments)}function kv(){return(kv=v(function*(n,e,t,r,o,i,s){s?.addQueueMeasurement(p.AuthorityFactoryCreateDiscoveredInstance,i);const a=yt.transformCIAMAuthority(aM(n)),c=new yt(a,e,t,r,o,i,s);try{return yield D(c.resolveEndpointsAsync.bind(c),p.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw w(gn)}})).apply(this,arguments)}class Ov{constructor(e,t){this.config=function Pq({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const f={...Dq,...t};return{authOptions:xq(n),systemOptions:{...WR,...e},loggerOptions:f,cacheOptions:{...bq,...r},storageInterface:o||new Aq(n.clientId,yh,new Do(f)),networkInterface:i||Rq,cryptoInterface:s||yh,clientCredentials:a||Nq,libraryInfo:{...Mq,...c},telemetry:{...Oq,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new Do(this.config.loggerOptions,PR,ov),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new wK(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t["Content-Type"]=E.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=as(e.credential);t["X-AnchorMailbox"]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":t["X-AnchorMailbox"]=`UPN: ${e.credential}`}return t}executePostToTokenEndpoint(e,t,r,o,i,s){var a=this;return v(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.networkManager.sendPostRequest(o,e,{body:t,headers:r});return a.performanceClient?.addFields({refreshTokenSize:c.body.refresh_token?.length||0,httpVerToken:c.headers?.["x-ms-httpver"]||""},i),a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}updateAuthority(e,t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.UpdateTokenEndpointAuthority,t);const o=`https://${e}/${r.authority.tenant}/`,i=yield mM(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,t,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const t=new mc;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}}class ps{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.PopTokenGenerateCnf,e.correlationId);const o=yield D(r.generateKid.bind(r),p.PopTokenGenerateCnf,t,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var t=this;return v(function*(){return t.performanceClient?.addQueueMeasurement(p.PopTokenGenerateKid,e.correlationId),{kid:yield t.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,t,r){var o=this;return v(function*(){return o.signPayload(e,t,r)})()}signPayload(e,t,r,o){var i=this;return v(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=r,h=(a?new oe(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:jn(),m:s?.toUpperCase(),u:h?.HostNameAndPort,nonce:l||i.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:c||void 0,...o},t,u,r.correlationId)})()}}class l3{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Mo{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw w(ts,e.state?"Cached State":"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw w(Gr,e.state)}try{o=decodeURIComponent(t)}catch{throw w(Gr,e.state)}if(r!==o)throw w(Ad);if(e.error||e.error_description||e.suberror){const i=function u3(n){const t=n.error_uri?.lastIndexOf("code=");return t&&t>=0?n.error_uri?.substring(t+5):void 0}(e);throw lM(e.error,e.error_description,e.suberror)?new vn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new En(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||E.NOT_AVAILABLE} - Timestamp: ${e.timestamp||E.NOT_AVAILABLE} - Description: ${e.error_description||E.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||E.NOT_AVAILABLE} - Trace ID: ${e.trace_id||E.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new En(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw lM(e.error,e.error_description,e.suberror)?new vn(e.error,e.error_description,e.suberror,e.timestamp||E.EMPTY_STRING,e.trace_id||E.EMPTY_STRING,e.correlation_id||E.EMPTY_STRING,e.claims||E.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){var u=this;return v(function*(){let d,h;if(u.performanceClient?.addQueueMeasurement(p.HandleServerTokenResponse,e.correlation_id),e.id_token){if(d=bo(e.id_token||E.EMPTY_STRING,u.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw w(Dd);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw w(ec);xR(m,o.maxAge)}}u.homeAccountIdentifier=Xe.generateHomeAccountId(e.client_info||E.EMPTY_STRING,t.authorityType,u.logger,u.cryptoObj,d),i&&i.state&&(h=Cn.parseRequestState(u.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=u.generateCacheRecord(e,t,r,o,d,s,i);let g;try{if(u.persistencePlugin&&u.serializableCache&&(u.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new l3(u.serializableCache,!0),yield u.persistencePlugin.beforeCacheAccess(g)),a&&!c&&f.account){const m=f.account.generateAccountKey();if(!u.cacheStorage.getAccount(m,u.logger))return u.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield Mo.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,void 0,l)}yield u.cacheStorage.saveCacheRecord(f,o.storeInCache,o.correlationId)}finally{u.persistencePlugin&&u.serializableCache&&g&&(u.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield u.persistencePlugin.afterCacheAccess(g))}return Mo.generateAuthenticationResult(u.cryptoObj,t,f,!1,o,d,h,e,l)})()}generateCacheRecord(e,t,r,o,i,s,a){const c=t.getPreferredCache();if(!c)throw w(rc);const l=VR(i);let u,d;e.id_token&&i&&(u=vh(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=Pv(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const m=e.scope?Be.fromString(e.scope):new Be(o.scopes||[]),y=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,I=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,C=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,b=r+y,x=b+I,H=C&&C>0?r+C:void 0;h=Ch(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",m.printScopes(),b,x,this.cryptoObj.base64Decode,H,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),f=LR(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:f,appMetadata:g}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return v(function*(){let f,g,u=E.EMPTY_STRING,d=[],h=null,m=E.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==ge.POP||i.popKid)u=r.accessToken.secret;else{const b=new ps(e),{secret:x,keyId:H}=r.accessToken;if(!H)throw w(ac);u=yield b.signPopToken(x,H,i)}d=Be.fromString(r.accessToken.target).asArray(),h=new Date(1e3*Number(r.accessToken.expiresOn)),f=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(g=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const y=s?.oid||s?.sub||"",I=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const C=r.account?lv(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:y,tenantId:I,scopes:d,account:C,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:g,correlationId:i.correlationId,requestId:l||E.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||E.EMPTY_STRING,state:a?a.userRequestState:E.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||E.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||E.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function Pv(n,e,t,r,o,i,s,a,c,l,u){u?.verbose("setCachedAccount called");const h=n.getAccountKeys().find(I=>I.startsWith(t));let f=null;h&&(f=n.getAccount(h,u));const g=f||Xe.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},e,r),m=g.tenantProfiles||[],y=a||g.realm;if(y&&!m.find(I=>I.tenantId===y)){const I=cv(t,g.localAccountId,y,o);m.push(I)}return g.tenantProfiles=m,g}function yM(n,e,t){return xv.apply(this,arguments)}function xv(){return(xv=v(function*(n,e,t){return"string"==typeof n?n:n({clientId:e,tokenEndpoint:t})})).apply(this,arguments)}class vM extends Ov{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.GetAuthCodeUrl,e.correlationId);const r=yield D(t.createAuthCodeUrlQueryString.bind(t),p.AuthClientCreateQueryString,t.logger,t.performanceClient,e.correlationId)(e);return oe.appendQueryString(t.authority.authorizationEndpoint,r)})()}acquireToken(e,t){var r=this;return v(function*(){if(r.performanceClient?.addQueueMeasurement(p.AuthClientAcquireToken,e.correlationId),!e.code)throw w(Md);const o=jn(),i=yield D(r.executeTokenRequest.bind(r),p.AuthClientExecuteTokenRequest,r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.["x-ms-request-id"],a=new Mo(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),D(a.handleServerTokenResponse.bind(a),p.HandleServerTokenResponse,r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,t,void 0,void 0,void 0,s)})()}handleFragmentResponse(e,t){if(new Mo(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw w(xd);return e}getLogoutUri(e){if(!e)throw ve(fd);const t=this.createLogoutUrlQueryString(e);return oe.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.AuthClientExecuteTokenRequest,t.correlationId);const o=r.createTokenQueryParameters(t),i=oe.appendQueryString(e.tokenEndpoint,o),s=yield D(r.createTokenRequestBody.bind(r),p.AuthClientCreateTokenRequestBody,r.logger,r.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const u=Ih(t.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${u.uid}${mt.CLIENT_INFO_SEPARATOR}${u.utid}`,type:"home_account_id"}}catch(u){r.logger.verbose("Could not parse client info for CCS Header: "+u)}const c=r.createTokenRequestHeaders(a||t.ccsCredential),l={clientId:t.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return D(r.executePostToTokenEndpoint.bind(r),p.AuthorizationCodeClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,t.correlationId)(i,s,c,l,t.correlationId,p.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.AuthClientCreateTokenRequestBody,e.correlationId);const r=new mc;if(r.addClientId(e.tokenBodyParameters?.[hs]||t.config.authOptions.clientId),t.includeRedirectUri?r.addRedirectUri(e.redirectUri):fs.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,t.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(t.config.libraryInfo),r.addApplicationTelemetry(t.config.telemetry.application),r.addThrottling(),t.serverTelemetryManager&&!fv(t.config)&&r.addServerTelemetry(t.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),t.config.clientCredentials.clientSecret&&r.addClientSecret(t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const s=t.config.clientCredentials.clientAssertion;r.addClientAssertion(yield yM(s.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(s.assertionType)}if(r.addGrantType("authorization_code"),r.addClientInfo(),e.authenticationScheme===ge.POP){const s=new ps(t.cryptoUtils,t.performanceClient);let a;a=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield D(s.generateCnf.bind(s),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,r.addPopToken(a)}else if(e.authenticationScheme===ge.SSH){if(!e.sshJwk)throw ve(es);r.addSshJwk(e.sshJwk)}const o=e.correlationId||t.config.cryptoInterface.createNewGuid();let i;if(r.addCorrelationId(o),(!nn.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,t.config.authOptions.clientCapabilities),e.clientInfo)try{const s=Ih(e.clientInfo,t.cryptoUtils.base64Decode);i={credential:`${s.uid}${mt.CLIENT_INFO_SEPARATOR}${s.utid}`,type:"home_account_id"}}catch(s){t.logger.verbose("Could not parse client info for CCS Header: "+s)}else i=e.ccsCredential;if(t.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case"home_account_id":try{const s=as(i.credential);r.addCcsOid(s)}catch(s){t.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case"UPN":r.addCcsUpn(i.credential)}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[gM])&&r.addExtraQueryParameters({[gM]:"1"}),r.createQueryString()})()}createAuthCodeUrlQueryString(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.AuthClientCreateQueryString,e.correlationId);const r=new mc;r.addClientId(e.extraQueryParameters?.[hs]||t.config.authOptions.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];r.addScopes(o,!0,t.oidcDefaultScopes),r.addRedirectUri(e.redirectUri);const i=e.correlationId||t.config.cryptoInterface.createNewGuid();if(r.addCorrelationId(i),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(t.config.libraryInfo),fv(t.config)||r.addApplicationTelemetry(t.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==nt.SELECT_ACCOUNT)if(e.sid&&e.prompt===nt.NONE)t.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){const s=t.extractAccountSid(e.account);let a=t.extractLoginHint(e.account);if(a&&e.domainHint&&(t.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){t.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(a);try{const c=as(e.account.homeAccountId);r.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===nt.NONE){t.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(s);try{const c=as(e.account.homeAccountId);r.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){t.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{const c=as(e.account.homeAccountId);r.addCcsOid(c)}catch{t.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else t.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,t.config.authOptions.clientCapabilities),e.extraQueryParameters&&r.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===ge.POP)){const s=new ps(t.cryptoUtils);let a;a=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield D(s.generateCnf.bind(s),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,r.addPopToken(a)}return r.createQueryString()})()}createLogoutUrlQueryString(e){const t=new mc;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class yc{constructor(e,t){this.cacheOutcome="0",this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||E.EMPTY_STRING,this.wrapperVer=e.wrapperVer||E.EMPTY_STRING,this.telemetryCacheKey=it.CACHE_KEY+mt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${it.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const o=t.join(it.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(it.VALUE_SEPARATOR);return[it.SCHEMA_VERSION,s,o].join(it.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=yc.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(it.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(it.VALUE_SEPARATOR),i=e.errors.length,a=[i,t<i?it.OVERFLOW_TRUE:it.OVERFLOW_FALSE].join(it.VALUE_SEPARATOR);return[it.SCHEMA_VERSION,e.cacheHits,r,o,a].join(it.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=it.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?t.errors.push(e instanceof Pe?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):t.errors.push(it.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=yc.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const a=e.failedRequests[2*t+1]||E.EMPTY_STRING,c=e.errors[t]||E.EMPTY_STRING;if(o+=(e.failedRequests[2*t]||E.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<it.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||E.EMPTY_STRING),e.push(this.regionSource||E.EMPTY_STRING),e.push(this.regionOutcome||E.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return function d3(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,l)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function h3(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join("|"))}({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class IM{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||pr(),this.logger=o.clone(bt.MSAL_SKU,Sh,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){var t=this;return v(function*(){if(e){Xe.accountInfoIsEqual(e,t.browserStorage.getActiveAccount(),!1)&&(t.logger.verbose("Setting active account to null"),t.browserStorage.setActiveAccount(null));try{yield t.browserStorage.removeAccount(Xe.generateAccountCacheKey(e)),t.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{t.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{t.logger.verbose("No account provided in logout request, clearing all cache items.",t.correlationId),yield t.browserStorage.clear(),yield t.browserCrypto.clearKeystore()}catch{t.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri||hr();return oe.getAbsoluteUrl(t,hr())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new yc(r,this.browserStorage)}getDiscoveredAuthority(e,t,r){var o=this;return v(function*(){o.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetDiscoveredAuthority,o.correlationId);const i={protocolMode:o.config.auth.protocolMode,OIDCOptions:o.config.auth.OIDCOptions,knownAuthorities:o.config.auth.knownAuthorities,cloudDiscoveryMetadata:o.config.auth.cloudDiscoveryMetadata,authorityMetadata:o.config.auth.authorityMetadata,skipAuthorityMetadataCache:o.config.auth.skipAuthorityMetadataCache},a=yt.generateAuthority(e||o.config.auth.authority,t||o.config.auth.azureCloudOptions),c=yield D(mM,p.AuthorityFactoryCreateDiscoveredInstance,o.logger,o.performanceClient,o.correlationId)(a,o.config.system.networkClient,o.browserStorage,i,o.logger,o.correlationId,o.performanceClient);if(r&&!c.isAlias(r.environment))throw ve(Ed);return c})()}}const f3=32;function p3(n,e,t){return Lv.apply(this,arguments)}function Lv(){return(Lv=v(function*(n,e,t){n.addQueueMeasurement(p.GeneratePkceCodes,t);const r=Ro(g3,p.GenerateCodeVerifier,e,n,t)(n,e,t);return{verifier:r,challenge:yield D(m3,p.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t)}})).apply(this,arguments)}function g3(n,e,t){try{const r=new Uint8Array(f3);return Ro(Jq,p.GetRandomValues,e,n,t)(r),Dh(r)}catch{throw P(cc)}}function m3(n,e,t,r){return Fv.apply(this,arguments)}function Fv(){return(Fv=v(function*(n,e,t,r){e.addQueueMeasurement(p.GenerateCodeChallengeFromVerifier,r);try{const o=yield D(oM,p.Sha256Digest,t,e,r)(n,e,r);return Dh(new Uint8Array(o))}catch{throw P(cc)}})).apply(this,arguments)}function Uv(n,e,t,r){return Hv.apply(this,arguments)}function Hv(){return(Hv=v(function*(n,e,t,r){t.addQueueMeasurement(p.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===ge.SSH){if(!n.sshJwk)throw ve(es);if(!n.sshKid)throw ve(yd)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=ge.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&n.claims&&!nn.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield iM(n.claims)),s})).apply(this,arguments)}function y3(n,e,t,r,o){return Bv.apply(this,arguments)}function Bv(){return(Bv=v(function*(n,e,t,r,o){r.addQueueMeasurement(p.InitializeSilentRequest,n.correlationId);const i=yield D(Uv,p.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}})).apply(this,arguments)}class gs extends IM{initializeAuthorizationCodeRequest(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationCodeRequest,t.correlationId);const r=yield D(p3,p.GeneratePkceCodes,t.logger,t.performanceClient,t.correlationId)(t.performanceClient,t.logger,t.correlationId),o={...e,redirectUri:e.redirectUri,code:E.EMPTY_STRING,codeVerifier:r.verifier};return e.codeChallenge=r.challenge,e.codeChallengeMethod=E.S256_CODE_CHALLENGE_METHOD,o})()}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||pr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=oe.getAbsoluteUrl(e.postLogoutRedirectUri,hr())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=oe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,hr())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=oe.getAbsoluteUrl(hr(),hr())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e,t,r,o){var i=this;return v(function*(){i.performanceClient.addQueueMeasurement(p.StandardInteractionClientCreateAuthCodeClient,i.correlationId);const s=yield D(i.getClientConfiguration.bind(i),p.StandardInteractionClientGetClientConfiguration,i.logger,i.performanceClient,i.correlationId)(e,t,r,o);return new vM(s,i.performanceClient)})()}getClientConfiguration(e,t,r,o){var i=this;return v(function*(){i.performanceClient.addQueueMeasurement(p.StandardInteractionClientGetClientConfiguration,i.correlationId);const s=yield D(i.getDiscoveredAuthority.bind(i),p.StandardInteractionClientGetDiscoveredAuthority,i.logger,i.performanceClient,i.correlationId)(t,r,o),a=i.config.system.loggerOptions;return{authOptions:{clientId:i.config.auth.clientId,authority:s,clientCapabilities:i.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:i.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:a.loggerCallback,piiLoggingEnabled:a.piiLoggingEnabled,logLevel:a.logLevel,correlationId:i.correlationId},cacheOptions:{claimsBasedCachingEnabled:i.config.cache.claimsBasedCachingEnabled},cryptoInterface:i.browserCrypto,networkInterface:i.networkClient,storageInterface:i.browserStorage,serverTelemetryManager:e,libraryInfo:{sku:bt.MSAL_SKU,version:Sh,cpu:E.EMPTY_STRING,os:E.EMPTY_STRING},telemetry:i.config.telemetry}})()}initializeAuthorizationRequest(e,t){var r=this;return v(function*(){r.performanceClient.addQueueMeasurement(p.StandardInteractionClientInitializeAuthorizationRequest,r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Cn.setRequestState(r.browserCrypto,e&&e.state||E.EMPTY_STRING,{interactionType:t}),c={...yield D(Uv,p.InitializeBaseRequest,r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||pr(),responseMode:r.config.auth.OIDCOptions.serverResponseType},l=e.account||r.browserStorage.getActiveAccount();if(l&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,r.correlationId),c.account=l),!c.loginHint&&!l){const u=r.browserStorage.getLegacyLoginHint();u&&(c.loginHint=u)}return c})()}}const TM="user_switch",A3={[TM]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Gn extends Pe{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,Gn.prototype),this.name="NativeAuthError",this.ext=r}}function ms(n){return!!(n.ext&&n.ext.status&&("PERSISTENT_ERROR"===n.ext.status||"DISABLED"===n.ext.status)||n.ext&&n.ext.error&&-2147186943===n.ext.error)||"ContentError"===n.errorCode}function jv(n,e,t){if(t&&t.status)switch(t.status){case"ACCOUNT_UNAVAILABLE":return Mv(bh);case"USER_INTERACTION_REQUIRED":return new vn(n,e);case"USER_CANCEL":return P(ur);case"NO_NETWORK":return P(os)}return new Gn(n,A3[n]||e,t)}class Vv extends Ov{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireToken,e.correlationId);const r=jn(),o=yield D(t.executeTokenRequest.bind(t),p.RefreshTokenClientExecuteTokenRequest,t.logger,t.performanceClient,e.correlationId)(e,t.authority),i=o.headers?.["x-ms-request-id"],s=new Mo(t.config.authOptions.clientId,t.cacheManager,t.cryptoUtils,t.logger,t.config.serializableCache,t.config.persistencePlugin);return s.validateTokenResponse(o.body),D(s.handleServerTokenResponse.bind(s),p.HandleServerTokenResponse,t.logger,t.performanceClient,e.correlationId)(o.body,t.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var t=this;return v(function*(){if(!e)throw ve(hd);if(t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw w(nc);if(t.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield D(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof vn&&o.errorCode===us||o instanceof En&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return D(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1);throw o}return D(t.acquireTokenWithCachedRefreshToken.bind(t),p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,t.logger,t.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=Ro(r.cacheManager.getRefreshToken.bind(r.cacheManager),p.CacheManagerGetRefreshToken,r.logger,r.performanceClient,e.correlationId)(e.account,t,void 0,r.performanceClient,e.correlationId);if(!o)throw Mv(us);if(o.expiresOn&&iv(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw Mv(Rv);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||ge.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield D(r.acquireToken.bind(r),p.RefreshTokenClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof vn&&s.subError===ds){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=ss(o);r.cacheManager.removeRefreshToken(a)}throw s}})()}executeTokenRequest(e,t){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(p.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=r.createTokenQueryParameters(e),i=oe.appendQueryString(t.tokenEndpoint,o),s=yield D(r.createTokenRequestBody.bind(r),p.RefreshTokenClientCreateTokenRequestBody,r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c={clientId:e.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return D(r.executePostToTokenEndpoint.bind(r),p.RefreshTokenClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,p.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const r=e.correlationId,o=new mc;if(o.addClientId(e.tokenBodyParameters?.[hs]||t.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,t.config.authOptions.authority.options.OIDCOptions?.defaultScopes),o.addGrantType("refresh_token"),o.addClientInfo(),o.addLibraryInfo(t.config.libraryInfo),o.addApplicationTelemetry(t.config.telemetry.application),o.addThrottling(),t.serverTelemetryManager&&!fv(t.config)&&o.addServerTelemetry(t.serverTelemetryManager),o.addCorrelationId(r),o.addRefreshToken(e.refreshToken),t.config.clientCredentials.clientSecret&&o.addClientSecret(t.config.clientCredentials.clientSecret),t.config.clientCredentials.clientAssertion){const i=t.config.clientCredentials.clientAssertion;o.addClientAssertion(yield yM(i.assertion,t.config.authOptions.clientId,e.resourceRequestUri)),o.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===ge.POP){const i=new ps(t.cryptoUtils,t.performanceClient);let s;s=e.popKid?t.cryptoUtils.encodeKid(e.popKid):(yield D(i.generateCnf.bind(i),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(e,t.logger)).reqCnfString,o.addPopToken(s)}else if(e.authenticationScheme===ge.SSH){if(!e.sshJwk)throw ve(es);o.addSshJwk(e.sshJwk)}if((!nn.isEmptyObj(e.claims)||t.config.authOptions.clientCapabilities&&t.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,t.config.authOptions.clientCapabilities),t.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{const i=as(e.ccsCredential.credential);o.addCcsOid(i)}catch(i){t.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":o.addCcsUpn(e.ccsCredential.credential)}return e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()})()}}class b3 extends Ov{constructor(e,t){super(e,t)}acquireToken(e){var t=this;return v(function*(){try{const[r,o]=yield t.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Ji]});return"4"===o&&(t.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Vv(t.config,t.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof Ud&&r.errorCode===mn)return new Vv(t.config,t.performanceClient).acquireTokenByRefreshToken(e);throw r}})()}acquireCachedToken(e){var t=this;return v(function*(){t.performanceClient?.addQueueMeasurement(p.SilentFlowClientAcquireCachedToken,e.correlationId);let r="0";if(e.forceRefresh||!t.config.cacheOptions.claimsBasedCachingEnabled&&!nn.isEmptyObj(e.claims))throw t.setCacheOutcome("1",e.correlationId),w(mn);if(!e.account)throw w(nc);const o=e.account.tenantId||function cK(n){const r=new oe(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=t.cacheManager.getTokenKeys(),s=t.cacheManager.getAccessToken(e.account,e,i,o,t.performanceClient,e.correlationId);if(!s)throw t.setCacheOutcome("2",e.correlationId),w(mn);if(function fq(n){return Number(n)>jn()}(s.cachedAt)||iv(s.expiresOn,t.config.systemOptions.tokenRenewalOffsetSeconds))throw t.setCacheOutcome("3",e.correlationId),w(mn);s.refreshOn&&iv(s.refreshOn,0)&&(r="4");const a=e.authority||t.authority.getPreferredCache(),c={account:t.cacheManager.readAccountFromCache(e.account),accessToken:s,idToken:t.cacheManager.getIdToken(e.account,i,o,t.performanceClient,e.correlationId),refreshToken:null,appMetadata:t.cacheManager.readAppMetadataFromCache(a)};return t.setCacheOutcome(r,e.correlationId),t.config.serverTelemetryManager&&t.config.serverTelemetryManager.incrementCacheHits(),[yield D(t.generateResultFromCacheRecord.bind(t),p.SilentFlowClientGenerateResultFromCacheRecord,t.logger,t.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){var r=this;return v(function*(){let o;if(r.performanceClient?.addQueueMeasurement(p.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId),e.idToken&&(o=bo(e.idToken.secret,r.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const i=o?.auth_time;if(!i)throw w(ec);xR(i,t.maxAge)}return Mo.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,t,o)})()}}class wM extends gs{acquireToken(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.SilentCacheClientAcquireToken,e.correlationId);const r=t.initializeServerTelemetryManager(61),o=yield D(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,t.correlationId)(r,e.authority,e.azureCloudOptions,e.account),i=new b3(o,t.performanceClient);t.logger.verbose("Silent auth client created");try{const a=(yield D(i.acquireCachedToken.bind(i),p.SilentFlowClientAcquireCachedToken,t.logger,t.performanceClient,e.correlationId)(e))[0];return t.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof gc&&s.errorCode===fc&&t.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}}class ys extends IM{constructor(e,t,r,o,i,s,a,c,l,u,d,h){super(e,t,r,o,i,s,c,l,h),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new wM(e,this.nativeStorageManager,r,o,i,s,c,l,h),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const f="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=yc.makeExtraSkuString({libraryName:bt.MSAL_SKU,libraryVersion:Sh,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),t.logger.trace("NativeInteractionClient - acquireToken called.");const r=t.performanceClient.startMeasurement(p.NativeInteractionClientAcquireToken,e.correlationId),o=jn();try{const i=yield t.initializeNativeRequest(e);try{const u=yield t.acquireTokensFromCache(t.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{t.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=i,a={method:"GetToken",request:s},c=yield t.nativeMessageHandler.sendMessage(a),l=t.validateNativeResponse(c);return yield t.handleNativeResponse(l,i,o).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),t.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(i){throw i instanceof Gn&&t.serverTelemetryManager.setNativeBrokerErrorCode(i.errorCode),i}})()}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Be.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){var r=this;return v(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),w(oc);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!o)throw w(oc);try{const i=r.createSilentCacheRequest(t,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,t){var r=this;return v(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o),s={method:"GetToken",request:i};try{const l=yield r.nativeMessageHandler.sendMessage(s);r.validateNativeResponse(l)}catch(l){if(l instanceof Gn&&(r.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),ms(l)))throw l}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const a={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},c=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);t.end({success:!0}),yield r.navigationClient.navigateExternal(c,a)})()}handleRedirectPromise(e,t){var r=this;return v(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a={method:"GetToken",request:s},c=jn();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const l=yield r.nativeMessageHandler.sendMessage(a);r.validateNativeResponse(l);const u=r.handleNativeResponse(l,s,c);r.browserStorage.setInteractionInProgress(!1);const d=yield u;return r.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw r.browserStorage.setInteractionInProgress(!1),l}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){var o=this;return v(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=bo(e.id_token,Vn),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(s!==a&&e.account.id!==t.accountId)throw jv(TM);const c=yield o.getDiscoveredAuthority(t.authority),l=Pv(o.browserStorage,c,s,Vn,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger),u=yield o.generateAuthenticationResult(e,t,i,l,c.canonicalAuthority,r);return o.cacheAccount(l),o.cacheNativeTokens(e,t,s,i,e.access_token,u.tenantId,r),u})()}createHomeAccountIdentifier(e,t){return Xe.generateHomeAccountId(e.client_info||E.EMPTY_STRING,0,this.logger,this.browserCrypto,t)}generateScopes(e,t){return Be.fromString(e.scope?e.scope:t.scope)}generatePopAccessToken(e,t){var r=this;return v(function*(){if(t.tokenType===ge.POP&&t.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new ps(r.browserCrypto),i={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw w(ac);return o.signPopToken(e.access_token,t.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,t,r,o,i,s){var a=this;return v(function*(){const c=a.addTelemetryFromNativeResponse(e),l=Be.fromString(e.scope?e.scope:t.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||E.EMPTY_STRING,h=u.TenantId||r.tid||E.EMPTY_STRING,f=lv(o.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const g=yield a.generatePopAccessToken(e,t),m=t.tokenType===ge.POP?ge.POP:ge.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:l.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:new Date(1e3*Number(s+e.expires_in)),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){const c=vh(r,t.authority,e.id_token||"",t.clientId,o.tid||""),u=a+(t.tokenType===ge.POP?E.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e,t),h=Ch(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,Vn,void 0,t.tokenType,void 0,t.keyId);this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:h},t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw SR(Ka,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var t=this;return v(function*(){t.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=e.authority||t.config.auth.authority;e.account&&(yield t.getDiscoveredAuthority(r,e.azureCloudOptions,e.account));const o=new oe(r);o.validateAsUri();const{scopes:i,...s}=e,a=new Be(i||[]);a.appendScopes(Ji);const l={...s,accountId:t.accountId,clientId:t.config.auth.clientId,authority:o.urlString,scope:a.printScopes(),redirectUri:t.getRedirectUri(e.redirectUri),prompt:(()=>{switch(t.apiId){case 863:case 61:return t.logger.trace("initializeNativeRequest: silent request sets prompt to none"),nt.NONE}if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:return t.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw t.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),P(dh)}else t.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:t.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(l.signPopToken&&e.popKid)throw P(fh);if(t.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry="MATS",e.authenticationScheme===ge.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new ps(t.browserCrypto);let h;if(l.keyId)h=t.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{const f=yield D(d.generateCnf.bind(d),p.PopTokenGenerateCnf,t.logger,t.performanceClient,e.correlationId)(u,t.logger);h=f.reqCnfString,l.keyId=f.kid,l.signPopToken=!0}l.reqCnf=h}return t.addRequestSKUs(l),l})()}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty("brk_client_id")&&e.extraParameters.hasOwnProperty("brk_redirect_uri")&&e.extraParameters.hasOwnProperty(hs)){const o=e.extraParameters.brk_redirect_uri;e.extraParameters={child_client_id:e.extraParameters[hs],child_redirect_uri:e.redirectUri},e.redirectUri=o}}}class zn{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(p.NativeMessageHandlerHandshake)}sendMessage(e){var t=this;return v(function*(){t.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:Xi_CHANNEL_ID,extensionId:t.extensionId,responseId:pr(),body:e};return t.logger.trace("NativeMessageHandler - Sending request to browser extension"),t.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),t.messageChannel.port1.postMessage(r),new Promise((o,i)=>{t.resolvers.set(r.responseId,{resolve:o,reject:i})})})()}static createProvider(e,t,r){return v(function*(){e.trace("NativeMessageHandler - createProvider called.");try{const o=new zn(e,t,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new zn(e,t,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return v(function*(){e.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const t={channel:Xi_CHANNEL_ID,extensionId:e.extensionId,responseId:pr(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(t,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(t.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(P(ch)),e.handshakeResolvers.delete(t.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Xi_CHANNEL_ID&&(!t.extensionId||t.extensionId===this.extensionId)&&"Handshake"===t.body.method){const r=this.handshakeResolvers.get(t.responseId);if(!r)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(P(lh))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if("Response"===i){if(!r)return;const s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(jv(s.code,s.description,s.ext));else{if(!s.result)throw SR(Ka,"Event does not contain result.");s.result.code&&s.result.description?r.reject(jv(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(t.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case ge.BEARER:case ge.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Gv{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){var r=this;return v(function*(){let o;r.performanceClient.addQueueMeasurement(p.HandleCodeResponse,t.correlationId);try{o=r.authModule.handleFragmentResponse(e,t.state)}catch(i){throw i instanceof En&&i.subError===ur?P(ur):i}return D(r.handleCodeResponseFromServer.bind(r),p.HandleCodeResponseFromServer,r.logger,r.performanceClient,t.correlationId)(o,t)})()}handleCodeResponseFromServer(e,t,r=!0){var o=this;return v(function*(){if(o.performanceClient.addQueueMeasurement(p.HandleCodeResponseFromServer,t.correlationId),o.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),o.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield D(o.authModule.updateAuthority.bind(o.authModule),p.UpdateTokenEndpointAuthority,o.logger,o.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)o.authCodeRequest.clientInfo=e.client_info;else{const s=o.createCcsCredentials(t);s&&(o.authCodeRequest.ccsCredential=s)}return yield D(o.authModule.acquireToken.bind(o.authModule),p.AuthClientAcquireToken,o.logger,o.performanceClient,t.correlationId)(o.authCodeRequest,e)})()}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}function _M(n,e,t){const r=Hd(n);if(!r)throw DR(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),P(Vd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),P(jd));return r}class M3 extends gs{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const t=this.generatePopupName(e.scopes||Ji,e.authority||this.config.auth.authority),r=e.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,t,r);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const o=this.openSizedPopup("about:blank",t,r);return this.acquireTokenPopupAsync(e,t,r,o)}}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r=this.generateLogoutPopupName(t),o=e&&e.authority,i=e&&e.mainWindowRedirectUri,s=e?.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,s,o,void 0,i);{this.logger.verbose("asyncPopup set to false, opening popup");const a=this.openSizedPopup("about:blank",r,s);return this.logoutPopupAsync(t,r,s,o,a,i)}}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r,o){var i=this;return v(function*(){i.logger.verbose("acquireTokenPopupAsync called");const s=i.initializeServerTelemetryManager(862),a=yield D(i.initializeAuthorizationRequest.bind(i),p.StandardInteractionClientInitializeAuthorizationRequest,i.logger,i.performanceClient,i.correlationId)(e,k.Popup);let c;NR(a.authority);try{const l=yield D(i.initializeAuthorizationCodeRequest.bind(i),p.StandardInteractionClientInitializeAuthorizationCodeRequest,i.logger,i.performanceClient,i.correlationId)(a);return c=yield D(i.createAuthCodeClient.bind(i),p.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)(s,a.authority,a.azureCloudOptions,a.account),yield D(i.acquireTokenPopupAsyncHelper.bind(i),p.PopupClientTokenHelper,i.logger,i.performanceClient,i.correlationId)(c,l,a,e,t,r,o)}catch(l){if(o&&o.close(),l instanceof Pe&&(l.setCorrelationId(i.correlationId),s.cacheFailedRequest(l)),!(c&&l instanceof En&&l.errorCode===bt.INVALID_GRANT_ERROR))throw l;i.performanceClient.addFields({retryError:l.errorCode},i.correlationId);const u=yield D(i.initializeAuthorizationCodeRequest.bind(i),p.StandardInteractionClientInitializeAuthorizationCodeRequest,i.logger,i.performanceClient,i.correlationId)(a);return yield D(i.acquireTokenPopupAsyncHelper.bind(i),p.PopupClientTokenHelper,i.logger,i.performanceClient,i.correlationId)(c,u,a,e,t,r,o)}})()}acquireTokenPopupAsyncHelper(e,t,r,o,i,s,a){var c=this;return v(function*(){c.performanceClient.addQueueMeasurement(p.PopupClientTokenHelper,r.correlationId);const u=zn.isNativeAvailable(c.config,c.logger,c.nativeMessageHandler,o.authenticationScheme);let d;u&&(d=c.performanceClient.startMeasurement(p.FetchAccountIdWithNativeBroker,o.correlationId));const h=yield e.getAuthCodeUrl({...r,nativeBroker:u}),f=new Gv(e,c.browserStorage,t,c.logger,c.performanceClient),m=c.initiateAuthRequest(h,{popup:a,popupName:i,popupWindowAttributes:s});c.eventHandler.emitEvent("msal:popupOpened",k.Popup,{popupWindow:m},null);const y=yield c.monitorPopupForHash(m),I=Ro(_M,p.DeserializeResponse,c.logger,c.performanceClient,c.correlationId)(y,c.config.auth.OIDCOptions.serverResponseType,c.logger);if($n.removeThrottle(c.browserStorage,c.config.auth.clientId,t),I.accountId){if(c.logger.verbose("Account id found in hash, calling WAM for token"),d&&d.end({success:!0,isNativeBroker:!0}),!c.nativeMessageHandler)throw P(Ao);const b=new ys(c.config,c.browserStorage,c.browserCrypto,c.logger,c.eventHandler,c.navigationClient,862,c.performanceClient,c.nativeMessageHandler,I.accountId,c.nativeStorage,r.correlationId),{userRequestState:x}=Cn.parseRequestState(c.browserCrypto,r.state);return b.acquireToken({...r,state:x,prompt:void 0})}return yield f.handleCodeResponse(I,r)})()}logoutPopupAsync(e,t,r,o,i,s){var a=this;return v(function*(){a.logger.verbose("logoutPopupAsync called"),a.eventHandler.emitEvent("msal:logoutStart",k.Popup,e);const c=a.initializeServerTelemetryManager(962);try{yield a.clearCacheOnLogout(e.account);const u=(yield D(a.createAuthCodeClient.bind(a),p.StandardInteractionClientCreateAuthCodeClient,a.logger,a.performanceClient,a.correlationId)(c,o,void 0,e.account||void 0)).getLogoutUri(e);a.eventHandler.emitEvent("msal:logoutSuccess",k.Popup,e);const d=a.openPopup(u,{popupName:t,popupWindowAttributes:r,popup:i});if(a.eventHandler.emitEvent("msal:popupOpened",k.Popup,{popupWindow:d},null),yield a.monitorPopupForHash(d).catch(()=>{}),s){const h={apiId:962,timeout:a.config.system.redirectNavigationTimeout,noHistory:!1},f=oe.getAbsoluteUrl(s,hr());a.logger.verbose("Redirecting main window to url specified in the request"),a.logger.verbosePii(`Redirecting main window to: ${f}`),yield a.navigationClient.navigateInternal(f,h)}else a.logger.verbose("No main window navigation requested")}catch(l){throw i&&i.close(),l instanceof Pe&&(l.setCorrelationId(a.correlationId),c.cacheFailedRequest(l)),a.browserStorage.setInteractionInProgress(!1),a.eventHandler.emitEvent("msal:logoutFailure",k.Popup,null,l),a.eventHandler.emitEvent("msal:logoutEnd",k.Popup),l}a.eventHandler.emitEvent("msal:logoutEnd",k.Popup)})()}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),P(ns)}monitorPopupForHash(e){return new Promise((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const o=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(o),void r(P(ur));let i="";try{i=e.location.href}catch{}if(!i||"about:blank"===i)return;clearInterval(o);let s="";e&&(s=this.config.auth.OIDCOptions.serverResponseType===Ga.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(s)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t.popupName,t.popupWindowAttributes)),!r)throw P(Kd);return r.focus&&r.focus(),this.currentWindow=r,window.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),P(qd)}}openSizedPopup(e,t,r){const o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let c=r.popupSize?.width,l=r.popupSize?.height,u=r.popupPosition?.top,d=r.popupPosition?.left;return(!c||c<0||c>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=bt.POPUP_WIDTH),(!l||l<0||l>a)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=bt.POPUP_HEIGHT),(!u||u<0||u>a)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),u=Math.max(0,a/2-bt.POPUP_HEIGHT/2+i)),(!d||d<0||d>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),d=Math.max(0,s/2-bt.POPUP_WIDTH/2+o)),window.open(e,t,`width=${c}, height=${l}, top=${u}, left=${d}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(k.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e){e&&e.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${bt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){return`${bt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class SM{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,t){var r=this;return v(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(r.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),r.browserStorage.setTemporaryCache("request.origin",t.redirectStartPage,!0)),r.browserStorage.setTemporaryCache("request.correlationId",r.authCodeRequest.correlationId,!0),r.browserStorage.cacheCodeRequest(r.authCodeRequest),r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:t.redirectTimeout,noHistory:!1};return"function"==typeof t.onRedirectNavigate?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==t.onRedirectNavigate(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield t.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield t.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),P(ns)})()}handleCodeResponse(e,t){var r=this;return v(function*(){r.logger.verbose("RedirectHandler.handleCodeResponse called"),r.browserStorage.setInteractionInProgress(!1);const o=r.browserStorage.generateStateKey(t),i=r.browserStorage.getTemporaryCache(o);if(!i)throw w(ts,"Cached State");let s;try{s=r.authModule.handleFragmentResponse(e,i)}catch(u){throw u instanceof En&&u.subError===ur?P(ur):u}const a=r.browserStorage.generateNonceKey(i),c=r.browserStorage.getTemporaryCache(a);if(r.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield D(r.authModule.updateAuthority.bind(r.authModule),p.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,r.authCodeRequest.correlationId)(s.cloud_instance_host_name,r.authCodeRequest.correlationId)),s.nonce=c||void 0,s.state=i,s.client_info)r.authCodeRequest.clientInfo=s.client_info;else{const u=r.checkCcsCredentials();u&&(r.authCodeRequest.ccsCredential=u)}const l=yield r.authModule.acquireToken(r.authCodeRequest,s);return r.browserStorage.cleanRequestByState(t),r.browserStorage.removeRequestRetried(),l})()}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class N3 extends gs{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){var t=this;return v(function*(){e.onRedirectNavigate?t.logger.warning("Unable to cache redirect request, onRedirectNavigate request option has been deprecated. Please set onRedirectNavigate on PublicClientApplication config instead."):t.browserStorage.cacheRedirectRequest(e);const r=yield D(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,t.correlationId)(e,k.Redirect);t.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||"",r.account||null);const o=t.initializeServerTelemetryManager(861),i=s=>{s.persisted&&(t.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),t.browserStorage.cleanRequestByState(r.state),t.eventHandler.emitEvent("msal:restoreFromBFCache",k.Redirect))};try{const s=yield D(t.initializeAuthorizationCodeRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationCodeRequest,t.logger,t.performanceClient,t.correlationId)(r),a=yield D(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)(o,r.authority,r.azureCloudOptions,r.account),c=new SM(a,t.browserStorage,s,t.logger,t.performanceClient),l=yield a.getAuthCodeUrl({...r,nativeBroker:zn.isNativeAvailable(t.config,t.logger,t.nativeMessageHandler,e.authenticationScheme)}),u=t.getRedirectStartPage(e.redirectStartPage);return t.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",i),yield c.initiateAuthRequest(l,{navigationClient:t.navigationClient,redirectTimeout:t.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||t.config.auth.onRedirectNavigate})}catch(s){throw s instanceof Pe&&(s.setCorrelationId(t.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),t.browserStorage.cleanRequestByState(r.state),s}})()}handleRedirectPromise(e="",t){var r=this;return v(function*(){const o=r.initializeServerTelemetryManager(865);try{if(!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[i,s]=r.getRedirectResponse(e||"");if(!i)return r.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),r.browserStorage.cleanRequestByInteractionType(k.Redirect),t.event.errorCode="no_server_response",null;const a=r.browserStorage.getTemporaryCache("request.origin",!0)||E.EMPTY_STRING;if(oe.removeHashFromUrl(a)===oe.removeHashFromUrl(window.location.href)&&r.config.auth.navigateToLoginRequestUrl)return r.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function Kz(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(a),yield r.handleResponse(i,o);if(!r.config.auth.navigateToLoginRequestUrl)return r.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield r.handleResponse(i,o);if(!ph()||r.config.system.allowRedirectInIframe){r.browserStorage.setTemporaryCache("urlHash",s,!0);const u={apiId:865,timeout:r.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(a&&"null"!==a)r.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=yield r.navigationClient.navigateInternal(a,u);else{const h=function Yz(){const e=new oe(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();r.browserStorage.setTemporaryCache("request.origin",h,!0),r.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield r.navigationClient.navigateInternal(h,u)}if(!d)return yield r.handleResponse(i,o)}return null}catch(i){if(i instanceof Pe&&(i.setCorrelationId(r.correlationId),o.cacheFailedRequest(i)),i instanceof En&&i.errorCode===bt.INVALID_GRANT_ERROR){if(r.performanceClient.addFields({retryError:i.errorCode},r.correlationId),r.browserStorage.getRequestRetried())throw r.logger.error("Retried request already detected. Throwing error."),r.browserStorage.removeRequestRetried(),i;const a=r.browserStorage.getCachedRedirectRequest();if(!a)throw r.logger.error("Unable to retry. Please retry with redirect request"),r.browserStorage.setRequestRetried(),P(bR);return r.browserStorage.setRequestRetried(),yield r.acquireToken(a),null}throw r.browserStorage.removeTemporaryItem(r.browserStorage.generateCacheKey("request.redirect")),r.browserStorage.removeRequestRetried(),i}finally{r.browserStorage.cleanRequestByInteractionType(k.Redirect)}})()}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===Ga.QUERY?window.location.search:window.location.hash);let r=Hd(t);if(r){try{!function R3(n,e,t){if(!n.state)throw P(lc);const r=dM(e,n.state);if(!r)throw P($d);if(r.interactionType!==t)throw P(Gd)}(r,this.browserCrypto,k.Redirect)}catch(i){return i instanceof Pe&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return function qz(n){n.location.hash="","function"==typeof n.history.replaceState&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=Hd(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t){var r=this;return v(function*(){const o=e.state;if(!o)throw P(lc);const i=r.browserStorage.getCachedRequest(o);if(r.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw P(Ao);const l=new ys(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,e.accountId,r.nativeStorage,i.correlationId),{userRequestState:u}=Cn.parseRequestState(r.browserCrypto,o);return l.acquireToken({...i,state:u,prompt:void 0}).finally(()=>{r.browserStorage.cleanRequestByState(o)})}const s=r.browserStorage.getCachedAuthority(o);if(!s)throw P(uc);const a=yield D(r.createAuthCodeClient.bind(r),p.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)(t,s);return $n.removeThrottle(r.browserStorage,r.config.auth.clientId,i),new SM(a,r.browserStorage,i,r.logger,r.performanceClient).handleCodeResponse(e,o)})()}logout(e){var t=this;return v(function*(){t.logger.verbose("logoutRedirect called");const r=t.initializeLogoutRequest(e),o=t.initializeServerTelemetryManager(961);try{t.eventHandler.emitEvent("msal:logoutStart",k.Redirect,e),yield t.clearCacheOnLogout(r.account);const i={apiId:961,timeout:t.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield D(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,t.correlationId)(o,e&&e.authority,void 0,e&&e.account||void 0)).getLogoutUri(r);if(t.eventHandler.emitEvent("msal:logoutSuccess",k.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0),void(yield t.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return t.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),t.browserStorage.getInteractionInProgress()||t.browserStorage.setInteractionInProgress(!0),void(yield t.navigationClient.navigateExternal(a,i));t.browserStorage.setInteractionInProgress(!1),t.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof Pe&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),t.eventHandler.emitEvent("msal:logoutFailure",k.Redirect,null,i),t.eventHandler.emitEvent("msal:logoutEnd",k.Redirect),i}t.eventHandler.emitEvent("msal:logoutEnd",k.Redirect)})()}getRedirectStartPage(e){const t=e||window.location.href;return oe.getAbsoluteUrl(t,hr())}}function k3(n,e,t,r,o){return zv.apply(this,arguments)}function zv(){return(zv=v(function*(n,e,t,r,o){if(e.addQueueMeasurement(p.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),P(ns);return o?D(P3,p.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ro(x3,p.SilentHandlerLoadFrameSync,t,e,r)(n)})).apply(this,arguments)}function O3(n,e,t,r,o,i,s){return qv.apply(this,arguments)}function qv(){return(qv=v(function*(n,e,t,r,o,i,s){return r.addQueueMeasurement(p.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<pv&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${pv}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(P(Wd))},e),u=window.setInterval(()=>{let d="";const h=n.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||"about:blank"===d)return;let f="";h&&(f=s===Ga.QUERY?h.location.search:h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(f)},t)}).finally(()=>{Ro(L3,p.RemoveHiddenIframe,o,r,i)(n)})})).apply(this,arguments)}function P3(n,e,t,r){return t.addQueueMeasurement(p.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=AM();window.setTimeout(()=>{s?(s.src=n,o(s)):i("Unable to load iframe")},e)})}function x3(n){const e=AM();return e.src=n,e}function AM(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function L3(n){document.body===n.parentNode&&document.body.removeChild(n)}class F3 extends gs{constructor(e,t,r,o,i,s,a,c,l,u,d){super(e,t,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&t.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==nt.NONE&&r.prompt!==nt.NO_SESSION&&(t.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${nt.NONE}`),r.prompt=nt.NONE):r.prompt=nt.NONE;const o=yield D(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,k.Silent);NR(o.authority);const i=t.initializeServerTelemetryManager(t.apiId);let s;try{return s=yield D(t.createAuthCodeClient.bind(t),p.StandardInteractionClientCreateAuthCodeClient,t.logger,t.performanceClient,e.correlationId)(i,o.authority,o.azureCloudOptions,o.account),yield D(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,e.correlationId)(s,o)}catch(a){if(a instanceof Pe&&(a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a)),!(s&&a instanceof En&&a.errorCode===bt.INVALID_GRANT_ERROR))throw a;t.performanceClient.addFields({retryError:a.errorCode},t.correlationId);const c=yield D(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(r,k.Silent);return yield D(t.silentTokenHelper.bind(t),p.SilentIframeClientTokenHelper,t.logger,t.performanceClient,t.correlationId)(s,c)}})()}logout(){return Promise.reject(P(rs))}silentTokenHelper(e,t){var r=this;return v(function*(){const o=t.correlationId;r.performanceClient.addQueueMeasurement(p.SilentIframeClientTokenHelper,o);const i=yield D(r.initializeAuthorizationCodeRequest.bind(r),p.StandardInteractionClientInitializeAuthorizationCodeRequest,r.logger,r.performanceClient,o)(t),s=yield D(e.getAuthCodeUrl.bind(e),p.GetAuthCodeUrl,r.logger,r.performanceClient,o)({...t,nativeBroker:zn.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,t.authenticationScheme)}),a=new Gv(e,r.browserStorage,i,r.logger,r.performanceClient),c=yield D(k3,p.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(s,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait),l=r.config.auth.OIDCOptions.serverResponseType,u=yield D(O3,p.SilentHandlerMonitorIframeForHash,r.logger,r.performanceClient,o)(c,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,l),d=Ro(_M,p.DeserializeResponse,r.logger,r.performanceClient,r.correlationId)(u,l,r.logger);if(d.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw P(Ao);const h=new ys(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,r.apiId,r.performanceClient,r.nativeMessageHandler,d.accountId,r.browserStorage,o),{userRequestState:f}=Cn.parseRequestState(r.browserCrypto,t.state);return D(h.acquireToken.bind(h),p.NativeInteractionClientAcquireToken,r.logger,r.performanceClient,o)({...t,state:f,prompt:t.prompt||nt.NONE})}return D(a.handleCodeResponse.bind(a),p.HandleCodeResponse,r.logger,r.performanceClient,o)(d,t)})()}}class U3 extends gs{acquireToken(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.SilentRefreshClientAcquireToken,e.correlationId);const r=yield D(Uv,p.InitializeBaseRequest,t.logger,t.performanceClient,e.correlationId)(e,t.config,t.performanceClient,t.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=t.getRedirectUri(e.redirectUri));const i=t.initializeServerTelemetryManager(61),s=yield t.createRefreshTokenClient(i,o.authority,o.azureCloudOptions,o.account);return D(s.acquireTokenByRefreshToken.bind(s),p.RefreshTokenClientAcquireTokenByRefreshToken,t.logger,t.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(t.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(P(rs))}createRefreshTokenClient(e,t,r,o){var i=this;return v(function*(){const s=yield D(i.getClientConfiguration.bind(i),p.StandardInteractionClientGetClientConfiguration,i.logger,i.performanceClient,i.correlationId)(e,t,r,o);return new Vv(s,i.performanceClient)})()}}class H3{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw P(dc);const o=t.id_token?bo(t.id_token,Vn):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new yt(yt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||pr()):void 0,a=this.loadAccount(e,r.clientInfo||t.client_info||"",o,s),c=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),l=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,r),u=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:c,accessToken:l,refreshToken:u},o,s)}loadAccount(e,t,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const c=Xe.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),P(rh);const i=Xe.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),s=r?.tid,a=Pv(this.storage,o,i,Vn,r,t,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=vh(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,t,r,o,i,s){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(t.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const a=t.scope?Be.fromString(t.scope):new Be(e.scopes),c=s.expiresOn||t.expires_in+(new Date).getTime()/1e3,l=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,u=Ch(r,o,t.access_token,this.config.auth.clientId,i,a.printScopes(),c,l,Vn);return this.storage.setAccessTokenCredential(u),u}loadRefreshToken(e,t,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=LR(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,t,r,o){let c,i="",s=[],a=null;t?.accessToken&&(i=t.accessToken.secret,s=Be.fromString(t.accessToken.target).asArray(),a=new Date(1e3*Number(t.accessToken.expiresOn)),c=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:l.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class B3 extends vM{constructor(e){super(e),this.includeRedirectUri=!1}}class j3 extends gs{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){var t=this;return v(function*(){if(!e.code)throw P(oh);const r=yield D(t.initializeAuthorizationRequest.bind(t),p.StandardInteractionClientInitializeAuthorizationRequest,t.logger,t.performanceClient,e.correlationId)(e,k.Silent),o=t.initializeServerTelemetryManager(t.apiId);try{const i={...r,code:e.code},s=yield D(t.getClientConfiguration.bind(t),p.StandardInteractionClientGetClientConfiguration,t.logger,t.performanceClient,e.correlationId)(o,r.authority,r.azureCloudOptions,r.account),a=new B3(s);t.logger.verbose("Auth code client created");const c=new Gv(a,t.browserStorage,i,t.logger,t.performanceClient);return yield D(c.handleCodeResponseFromServer.bind(c),p.HandleCodeResponseFromServer,t.logger,t.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof Pe&&(i.setCorrelationId(t.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(P(rs))}}function qn(n){const e=n?.idTokenClaims;return e?.tfp||e?.acr?"B2C":e?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===e?.tid?"MSA":"AAD":void 0}function Mh(n,e){try{Xy(n)}catch(t){throw e.end({success:!1},t),t}}class Nh{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new rK(this.logger,this.performanceClient):yh,this.eventHandler=new TK(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new Nv(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function lK(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw ve(Ja)}return{canonicalAuthority:n.authority?aM(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}(this.config.auth),this.performanceClient):((n,e)=>new Nv(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},yh,this.logger))(),this.nativeInternalStorage=new Nv(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new H3(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return v(function*(){const r=new Nh(e);return yield r.initialize(t),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){var t=this;return v(function*(){if(t.logger.trace("initialize called"),t.initialized)return void t.logger.info("initialize has already been called, exiting early.");const r=e?.correlationId||t.getRequestCorrelationId(),o=t.config.system.allowNativeBroker,i=t.performanceClient.startMeasurement(p.InitializeClientApplication,r);if(t.eventHandler.emitEvent("msal:initializeStart"),o)try{t.nativeExtensionProvider=yield zn.createProvider(t.logger,t.config.system.nativeBrokerHandshakeTimeout,t.performanceClient)}catch(s){t.logger.verbose(s)}t.config.cache.claimsBasedCachingEnabled||(t.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield D(t.browserStorage.clearTokensAndKeysWithClaims.bind(t.browserStorage),p.ClearTokensAndKeysWithClaims,t.logger,t.performanceClient,r)(t.performanceClient,r)),t.initialized=!0,t.eventHandler.emitEvent("msal:initializeEnd"),i.end({allowNativeBroker:o,success:!0})})()}handleRedirectPromise(e){var t=this;return v(function*(){if(t.logger.verbose("handleRedirectPromise called"),RR(t.initialized),t.isBrowserEnvironment){const r=e||"";let o=t.redirectResponse.get(r);return typeof o>"u"?(o=t.handleRedirectPromiseInternal(e),t.redirectResponse.set(r,o),t.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):t.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return t.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var t=this;return v(function*(){const r=t.getAllAccounts(),o=t.browserStorage.getCachedNativeRequest(),i=o&&zn.isNativeAvailable(t.config,t.logger,t.nativeExtensionProvider)&&t.nativeExtensionProvider&&!e,s=i?o?.correlationId:t.browserStorage.getTemporaryCache("request.correlationId",!0)||"",a=t.performanceClient.startMeasurement(p.AcquireTokenRedirect,s);let c;if(t.eventHandler.emitEvent("msal:handleRedirectStart",k.Redirect),i&&t.nativeExtensionProvider){t.logger.trace("handleRedirectPromise - acquiring token from native platform");const l=new ys(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,865,t.performanceClient,t.nativeExtensionProvider,o.accountId,t.nativeInternalStorage,o.correlationId);c=D(l.handleRedirectPromise.bind(l),p.HandleNativeRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(t.performanceClient,a.event.correlationId)}else{t.logger.trace("handleRedirectPromise - acquiring token from web flow");const l=t.createRedirectClient(s);c=D(l.handleRedirectPromise.bind(l),p.HandleRedirectPromiseMeasurement,t.logger,t.performanceClient,a.event.correlationId)(e,a)}return c.then(l=>(l?(r.length<t.getAllAccounts().length?(t.eventHandler.emitEvent("msal:loginSuccess",k.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, login success")):(t.eventHandler.emitEvent("msal:acquireTokenSuccess",k.Redirect,l),t.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:qn(l.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),t.eventHandler.emitEvent("msal:handleRedirectEnd",k.Redirect),l)).catch(l=>{const u=l;throw t.eventHandler.emitEvent(r.length>0?"msal:acquireTokenFailure":"msal:loginFailure",k.Redirect,null,u),t.eventHandler.emitEvent("msal:handleRedirectEnd",k.Redirect),a.end({success:!1},u),l})})()}acquireTokenRedirect(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);t.logger.verbose("acquireTokenRedirect called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenPreRedirect,r);o.add({accountType:qn(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return!1!==c?o.end({success:!0}):o.discard(),c};else{const a=t.config.auth.onRedirectNavigate;t.config.auth.onRedirectNavigate=c=>{const l="function"==typeof a?a(c):void 0;return!1!==l?o.end({success:!0}):o.discard(),l}}const s=t.getAllAccounts().length>0;try{let a;return MR(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0),t.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",k.Redirect,e),a=t.nativeExtensionProvider&&t.canUseNative(e)?new ys(t.config,t.browserStorage,t.browserCrypto,t.logger,t.eventHandler,t.navigationClient,861,t.performanceClient,t.nativeExtensionProvider,t.getNativeAccountId(e),t.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(l=>{if(l instanceof Gn&&ms(l))return t.nativeExtensionProvider=void 0,t.createRedirectClient(r).acquireToken(e);if(l instanceof vn)return t.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),t.createRedirectClient(r).acquireToken(e);throw t.browserStorage.setInteractionInProgress(!1),l}):t.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw o.end({success:!1},a),t.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",k.Redirect,null,a),a}})()}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(p.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:qn(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),Mh(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();let i;return this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenStart":"msal:loginStart",k.Popup,e),i=this.canUseNative(e)?this.acquireTokenNative({...e,correlationId:t},862).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:s.requestId,accountType:qn(s.account)}),s)).catch(s=>{if(s instanceof Gn&&ms(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof vn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",k.Popup,s):this.eventHandler.emitEvent("msal:acquireTokenSuccess",k.Popup,s),r.end({success:!0,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:qn(s.account)}),s)).catch(s=>(this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",k.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return t.ssoSilentMeasurement=t.performanceClient.startMeasurement(p.SsoSilent,r),t.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:qn(e.account)}),Mh(t.initialized,t.ssoSilentMeasurement),t.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),t.logger.verbose("ssoSilent called",r),t.eventHandler.emitEvent("msal:ssoSilentStart",k.Silent,o),i=t.canUseNative(o)?t.acquireTokenNative(o,863).catch(s=>{if(s instanceof Gn&&ms(s))return t.nativeExtensionProvider=void 0,t.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):t.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(t.eventHandler.emitEvent("msal:ssoSilentSuccess",k.Silent,s),t.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:qn(s.account)}),s)).catch(s=>{throw t.eventHandler.emitEvent("msal:ssoSilentFailure",k.Silent,null,s),t.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);t.logger.trace("acquireTokenByCode called",r);const o=t.performanceClient.startMeasurement(p.AcquireTokenByCode,r);Mh(t.initialized,o),t.eventHandler.emitEvent("msal:acquireTokenByCodeStart",k.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw P(sh);if(e.code){const i=e.code;let s=t.hybridAuthCodeResponses.get(i);return s?(t.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(t.logger.verbose("Initiating new acquireTokenByCode request",r),s=t.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(t.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",k.Silent,a),t.hybridAuthCodeResponses.delete(i),o.end({success:!0,isNativeBroker:a.fromNativeBroker,requestId:a.requestId,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:qn(a.account)}),a)).catch(a=>{throw t.hybridAuthCodeResponses.delete(i),t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",k.Silent,null,a),o.end({success:!1},a),a}),t.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(t.canUseNative(e,e.nativeAccountId)){const i=yield t.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof Gn&&ms(s)&&(t.nativeExtensionProvider=void 0),s});return o.end({accountType:qn(i.account),success:!0}),i}throw P(ah)}throw P(ih)}catch(i){throw t.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",k.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var t=this;return v(function*(){return t.logger.trace("acquireTokenByCodeAsync called",e.correlationId),t.acquireTokenByCodeAsyncMeasurement=t.performanceClient.startMeasurement(p.AcquireTokenByCodeAsync,e.correlationId),t.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement),yield t.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(t.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i)).catch(i=>{throw t.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",t.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,t){var r=this;return v(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenFromCache,e.correlationId),t){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return D(o.acquireToken.bind(o),p.SilentCacheClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw w(mn)}})()}acquireTokenByRefreshToken(e,t){var r=this;return v(function*(){switch(r.performanceClient.addQueueMeasurement(p.AcquireTokenByRefreshToken,e.correlationId),t){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return D(o.acquireToken.bind(o),p.SilentRefreshClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw w(mn)}})()}acquireTokenBySilentIframe(e){var t=this;return v(function*(){t.performanceClient.addQueueMeasurement(p.AcquireTokenBySilentIframe,e.correlationId);const r=t.createSilentIframeClient(e.correlationId);return D(r.acquireToken.bind(r),p.SilentIframeClientAcquireToken,t.logger,t.performanceClient,e.correlationId)(e)})()}logout(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);return t.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),t.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);return MR(t.initialized,t.config),t.browserStorage.setInteractionInProgress(!0),t.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Xy(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);return t.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){return function gK(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function mK(n,e,t){if(e.trace("getAccount called"),0===Object.keys(n).length)return e.warning("getAccount: No accountFilter provided"),null;const r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function yK(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function vK(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function CK(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function EK(n,e){e.setActiveAccount(n)}(e,this.browserStorage)}getActiveAccount(){return function IK(n){return n.getActiveAccount()}(this.browserStorage)}hydrateCache(e,t){var r=this;return v(function*(){r.logger.verbose("hydrateCache called");const o=Xe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return r.browserStorage.setAccount(o),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,t)):r.browserStorage.hydrateCache(e,t)})()}acquireTokenNative(e,t,r){var o=this;return v(function*(){if(o.logger.trace("acquireTokenNative called"),!o.nativeExtensionProvider)throw P(Ao);return new ys(o.config,o.browserStorage,o.browserCrypto,o.logger,o.eventHandler,o.navigationClient,t,o.performanceClient,o.nativeExtensionProvider,r||o.getNativeAccountId(e),o.nativeInternalStorage,e.correlationId).acquireToken(e)})()}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!zn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new M3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new N3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new F3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new wM(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new U3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new j3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?pr():E.EMPTY_STRING}loginRedirect(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e);return t.logger.verbose("loginRedirect called",r),t.acquireTokenRedirect({correlationId:r,...e||wR})})()}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||wR})}acquireTokenSilent(e){var t=this;return v(function*(){const r=t.getRequestCorrelationId(e),o=t.performanceClient.startMeasurement(p.AcquireTokenSilent,r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Mh(t.initialized,o),t.logger.verbose("acquireTokenSilent called",r);const i=e.account||t.getActiveAccount();if(!i)throw P(Zd);o.add({accountType:qn(i)});const a=JSON.stringify({clientId:t.config.auth.clientId,authority:e.authority||E.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:i.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions}),c=t.activeSilentTokenRequests.get(a);if(typeof c>"u"){t.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const l=D(t.acquireTokenSilentAsync.bind(t),p.AcquireTokenSilentAsync,t.logger,t.performanceClient,r)({...e,correlationId:r},i).then(u=>(t.activeSilentTokenRequests.delete(a),o.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:u.requestId,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw t.activeSilentTokenRequests.delete(a),o.end({success:!1},u),u});return t.activeSilentTokenRequests.set(a,l),{...yield l,state:e.state}}return t.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discard(),{...yield c,state:e.state}})()}acquireTokenSilentAsync(e,t){var r=this;return v(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement(p.AcquireTokenSilentAsync,e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",k.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield D(y3,p.InitializeSilentRequest,r.logger,r.performanceClient,e.correlationId)(e,t,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=v(function*(l){if(function V3(n,e){const o=!(n instanceof vn&&n.subError!==ds)&&(n.errorCode===bt.INVALID_GRANT_ERROR||n.errorCode===mn)||n.errorCode===us||n.errorCode===Rv,i=Vz.includes(e);return o&&i}(l,s)){if(r.activeIframeRequest){if(5!==s){const[d,h]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,i.correlationId);const f=r.performanceClient.startMeasurement(p.AwaitConcurrentIframe,i.correlationId);f.add({awaitIframeCorrelationId:h});const g=yield d;if(f.end({success:g}),g)return r.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),l}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),D(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(h=>{d=h}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),D(r.acquireTokenBySilentIframe.bind(r),p.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i).then(h=>(d(!0),h)).catch(h=>{throw d(!1),h}).finally(()=>{r.activeIframeRequest=void 0})}}throw l});return function(l){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",k.Silent,c),e.correlationId&&r.performanceClient.addFields({fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,requestId:c.requestId},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",k.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,t){var r=this;return v(function*(){return zn.isNativeAvailable(r.config,r.logger,r.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.acquireTokenNative(e,61).catch(function(){var o=v(function*(i){throw i instanceof Gn&&ms(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.nativeExtensionProvider=void 0,w(mn)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),D(r.acquireTokenFromCache.bind(r),p.AcquireTokenFromCache,r.logger,r.performanceClient,e.correlationId)(e,t).catch(o=>{if(1===t)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",k.Silent,e),D(r.acquireTokenByRefreshToken.bind(r),p.AcquireTokenByRefreshToken,r.logger,r.performanceClient,e.correlationId)(e,t)}))})()}}function Kv(){return(Kv=v(function*(n,e){const t=new QR(n);return yield t.initialize(),Nh.createController(t,e)})).apply(this,arguments)}class vc{static createPublicClientApplication(e){return v(function*(){const t=yield function $3(n,e){return Kv.apply(this,arguments)}(e);return new vc(e,t)})()}constructor(e,t){this.controller=t||new Nh(new QR(e))}initialize(e){var t=this;return v(function*(){return t.controller.initialize(e)})()}acquireTokenPopup(e){var t=this;return v(function*(){return t.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e){return this.controller.addEventCallback(e)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){var r=this;return v(function*(){return r.controller.hydrateCache(e,t)})()}clearCache(e){return this.controller.clearCache(e)}}const z3=window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1;function q3(){return new vc({auth:{clientId:"25e69d69-1321-446b-b7e4-5da492c5e672",authority:"https://login.microsoftonline.com/30f3a176-3041-4dd8-a764-9241387b9261",redirectUri:"http://localhost:4200"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:z3}})}function K3(){const n=new Map;return n.set("https://graph.microsoft.com/v1.0/me",["user.read"]),{interactionType:k.Redirect,protectedResourceMap:n}}function W3(){return{interactionType:k.Redirect,authRequest:{scopes:["user.read"]}}}let Y3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Yn({type:n,bootstrap:[dq,rq]});static#n=this.\u0275inj=In({providers:[{provide:tR,useClass:nq,multi:!0},{provide:gh,useFactory:q3},{provide:mh,useFactory:W3},{provide:tv,useFactory:K3},qr,nv,is],imports:[SV,sq,bz,oq]})}return n})();wV().bootstrapModule(Y3).catch(n=>console.error(n))}},Oh=>{Oh(Oh.s=566)}]);